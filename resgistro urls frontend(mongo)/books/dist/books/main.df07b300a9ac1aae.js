"use strict";(self.webpackChunkbooks=self.webpackChunkbooks||[]).push([[179],{2011:(lt,be,P)=>{P.d(be,{Dh:()=>ue,GT:()=>te,cc:()=>Ie,hO:()=>Be,on:()=>B,pX:()=>ee,xv:()=>se});var g=P(4650),K=P(9260),O=P(2122);lt=P.hmd(lt);const J=["ngOnDestroy"],ee=(De,Ce,Pe,Ee={})=>new Proxy(De,{get:(ve,Te)=>Pe.runOutsideAngular(()=>{var Fe;if(De[Te])return!(null===(Fe=Ee?.spy)||void 0===Fe)&&Fe.get&&Ee.spy.get(Te,De[Te]),De[Te];if(J.indexOf(Te)>-1)return()=>{};const Re=Ce.toPromise().then(V=>{const me=V&&V[Te];return"function"==typeof me?me.bind(V):me&&me.then?me.then(Le=>Pe.run(()=>Le)):Pe.run(()=>me)});return new Proxy(()=>{},{get:(V,me)=>Re[me],apply:(V,me,Le)=>Re.then(qe=>{var ct;const Qe=qe&&qe(...Le);return!(null===(ct=Ee?.spy)||void 0===ct)&&ct.apply&&Ee.spy.apply(Te,Le,Qe),Qe})})})}),te=(De,Ce)=>{Ce.forEach(Pe=>{Object.getOwnPropertyNames(Pe.prototype||Pe).forEach(Ee=>{Object.defineProperty(De.prototype,Ee,Object.getOwnPropertyDescriptor(Pe.prototype||Pe,Ee))})})};class le{constructor(Ce){return Ce}}const ue=new g.OlP("angularfire2.app.options"),se=new g.OlP("angularfire2.app.name");function B(De,Ce,Pe){const ve="object"==typeof Pe&&Pe||{};ve.name=ve.name||"string"==typeof Pe&&Pe||"[DEFAULT]";const Fe=K.Z.apps.filter(Re=>Re&&Re.name===ve.name)[0]||Ce.runOutsideAngular(()=>K.Z.initializeApp(De,ve));try{JSON.stringify(De)!==JSON.stringify(Fe.options)&&$("error",`${Fe.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Fe)}const $=(De,...Ce)=>{(0,g.X6Q)()&&typeof console<"u"&&console[De](...Ce)},q={provide:le,useFactory:B,deps:[ue,g.R0b,[new g.FiY,se]]};let Be=(()=>{class De{constructor(Pe){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",g.q4F.full,Pe.toString())}static initializeApp(Pe,Ee){return{ngModule:De,providers:[{provide:ue,useValue:Pe},{provide:se,useValue:Ee}]}}}return De.\u0275fac=function(Pe){return new(Pe||De)(g.LFG(g.Lbi))},De.\u0275mod=g.oAB({type:De}),De.\u0275inj=g.cJS({providers:[q]}),De})();function Ie(De,Ce,Pe,Ee,ve){const[,Te,Fe]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===De)||[];if(Te)return function He(De,Ce){try{return De.toString()===Ce.toString()}catch{return De===Ce}}(ve,Fe)||(he("error",`${Ce} was already initialized on the ${Pe} Firebase App with different settings.${it?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:ve,was:Fe})),Te;{const Re=Ee();return globalThis.\u0275AngularfireInstanceCache.push([De,Re,ve]),Re}}const it=!!lt.hot,he=(De,...Ce)=>{(0,g.X6Q)()&&typeof console<"u"&&console[De](...Ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(lt,be,P)=>{P.d(be,{q4:()=>bu,iC:()=>$i,HU:()=>cf,vb:()=>Au,JM:()=>_r});var g=P(4650),K=P(259),O=P(5861),J=P(9681),ee=P(2090),te=P(4859),le=P(1877),ue=P(8766);const se="@firebase/installations",B="0.6.4",q=`w:${B}`,Be="FIS_v2",Ce=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Pe(D){return D instanceof ee.ZR&&D.code.includes("request-failed")}function Ee({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:qe(D.expiresIn),creationTime:Date.now()}}function Te(D,b){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*(D,b){const F=(yield b.json()).error;return Ce.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Re({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function V(D,{refreshToken:b}){const M=Re(D);return M.append("Authorization",function ct(D){return`${Be} ${D}`}(b)),M}function me(D){return Le.apply(this,arguments)}function Le(){return(Le=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function qe(D){return Number(D.replace("s","000"))}function Qe(D,b){return re.apply(this,arguments)}function re(){return(re=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const F=Ee(D),W=Re(D),Y=b.getImmediate({optional:!0});if(Y){const ot=yield Y.getHeartbeatsHeader();ot&&W.append("x-firebase-client",ot)}const nt={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:Be,appId:D.appId,sdkVersion:q})},at=yield me(()=>fetch(F,nt));if(at.ok){const ot=yield at.json();return{fid:ot.fid||M,registrationStatus:2,refreshToken:ot.refreshToken,authToken:ve(ot.authToken)}}throw yield Te("Create Installation",at)})).apply(this,arguments)}function ce(D){return new Promise(b=>{setTimeout(b,D)})}const Ae=/^[cdef][\w-]{21}$/;function $e(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Ze(D){return function ye(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ae.test(M)?M:""}catch{return""}}function We(D){return`${D.appName}!${D.appId}`}const rn=new Map;function yt(D,b){const M=We(D);At(M,b),function Vn(D,b){const M=function wn(){return!ln&&"BroadcastChannel"in self&&(ln=new BroadcastChannel("[Firebase] FID Change"),ln.onmessage=D=>{At(D.data.key,D.data.fid)}),ln}();M&&M.postMessage({key:D,fid:b}),function In(){0===rn.size&&ln&&(ln.close(),ln=null)}()}(M,b)}function At(D,b){const M=rn.get(D);if(M)for(const F of M)F(b)}let ln=null;const si="firebase-installations-store";let Gr=null;function _s(){return Gr||(Gr=(0,ue.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(si)}})),Gr}function En(D,b){return zr.apply(this,arguments)}function zr(){return(zr=(0,O.Z)(function*(D,b){const M=We(D),W=(yield _s()).transaction(si,"readwrite"),Y=W.objectStore(si),_e=yield Y.get(M);return yield Y.put(b,M),yield W.done,(!_e||_e.fid!==b.fid)&&yt(D,b.fid),b})).apply(this,arguments)}function dt(D){return ws.apply(this,arguments)}function ws(){return(ws=(0,O.Z)(function*(D){const b=We(D),F=(yield _s()).transaction(si,"readwrite");yield F.objectStore(si).delete(b),yield F.done})).apply(this,arguments)}function vi(D,b){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,O.Z)(function*(D,b){const M=We(D),W=(yield _s()).transaction(si,"readwrite"),Y=W.objectStore(si),_e=yield Y.get(M),nt=b(_e);return void 0===nt?yield Y.delete(M):yield Y.put(nt,M),yield W.done,nt&&(!_e||_e.fid!==nt.fid)&&yt(D,nt.fid),nt})).apply(this,arguments)}function fr(D){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,O.Z)(function*(D){let b;const M=yield vi(D.appConfig,F=>{const W=Mt(F),Y=pt(D,W);return b=Y.registrationPromise,Y.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function Mt(D){return pr(D||{fid:$e(),registrationStatus:0})}function pt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ce.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},F=function Dt(D,b){return Os.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:gn(D)}:{installationEntry:b}}function Os(){return(Os=(0,O.Z)(function*(D,b){try{const M=yield Qe(D,b);return En(D.appConfig,M)}catch(M){throw Pe(M)&&409===M.customData.serverCode?yield dt(D.appConfig):yield En(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function gn(D){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(D){let b=yield Mr(D.appConfig);for(;1===b.registrationStatus;)yield ce(100),b=yield Mr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield fr(D);return F||M}return b})).apply(this,arguments)}function Mr(D){return vi(D,b=>{if(!b)throw Ce.create("installation-not-found");return pr(b)})}function pr(D){return function ta(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function an(D,b){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const F=Kt(D,M),W=V(D,M),Y=b.getImmediate({optional:!0});if(Y){const ot=yield Y.getHeartbeatsHeader();ot&&W.append("x-firebase-client",ot)}const nt={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:q,appId:D.appId}})},at=yield me(()=>fetch(F,nt));if(at.ok)return ve(yield at.json());throw yield Te("Generate Auth Token",at)})).apply(this,arguments)}function Kt(D,{fid:b}){return`${Ee(D)}/${b}/authTokens:generate`}function xr(D){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,O.Z)(function*(D,b=!1){let M;const F=yield vi(D.appConfig,Y=>{if(!Lt(Y))throw Ce.create("not-registered");const _e=Y.authToken;if(!b&&gr(_e))return Y;if(1===_e.requestStatus)return M=je(D,b),Y;{if(!navigator.onLine)throw Ce.create("app-offline");const nt=L(Y);return M=Et(D,nt),nt}});return M?yield M:F.authToken})).apply(this,arguments)}function je(D,b){return we.apply(this,arguments)}function we(){return(we=(0,O.Z)(function*(D,b){let M=yield Je(D.appConfig);for(;1===M.authToken.requestStatus;)yield ce(100),M=yield Je(D.appConfig);const F=M.authToken;return 0===F.requestStatus?xr(D,b):F})).apply(this,arguments)}function Je(D){return vi(D,b=>{if(!Lt(b))throw Ce.create("not-registered");return function G(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Et(D,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(D,b){try{const M=yield an(D,b),F=Object.assign(Object.assign({},b),{authToken:M});return yield En(D.appConfig,F),M}catch(M){if(!Pe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield En(D.appConfig,F)}else yield dt(D.appConfig);throw M}})).apply(this,arguments)}function Lt(D){return void 0!==D&&2===D.registrationStatus}function gr(D){return 2===D.requestStatus&&!function U(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function L(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function X(){return(X=(0,O.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:F}=yield fr(b);return F?F.catch(console.error):xr(b).catch(console.error),M.fid})).apply(this,arguments)}function vt(){return(vt=(0,O.Z)(function*(D,b=!1){const M=D;return yield Xt(M),(yield xr(M,b)).token})).apply(this,arguments)}function Xt(D){return _t.apply(this,arguments)}function _t(){return(_t=(0,O.Z)(function*(D){const{registrationPromise:b}=yield fr(D);b&&(yield b)})).apply(this,arguments)}function Xa(D){return Ce.create("missing-app-config-values",{valueName:D})}const hc="installations",bn=D=>{const b=D.getProvider("app").getImmediate(),M=function na(D){if(!D||!D.options)throw Xa("App Configuration");if(!D.name)throw Xa("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw Xa(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,J._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},$l=D=>{const b=D.getProvider("app").getImmediate(),M=(0,J._getProvider)(b,hc).getImmediate();return{getId:()=>function pe(D){return X.apply(this,arguments)}(M),getToken:W=>function st(D){return vt.apply(this,arguments)}(M,W)}};(function fc(){(0,J._registerComponent)(new te.wA(hc,bn,"PUBLIC")),(0,J._registerComponent)(new te.wA("installations-internal",$l,"PRIVATE"))})(),(0,J.registerVersion)(se,B),(0,J.registerVersion)(se,B,"esm2017");const ra="@firebase/remote-config",$n=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Fs{constructor(b,M,F,W){this.client=b,this.storage=M,this.storageCache=F,this.logger=W}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,W=F<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${W}.`),W}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(b.cacheMaxAgeMillis,F))return W;b.eTag=W&&W.eTag;const Y=yield M.client.fetch(b),_e=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&_e.push(M.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(_e),Y})()}}function Ii(D=navigator){return D.languages&&D.languages[0]||D.language}class Is{constructor(b,M,F,W,Y,_e){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=F,this.projectId=W,this.apiKey=Y,this.appId=_e}fetch(b){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},at={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:M.appId,language_code:Ii()},ot={method:"POST",headers:nt,body:JSON.stringify(at)},Pt=fetch(_e,ot),St=new Promise((Jn,us)=>{b.signal.addEventListener(()=>{const bi=new Error("The operation was aborted.");bi.name="AbortError",us(bi)})});let lr;try{yield Promise.race([Pt,St]),lr=yield Pt}catch(Jn){let us="fetch-client-network";throw"AbortError"===Jn?.name&&(us="fetch-timeout"),$n.create(us,{originalErrorMessage:Jn?.message})}let Xn=lr.status;const ci=lr.headers.get("ETag")||void 0;let xu,xn;if(200===lr.status){let Jn;try{Jn=yield lr.json()}catch(us){throw $n.create("fetch-client-parse",{originalErrorMessage:us?.message})}xu=Jn.entries,xn=Jn.state}if("INSTANCE_STATE_UNSPECIFIED"===xn?Xn=500:"NO_CHANGE"===xn?Xn=304:("NO_TEMPLATE"===xn||"EMPTY_CONFIG"===xn)&&(xu={}),304!==Xn&&200!==Xn)throw $n.create("fetch-status",{httpStatus:Xn});return{status:Xn,eTag:ci,config:xu}})()}}class Ni{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,F)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function es(D,b){return new Promise((M,F)=>{const W=Math.max(b-Date.now(),0),Y=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(Y),F($n.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const Y=yield W.client.fetch(b);return yield W.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function dn(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Y))throw Y;const _e={throttleEndTimeMillis:Date.now()+(0,ee.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(_e),W.attemptFetch(b,_e)}})()}}class wo{constructor(b,M,F,W,Y){this.app=b,this._client=M,this._storageCache=F,this._storage=W,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ls(D,b){const M=D.target.error||void 0;return $n.create(b,{originalErrorMessage:M&&M?.message})}const Nr="app_namespace_store";class Di{constructor(b,M,F,W=function qr(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{b(Ls(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Nr,{keyPath:"compositeKey"})}}catch(M){b($n.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=b,this.appName=M,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,Y)=>{const nt=F.transaction([Nr],"readonly").objectStore(Nr),at=M.createCompositeKey(b);try{const ot=nt.get(at);ot.onerror=Pt=>{Y(Ls(Pt,"storage-get"))},ot.onsuccess=Pt=>{const St=Pt.target.result;W(St?St.value:void 0)}}catch(ot){Y($n.create("storage-get",{originalErrorMessage:ot?.message}))}})})()}set(b,M){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((Y,_e)=>{const at=W.transaction([Nr],"readwrite").objectStore(Nr),ot=F.createCompositeKey(b);try{const Pt=at.put({compositeKey:ot,value:M});Pt.onerror=St=>{_e(Ls(St,"storage-set"))},Pt.onsuccess=()=>{Y()}}catch(Pt){_e($n.create("storage-set",{originalErrorMessage:Pt?.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,Y)=>{const nt=F.transaction([Nr],"readwrite").objectStore(Nr),at=M.createCompositeKey(b);try{const ot=nt.delete(at);ot.onerror=Pt=>{Y(Ls(Pt,"storage-delete"))},ot.onsuccess=()=>{W()}}catch(ot){Y($n.create("storage-delete",{originalErrorMessage:ot?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class sa{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),F=b.storage.getLastSuccessfulFetchTimestampMillis(),W=b.storage.getActiveConfig(),Y=yield M;Y&&(b.lastFetchStatus=Y);const _e=yield F;_e&&(b.lastSuccessfulFetchTimestampMillis=_e);const nt=yield W;nt&&(b.activeConfig=nt)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function oa(){return Zh.apply(this,arguments)}function Zh(){return(Zh=(0,O.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}!function Ci(){(0,J._registerComponent)(new te.wA("remote-config",function D(b,{instanceIdentifier:M}){const F=b.getProvider("app").getImmediate(),W=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!(0,ee.hl)())throw $n.create("indexed-db-unavailable");const{projectId:Y,apiKey:_e,appId:nt}=F.options;if(!Y)throw $n.create("registration-project-id");if(!_e)throw $n.create("registration-api-key");if(!nt)throw $n.create("registration-app-id");const at=new Di(nt,F.name,M=M||"firebase"),ot=new sa(at),Pt=new le.Yd(ra);Pt.logLevel=le.in.ERROR;const St=new Is(W,J.SDK_VERSION,M,Y,_e,nt),lr=new Ni(St,at),Xn=new Fs(lr,at,ot,Pt),ci=new wo(F,Xn,ot,at,Pt);return function Tn(D){const b=(0,ee.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(ci),ci},"PUBLIC").setMultipleInstances(!0)),(0,J.registerVersion)(ra,"0.4.4"),(0,J.registerVersion)(ra,"0.4.4","esm2017")}();const yc="/firebase-messaging-sw.js",ts="/firebase-cloud-messaging-push-scope",Eo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vc="google.c.a.c_id",Yh="google.c.a.c_l",Qh="google.c.a.ts",Xp="google.c.a.e";var Vs=(()=>{return(D=Vs||(Vs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Vs;var D})();function Oi(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jp(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),W=new Uint8Array(F.length);for(let Y=0;Y<F.length;++Y)W[Y]=F.charCodeAt(Y);return W}const _c="fcm_token_details_db",Or="fcm_token_object_Store";function Ec(D){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(_c))return null;let b=null;return(yield(0,ue.X3)(_c,5,{upgrade:(F=(0,O.Z)(function*(W,Y,_e,nt){var at;if(Y<2||!W.objectStoreNames.contains(Or))return;const ot=nt.objectStore(Or),Pt=yield ot.index("fcmSenderId").get(D);if(yield ot.clear(),Pt)if(2===Y){const St=Pt;if(!St.auth||!St.p256dh||!St.endpoint)return;b={token:St.fcmToken,createTime:null!==(at=St.createTime)&&void 0!==at?at:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:Oi(St.vapidKey)}}}else if(3===Y){const St=Pt;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Oi(St.auth),p256dh:Oi(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Oi(St.vapidKey)}}}else if(4===Y){const St=Pt;b={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Oi(St.auth),p256dh:Oi(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Oi(St.vapidKey)}}}}),function(Y,_e,nt,at){return F.apply(this,arguments)})})).close(),yield(0,ue.Lj)(_c),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),Xh(b)?b:null;var F}),Gl.apply(this,arguments)}function Xh(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Bs="firebase-messaging-store";let eu=null;function Do(){return eu||(eu=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Bs)}})),eu}function tu(D){return Co.apply(this,arguments)}function Co(){return(Co=(0,O.Z)(function*(D){const b=To(D),F=yield(yield Do()).transaction(Bs).objectStore(Bs).get(b);if(F)return F;{const W=yield Ec(D.appConfig.senderId);if(W)return yield $s(D,W),W}})).apply(this,arguments)}function $s(D,b){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,b){const M=To(D),W=(yield Do()).transaction(Bs,"readwrite");return yield W.objectStore(Bs).put(b,M),yield W.done,b})).apply(this,arguments)}function zl(D){return bo.apply(this,arguments)}function bo(){return(bo=(0,O.Z)(function*(D){const b=To(D),F=(yield Do()).transaction(Bs,"readwrite");yield F.objectStore(Bs).delete(b),yield F.done})).apply(this,arguments)}function To({appConfig:D}){return D.appId}const Mn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function nu(D,b){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(D,b){const M=yield Hs(D),F=la(b),W={method:"POST",headers:M,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(So(D.appConfig),W)).json()}catch(_e){throw Mn.create("token-subscribe-failed",{errorInfo:_e?.toString()})}if(Y.error)throw Mn.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw Mn.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function ca(D,b){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(D,b){const M=yield Hs(D),F=la(b.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(F)};let Y;try{Y=yield(yield fetch(`${So(D.appConfig)}/${b.token}`,W)).json()}catch(_e){throw Mn.create("token-update-failed",{errorInfo:_e?.toString()})}if(Y.error)throw Mn.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw Mn.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Hn(D,b){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,O.Z)(function*(D,b){const F={method:"DELETE",headers:yield Hs(D)};try{const Y=yield(yield fetch(`${So(D.appConfig)}/${b}`,F)).json();if(Y.error)throw Mn.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(W){throw Mn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function So({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Hs(D){return nr.apply(this,arguments)}function nr(){return(nr=(0,O.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function la({p256dh:D,auth:b,endpoint:M,vapidKey:F}){const W={web:{endpoint:M,auth:b,p256dh:D}};return F!==Eo&&(W.web.applicationPubKey=F),W}const Ao=6048e5;function ru(D){return ns.apply(this,arguments)}function ns(){return(ns=(0,O.Z)(function*(D){const b=yield Dc(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Oi(b.getKey("auth")),p256dh:Oi(b.getKey("p256dh"))},F=yield tu(D.firebaseDependencies);if(F){if(ou(F.subscriptionOptions,M))return Date.now()>=F.createTime+Ao?Tt(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield Hn(D.firebaseDependencies,F.token)}catch(W){console.warn(W)}return ql(D.firebaseDependencies,M)}return ql(D.firebaseDependencies,M)})).apply(this,arguments)}function da(D){return ha.apply(this,arguments)}function ha(){return(ha=(0,O.Z)(function*(D){const b=yield tu(D.firebaseDependencies);b&&(yield Hn(D.firebaseDependencies,b.token),yield zl(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Tt(D,b){return iu.apply(this,arguments)}function iu(){return(iu=(0,O.Z)(function*(D,b){try{const M=yield ca(D.firebaseDependencies,b),F=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield $s(D.firebaseDependencies,F),M}catch(M){throw yield da(D),M}})).apply(this,arguments)}function ql(D,b){return su.apply(this,arguments)}function su(){return(su=(0,O.Z)(function*(D,b){const F={token:yield nu(D,b),createTime:Date.now(),subscriptionOptions:b};return yield $s(D,F),F.token})).apply(this,arguments)}function Dc(D,b){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Jp(b)})})).apply(this,arguments)}function ou(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Jh(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function bc(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const F=b.notification.body;F&&(D.notification.body=F);const W=b.notification.image;W&&(D.notification.image=W);const Y=b.notification.icon;Y&&(D.notification.icon=Y)}(b,D),function fe(D,b){b.data&&(D.data=b.data)}(b,D),function Yt(D,b){var M,F,W,Y,_e;if(!(b.fcmOptions||null!==(M=b.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const nt=null!==(W=null===(F=b.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==W?W:null===(Y=b.notification)||void 0===Y?void 0:Y.click_action;nt&&(D.fcmOptions.link=nt);const at=null===(_e=b.fcmOptions)||void 0===_e?void 0:_e.analytics_label;at&&(D.fcmOptions.analyticsLabel=at)}(b,D),b}function Tc(D){return"object"==typeof D&&!!D&&vc in D}function Wl(D,b){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<b.length&&M.push(b.charAt(F));return M.join("")}function fa(D){return Mn.create("missing-app-config-values",{valueName:D})}Wl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class au{constructor(b,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function ur(D){if(!D||!D.options)throw fa("App Configuration Object");if(!D.name)throw fa("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of b)if(!M[F])throw fa(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:W,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Zr(D){return uu.apply(this,arguments)}function uu(){return(uu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(yc,{scope:ts}),D.swRegistration.update().catch(()=>{})}catch(b){throw Mn.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function cu(D,b){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield Zr(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Mn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function Sc(D,b){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=Eo)})).apply(this,arguments)}function Yr(){return(Yr=(0,O.Z)(function*(D,b){if(!navigator)throw Mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Mn.create("permission-blocked");return yield Sc(D,b?.vapidKey),yield cu(D,b?.serviceWorkerRegistration),ru(D)})).apply(this,arguments)}function Ds(D,b,M){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(D,b,M){const F=Pi(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[vc],message_name:M[Yh],message_time:M[Qh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Pi(D){switch(D){case Vs.NOTIFICATION_CLICKED:return"notification_open";case Vs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function pa(){return(pa=(0,O.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Vs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Jh(M)):D.onMessageHandler.next(Jh(M)));const F=M.data;Tc(F)&&"1"===F[Xp]&&(yield Ds(D,M.messageType,F))})).apply(this,arguments)}const Yl="@firebase/messaging",Mc=D=>{const b=new au(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Zl(D,b){return pa.apply(this,arguments)}(b,M)),b},rs=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:F=>function Qn(D,b){return Yr.apply(this,arguments)}(b,F)}};function xc(){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,O.Z)(function*(){try{yield(0,ee.eu)()}catch{return!1}return typeof window<"u"&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ql(){(0,J._registerComponent)(new te.wA("messaging",Mc,"PUBLIC")),(0,J._registerComponent)(new te.wA("messaging-internal",rs,"PRIVATE")),(0,J.registerVersion)(Yl,"0.12.4"),(0,J.registerVersion)(Yl,"0.12.4","esm2017")}();const Jl="analytics",Pr="firebase_id",xo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nc="https://www.googletagmanager.com/gtag/js",cr=new le.Yd("@firebase/analytics");function nf(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function ng(D,b){const M=document.createElement("script");M.src=`${Nc}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function ga(D,b,M,F,W,Y){return zs.apply(this,arguments)}function zs(){return(zs=(0,O.Z)(function*(D,b,M,F,W,Y){const _e=F[W];try{if(_e)yield b[_e];else{const at=(yield nf(M)).find(ot=>ot.measurementId===W);at&&(yield b[at.appId])}}catch(nt){cr.error(nt)}D("config",W,Y)})).apply(this,arguments)}function hu(D,b,M,F,W){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*(D,b,M,F,W){try{let Y=[];if(W&&W.send_to){let _e=W.send_to;Array.isArray(_e)||(_e=[_e]);const nt=yield nf(M);for(const at of _e){const ot=nt.find(St=>St.measurementId===at),Pt=ot&&b[ot.appId];if(!Pt){Y=[];break}Y.push(Pt)}}0===Y.length&&(Y=Object.values(b)),yield Promise.all(Y),D("event",F,W||{})}catch(Y){cr.error(Y)}})).apply(this,arguments)}function is(D){const b=window.document.getElementsByTagName("script");for(const M of Object.values(b))if(M.src&&M.src.includes(Nc)&&M.src.includes(D))return M;return null}const Qr=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),td=new class Ws{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function fu(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Ks(D){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,O.Z)(function*(D){var b;const{appId:M,apiKey:F}=D,W={method:"GET",headers:fu(F)},Y=xo.replace("{app-id}",M),_e=yield fetch(Y,W);if(200!==_e.status&&304!==_e.status){let nt="";try{const at=yield _e.json();null!==(b=at.error)&&void 0!==b&&b.message&&(nt=at.error.message)}catch{}throw Qr.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:nt})}return _e.json()})).apply(this,arguments)}function Sn(D){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,O.Z)(function*(D,b=td,M){const{appId:F,apiKey:W,measurementId:Y}=D.options;if(!F)throw Qr.create("no-app-id");if(!W){if(Y)return{measurementId:Y,appId:F};throw Qr.create("no-api-key")}const _e=b.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new ya;return setTimeout((0,O.Z)(function*(){nt.abort()}),void 0!==M?M:6e4),Ro({appId:F,apiKey:W,measurementId:Y},_e,nt,b)})).apply(this,arguments)}function Ro(D,b,M){return ss.apply(this,arguments)}function ss(){return(ss=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},F,W=td){var Y;const{appId:_e,measurementId:nt}=D;try{yield No(F,b)}catch(at){if(nt)return cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:_e,measurementId:nt};throw at}try{const at=yield Ks(D);return W.deleteThrottleMetadata(_e),at}catch(at){const ot=at;if(!kc(ot)){if(W.deleteThrottleMetadata(_e),nt)return cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:_e,measurementId:nt};throw at}const Pt=503===Number(null===(Y=ot?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,ee.$s)(M,W.intervalMillis,30):(0,ee.$s)(M,W.intervalMillis),St={throttleEndTimeMillis:Date.now()+Pt,backoffCount:M+1};return W.setThrottleMetadata(_e,St),cr.debug(`Calling attemptFetch again in ${Pt} millis`),Ro(D,St,F,W)}})).apply(this,arguments)}function No(D,b){return new Promise((M,F)=>{const W=Math.max(b-Date.now(),0),Y=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(Y),F(Qr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function kc(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class ya{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let pu,Ys;function bs(){return(bs=(0,O.Z)(function*(D,b,M,F,W){if(W&&W.global)D("event",M,F);else{const Y=yield b;D("event",M,Object.assign(Object.assign({},F),{send_to:Y}))}})).apply(this,arguments)}function yu(D){Ys=D}function vu(D){pu=D}function _u(){return nd.apply(this,arguments)}function nd(){return(nd=(0,O.Z)(function*(){if(!(0,ee.hl)())return cr.warn(Qr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(D){return cr.warn(Qr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function wu(){return(wu=(0,O.Z)(function*(D,b,M,F,W,Y,_e){var nt;const at=Sn(D);at.then(Xn=>{M[Xn.measurementId]=Xn.appId,D.options.measurementId&&Xn.measurementId!==D.options.measurementId&&cr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xn=>cr.error(Xn)),b.push(at);const ot=_u().then(Xn=>{if(Xn)return F.getId()}),[Pt,St]=yield Promise.all([at,ot]);is(Y)||ng(Y,Pt.measurementId),Ys&&(W("consent","default",Ys),yu(void 0)),W("js",new Date);const lr=null!==(nt=_e?.config)&&void 0!==nt?nt:{};return lr.origin="firebase",lr.update=!0,null!=St&&(lr[Pr]=St),W("config",Pt.measurementId,lr),pu&&(W("set",pu),vu(void 0)),Pt.measurementId})).apply(this,arguments)}class Eu{constructor(b){this.app=b}_delete(){return delete os[this.app.options.appId],Promise.resolve()}}let os={},Fc=[];const ko={};let Vc,Li,Fi="dataLayer",ui=!1;function Iu(D,b,M){!function Uc(){const D=[];if((0,ee.ru)()&&D.push("This is a browser extension environment."),(0,ee.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((F,W)=>`(${W+1}) ${F}`).join(" "),M=Qr.create("invalid-analytics-context",{errorInfo:b});cr.warn(M.message)}}();const F=D.options.appId;if(!F)throw Qr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw Qr.create("no-api-key");cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=os[F])throw Qr.create("already-exists",{id:F});if(!ui){!function rg(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(Fi);const{wrappedGtag:Y,gtagCore:_e}=function rf(D,b,M,F,W){let Y=function(..._e){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(Y=window[W]),window[W]=function qs(D,b,M,F){function Y(){return(Y=(0,O.Z)(function*(_e,nt,at){try{"event"===_e?yield hu(D,b,M,nt,at):"config"===_e?yield ga(D,b,M,F,nt,at):"consent"===_e?D("consent","update",at):D("set",nt)}catch(ot){cr.error(ot)}})).apply(this,arguments)}return function W(_e,nt,at){return Y.apply(this,arguments)}}(Y,D,b,M),{gtagCore:Y,wrappedGtag:window[W]}}(os,Fc,ko,Fi,"gtag");Li=Y,Vc=_e,ui=!0}return os[F]=function Qs(D,b,M,F,W,Y,_e){return wu.apply(this,arguments)}(D,Fc,ko,b,Vc,Fi,M),new Eu(D)}function id(){return Ss.apply(this,arguments)}function Ss(){return(Ss=(0,O.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}const un="@firebase/analytics";!function sg(){(0,J._registerComponent)(new te.wA(Jl,(b,{options:M})=>Iu(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,J._registerComponent)(new te.wA("analytics-internal",function D(b){try{const M=b.getProvider(Jl).getImmediate();return{logEvent:(F,W,Y)=>function Ay(D,b,M,F){D=(0,ee.m9)(D),function gu(D,b,M,F,W){return bs.apply(this,arguments)}(Li,os[D.app.options.appId],b,M,F).catch(W=>cr.error(W))}(M,F,W,Y)}}catch(M){throw Qr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,J.registerVersion)(un,"0.9.4"),(0,J.registerVersion)(un,"0.9.4","esm2017")}();var od=P(4408),jc=P(7565);const af=new class ud extends jc.v{}(class ad extends od.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(b,M,F):(b.flush(this),0)}});var cd=P(4986),Gc=P(8505),vn=P(9468),Cu=P(5363);const bu=new g.GfV("7.5.0"),ld="__angularfire_symbol__analyticsIsSupportedValue",kr="__angularfire_symbol__analyticsIsSupported",Ui="__angularfire_symbol__remoteConfigIsSupportedValue",Tu="__angularfire_symbol__remoteConfigIsSupported",Ia="__angularfire_symbol__messagingIsSupportedValue",Fo="__angularfire_symbol__messagingIsSupported";function _r(D,b,M){if(b){if(1===b.length)return b[0];const Y=b.filter(_e=>_e.app===M);if(1===Y.length)return Y[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[kr]||(globalThis[kr]=id().then(D=>globalThis[ld]=D).catch(()=>globalThis[ld]=!1)),globalThis[Fo]||(globalThis[Fo]=xc().then(D=>globalThis[Ia]=D).catch(()=>globalThis[Ia]=!1)),globalThis[Tu]||(globalThis[Tu]=oa().then(D=>globalThis[Ui]=D).catch(()=>globalThis[Ui]=!1));const Au=(D,b)=>{const M=b?[b]:(0,K.C6)(),F=[];return M.forEach(W=>{W.container.getProvider(D).instances.forEach(_e=>{F.includes(_e)||F.push(_e)})}),F};function qt(){}class Jr{constructor(b,M=af){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,F){const W=this.zone;return this.delegate.schedule(function(_e){W.runGuarded(()=>{b.apply(this,[_e])})},M,F)}}class dd{constructor(b){this.zone=b,this.task=null}call(b,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qt,{},qt,qt)),M.pipe((0,Gc.b)({next:F,complete:F,error:F})).subscribe(b).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let cf=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Jr(Zone.current)),this.insideAngular=M.run(()=>new Jr(Zone.current,cd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function as(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function $i(D){return as(),function Pn(D){return function(M){return(M=M.lift(new dd(D.ngZone))).pipe((0,vn.R)(D.outsideAngular),(0,Cu.Q)(D.insideAngular))}}(as())(D)}},2090:(lt,be,P)=>{P.d(be,{$s:()=>Et,BH:()=>Te,G6:()=>Ae,L:()=>se,LL:()=>yt,Pz:()=>ve,Sg:()=>Fe,UG:()=>me,US:()=>te,ZB:()=>q,ZR:()=>rn,aH:()=>Ee,b$:()=>ct,eu:()=>$e,hl:()=>Oe,jU:()=>Le,m9:()=>gr,ne:()=>Mt,pd:()=>fr,r3:()=>si,ru:()=>qe,tV:()=>B,uI:()=>V,vZ:()=>zr,w1:()=>re,xO:()=>vi,xb:()=>_s,z$:()=>Re,zI:()=>Ze,zd:()=>Dn});const J=function(U){const L=[];let G=0;for(let pe=0;pe<U.length;pe++){let X=U.charCodeAt(pe);X<128?L[G++]=X:X<2048?(L[G++]=X>>6|192,L[G++]=63&X|128):55296==(64512&X)&&pe+1<U.length&&56320==(64512&U.charCodeAt(pe+1))?(X=65536+((1023&X)<<10)+(1023&U.charCodeAt(++pe)),L[G++]=X>>18|240,L[G++]=X>>12&63|128,L[G++]=X>>6&63|128,L[G++]=63&X|128):(L[G++]=X>>12|224,L[G++]=X>>6&63|128,L[G++]=63&X|128)}return L},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const G=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,pe=[];for(let X=0;X<U.length;X+=3){const st=U[X],vt=X+1<U.length,Xt=vt?U[X+1]:0,_t=X+2<U.length,Cn=_t?U[X+2]:0;let _i=(15&Xt)<<2|Cn>>6,Zn=63&Cn;_t||(Zn=64,vt||(_i=64)),pe.push(G[st>>2],G[(3&st)<<4|Xt>>4],G[_i],G[Zn])}return pe.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let G=0,pe=0;for(;G<U.length;){const X=U[G++];if(X<128)L[pe++]=String.fromCharCode(X);else if(X>191&&X<224){const st=U[G++];L[pe++]=String.fromCharCode((31&X)<<6|63&st)}else if(X>239&&X<365){const _t=((7&X)<<18|(63&U[G++])<<12|(63&U[G++])<<6|63&U[G++])-65536;L[pe++]=String.fromCharCode(55296+(_t>>10)),L[pe++]=String.fromCharCode(56320+(1023&_t))}else{const st=U[G++],vt=U[G++];L[pe++]=String.fromCharCode((15&X)<<12|(63&st)<<6|63&vt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const G=L?this.charToByteMapWebSafe_:this.charToByteMap_,pe=[];for(let X=0;X<U.length;){const st=G[U.charAt(X++)],Xt=X<U.length?G[U.charAt(X)]:0;++X;const Cn=X<U.length?G[U.charAt(X)]:64;++X;const Gt=X<U.length?G[U.charAt(X)]:64;if(++X,null==st||null==Xt||null==Cn||null==Gt)throw new le;pe.push(st<<2|Xt>>4),64!==Cn&&(pe.push(Xt<<4&240|Cn>>2),64!==Gt&&pe.push(Cn<<6&192|Gt))}return pe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class le extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const se=function(U){return function(U){const L=J(U);return te.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return te.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const G in L)!L.hasOwnProperty(G)||!Be(G)||(U[G]=q(U[G],L[G]));return U}function Be(U){return"__proto__"!==U}const De=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&B(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Ee=()=>{var U;return null===(U=De())||void 0===U?void 0:U.config},ve=U=>{var L;return null===(L=De())||void 0===L?void 0:L[`_${U}`]};class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,G)=>{this.resolve=L,this.reject=G})}wrapCallback(L){return(G,pe)=>{G?this.reject(G):this.resolve(pe),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(G):L(G,pe))}}}function Fe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pe=L||"demo-project",X=U.iat||0,st=U.sub||U.user_id;if(!st)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${pe}`,aud:pe,iat:X,exp:X+3600,auth_time:X,sub:st,user_id:st,firebase:{sign_in_provider:"custom",identities:{}}},U);return[se(JSON.stringify({alg:"none",type:"JWT"})),se(JSON.stringify(vt)),""].join(".")}function Re(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function V(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function me(){var U;const L=null===(U=De())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Le(){return"object"==typeof self&&self.self===self}function qe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function ct(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function re(){const U=Re();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function Ae(){return!me()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){try{return"object"==typeof indexedDB}catch{return!1}}function $e(){return new Promise((U,L)=>{try{let G=!0;const pe="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(pe);X.onsuccess=()=>{X.result.close(),G||self.indexedDB.deleteDatabase(pe),U(!0)},X.onupgradeneeded=()=>{G=!1},X.onerror=()=>{var st;L((null===(st=X.error)||void 0===st?void 0:st.message)||"")}}catch(G){L(G)}})}function Ze(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class rn extends Error{constructor(L,G,pe){super(G),this.code=L,this.customData=pe,this.name="FirebaseError",Object.setPrototypeOf(this,rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yt.prototype.create)}}class yt{constructor(L,G,pe){this.service=L,this.serviceName=G,this.errors=pe}create(L,...G){const pe=G[0]||{},X=`${this.service}/${L}`,st=this.errors[L],vt=st?function Qt(U,L){return U.replace(Xe,(G,pe)=>{const X=L[pe];return null!=X?String(X):`<${pe}?>`})}(st,pe):"Error";return new rn(X,`${this.serviceName}: ${vt} (${X}).`,pe)}}const Xe=/\{\$([^}]+)}/g;function si(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function _s(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function zr(U,L){if(U===L)return!0;const G=Object.keys(U),pe=Object.keys(L);for(const X of G){if(!pe.includes(X))return!1;const st=U[X],vt=L[X];if(dt(st)&&dt(vt)){if(!zr(st,vt))return!1}else if(st!==vt)return!1}for(const X of pe)if(!G.includes(X))return!1;return!0}function dt(U){return null!==U&&"object"==typeof U}function vi(U){const L=[];for(const[G,pe]of Object.entries(U))Array.isArray(pe)?pe.forEach(X=>{L.push(encodeURIComponent(G)+"="+encodeURIComponent(X))}):L.push(encodeURIComponent(G)+"="+encodeURIComponent(pe));return L.length?"&"+L.join("&"):""}function Dn(U){const L={};return U.replace(/^\?/,"").split("&").forEach(pe=>{if(pe){const[X,st]=pe.split("=");L[decodeURIComponent(X)]=decodeURIComponent(st)}}),L}function fr(U){const L=U.indexOf("?");if(!L)return"";const G=U.indexOf("#",L);return U.substring(L,G>0?G:void 0)}function Mt(U,L){const G=new pt(U,L);return G.subscribe.bind(G)}class pt{constructor(L,G){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=G,this.task.then(()=>{L(this)}).catch(pe=>{this.error(pe)})}next(L){this.forEachObserver(G=>{G.next(L)})}error(L){this.forEachObserver(G=>{G.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,G,pe){let X;if(void 0===L&&void 0===G&&void 0===pe)throw new Error("Missing Observer.");X=function Os(U,L){if("object"!=typeof U||null===U)return!1;for(const G of L)if(G in U&&"function"==typeof U[G])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:G,complete:pe},void 0===X.next&&(X.next=gn),void 0===X.error&&(X.error=gn),void 0===X.complete&&(X.complete=gn);const st=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),st}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let G=0;G<this.observers.length;G++)this.sendOne(G,L)}sendOne(L,G){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{G(this.observers[L])}catch(pe){typeof console<"u"&&console.error&&console.error(pe)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gn(){}function Et(U,L=1e3,G=2){const pe=L*Math.pow(G,U),X=Math.round(.5*pe*(Math.random()-.5)*2);return Math.min(144e5,pe+X)}function gr(U){return U&&U._delegate?U._delegate:U}},6721:(lt,be,P)=>{var g=P(4650);let K=null;function O(){return K}class ee{}const te=new g.OlP("DocumentToken");let le=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ue(){return(0,g.LFG)(B)}()},providedIn:"platform"}),n})();const se=new g.OlP("Location Initialized");let B=(()=>{class n extends le{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){$()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){$()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function q(){return new B((0,g.LFG)(te))}()},providedIn:"platform"}),n})();function $(){return!!window.history.pushState}function Be(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let it=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(De)},providedIn:"root"}),n})();const he=new g.OlP("appBaseHref");let De=(()=>{class n extends it{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Be(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+He(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+He(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(he,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ce=(()=>{class n extends it{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Be(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(le),g.LFG(he,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Fe(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ie(Te(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){return n&&new RegExp(`^${n}([/;?#]|$)`).test(e)?e.substring(n.length):e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=He,n.joinWithSlash=Be,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(g.LFG(it))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Ee(){return new Pe((0,g.LFG)(it))}()},providedIn:"root"}),n})();function Te(n){return n.replace(/\/index.html$/,"")}const oi=/\s+/,Ye=[];let Nt=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this.initialClasses=Ye,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(oi):Ye}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(oi):t}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const r of t)this._updateState(r,!0);else if(null!=t)for(const r of Object.keys(t))this._updateState(r,Boolean(t[r]));this._applyStateDiff()}_updateState(t,r){const o=this.stateMap.get(t);void 0!==o?(o.enabled!==r&&(o.changed=!0,o.enabled=r),o.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const r=t[0],o=t[1];o.changed?(this._toggleClass(r,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),o.touched=!1}}_toggleClass(t,r){(t=t.trim()).length>0&&t.split(oi).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class jn{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let wi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new jn(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Tn(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Tn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Tn(n,e){n.context.$implicit=e.item}let ks=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Vt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Vt{constructor(){this.$implicit=null,this.ngIf=null}}function pc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let _c=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();function Ja(n){return"server"===n}let Do=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new tu((0,g.LFG)(te),window)}),n})();class tu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function $s(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Co(this.window.history)||Co(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Co(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class hu extends ee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ki extends hu{static makeCurrent(){!function J(n){K||(K=n)}(new ki)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function rf(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}();return null==t?null:function ma(n){is=is||document.createElement("a"),is.setAttribute("href",n);const e=is.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function mr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let is,qs=null;const Qr=new g.OlP("TRANSITION_ID"),ed=[{provide:g.ip1,useFactory:function Oc(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Qr,te,g.zs3],multi:!0}];let td=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const fu=new g.OlP("EventManagerPlugins");let Ks=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fu),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Pc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Sn=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Cs=(()=>{class n extends Sn{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ro),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ro))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Ro(n){O().remove(n)}const ss={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},No=/%COMP%/g;function Ts(n,e){return e.flat(100).map(t=>t.replace(No,n))}function Oo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Po=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new _a(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Ys(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case g.ifc.ShadowDom:return new yu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ts(r.id,r.styles);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ks),g.LFG(Cs),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class _a{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ss[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Zs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Zs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ss[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ss[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Oo(r)):this.eventManager.addEventListener(e,t,Oo(r))}}function Zs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ys extends _a{constructor(e,t,r,o){super(e),this.component=r;const u=Ts(o+"-"+r.id,r.styles);t.addStyles(u),this.contentAttr=function bs(n){return"_ngcontent-%COMP%".replace(No,n)}(o+"-"+r.id),this.hostAttr=function va(n){return"_nghost-%COMP%".replace(No,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class yu extends _a{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ts(o.id,o.styles);for(let l=0;l<u.length;l++){const m=document.createElement("style");m.textContent=u[l],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let vu=(()=>{class n extends Pc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const _u=["alt","control","meta","shift"],nd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qs={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let wu=(()=>{class n extends Pc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),_u.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let o=nd[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),_u.forEach(l=>{l!==o&&(0,Qs[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const ig=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function Lc(){ki.makeCurrent()},multi:!0},{provide:te,useFactory:function Li(){return(0,g.RDi)(document),document},deps:[]}]),Uc=new g.OlP(""),Iu=[{provide:g.rWj,useClass:class Ws{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Bc=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Vc(){return new g.qLn},deps:[]},{provide:fu,useClass:vu,multi:!0,deps:[te,g.R0b,g.Lbi]},{provide:fu,useClass:wu,multi:!0,deps:[te]},{provide:Po,useClass:Po,deps:[Ks,Cs,g.AFp]},{provide:g.FYo,useExisting:Po},{provide:Sn,useExisting:Cs},{provide:Cs,useClass:Cs,deps:[te]},{provide:Ks,useClass:Ks,deps:[fu,g.R0b]},{provide:class zl{},useClass:td,deps:[]},[]];let rd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Qr,useExisting:g.AFp},ed]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Uc,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Bc,...Iu],imports:[_c,g.hGG]}),n})(),$c=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function wa(){return new $c((0,g.LFG)(te))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var qt=P(8996),Jr=P(9751);const{isArray:dd}=Array,{getPrototypeOf:cf,prototype:as,keys:zc}=Object;function Bi(n){if(1===n.length){const e=n[0];if(dd(e))return{args:e,keys:null};if(function og(n){return n&&"object"==typeof n&&cf(n)===as}(e)){const t=zc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Da=P(8421),$i=P(7669),Pn=P(5403),wt=P(4004);const{isArray:Mu}=Array;function b(n){return(0,wt.U)(e=>function D(n,e){return Mu(e)?n(...e):n(e)}(n,e))}function M(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let W=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Y=(()=>{class n extends W{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const _e=new g.OlP("NgValueAccessor"),ot={provide:_e,useExisting:(0,g.Gpc)(()=>lr),multi:!0},St=new g.OlP("CompositionEventMode");let lr=(()=>{class n extends W{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Pt(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(St,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([ot]),g.qOj]}),n})();function ci(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function xu(n){return null!=n&&"number"==typeof n.length}const xn=new g.OlP("NgValidators"),Jn=new g.OlP("NgAsyncValidators"),us=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bi{static min(e){return function lf(n){return e=>{if(ci(e.value)||ci(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ag(n){return e=>{if(ci(e.value)||ci(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function df(n){return ci(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function hf(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function ff(n){return ci(n.value)||us.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function My(n){return e=>ci(e.value)||!xu(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function pf(n){return e=>xu(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function ug(n){if(!n)return Xs;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ci(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return Py(e)}static composeAsync(e){return fd(e)}}function Xs(n){return null}function xy(n){return null!=n}function Ry(n){return(0,g.QGY)(n)?(0,qt.D)(n):n}function hd(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ny(n,e){return e.map(t=>t(n))}function Oy(n){return n.map(e=>function X0(n){return!n.validate}(e)?e:t=>e.validate(t))}function Py(n){if(!n)return null;const e=n.filter(xy);return 0==e.length?null:function(t){return hd(Ny(t,e))}}function cg(n){return null!=n?Py(Oy(n)):null}function fd(n){if(!n)return null;const e=n.filter(xy);return 0==e.length?null:function(t){return function F(...n){const e=(0,$i.jO)(n),{args:t,keys:r}=Bi(n),o=new Jr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,C=l;for(let A=0;A<l;A++){let N=!1;(0,Da.Xf)(t[A]).subscribe((0,Pn.x)(u,j=>{N||(N=!0,C--),m[A]=j},()=>w--,void 0,()=>{(!w||!N)&&(C||u.next(r?M(r,m):m),u.complete())}))}});return e?o.pipe(b(e)):o}(Ny(t,e).map(Ry)).pipe((0,wt.U)(hd))}}function pd(n){return null!=n?fd(Oy(n)):null}function gd(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gf(n){return n._rawValidators}function mf(n){return n._rawAsyncValidators}function md(n){return n?Array.isArray(n)?n:[n]:[]}function li(n,e){return Array.isArray(n)?n.includes(e):n===e}function lg(n,e){const t=md(e);return md(n).forEach(o=>{li(t,o)||t.push(o)}),t}function dg(n,e){return md(e).filter(t=>!li(n,t))}class hg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=cg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Fr extends hg{get formDirective(){return null}get path(){return null}}class ji extends hg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fg{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let yd=(()=>{class n extends fg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ji,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),gg=(()=>{class n extends fg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(Fr,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();const ba="VALID",wd="INVALID",Hi="PENDING",Kc="DISABLED";function _f(n){return(Js(n)?n.validators:n)||null}function Yc(n,e){return(Js(e)?e.asyncValidators:n)||null}function Js(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Ed(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,"");if(!r[t])throw new g.vHH(1001,"")}function wf(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,"")})}class Qc{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ba}get invalid(){return this.status===wd}get pending(){return this.status==Hi}get disabled(){return this.status===Kc}get enabled(){return this.status!==Kc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(lg(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(lg(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dg(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dg(e,this._rawAsyncValidators))}hasValidator(e){return li(this._rawValidators,e)}hasAsyncValidator(e){return li(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kc,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ba,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ba||this.status===Hi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kc:ba}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hi,this._hasOwnPendingAsyncValidator=!0;const t=Ry(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Kc:this.errors?wd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hi)?Hi:this._anyControlsHaveStatus(wd)?wd:ba}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Js(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Zc(n){return Array.isArray(n)?cg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function vg(n){return Array.isArray(n)?pd(n):n||null}(this._rawAsyncValidators)}}class eo extends Qc{constructor(e,t,r){super(_f(t),Yc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){wf(this,0,e),Object.keys(e).forEach(r=>{Ed(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Id extends eo{}const Ta=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Xc}),Xc="always";function Sa(n,e,t=Xc){Ef(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Eg(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ma(n,e)})}(n,e),function Ig(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Aa(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ma(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function wg(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Jc(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),el(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ru(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ef(n,e){const t=gf(n);null!==e.validator?n.setValidators(gd(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=mf(n);null!==e.asyncValidator?n.setAsyncValidators(gd(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();Ru(e._rawValidators,o),Ru(e._rawAsyncValidators,o)}function el(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=gf(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(l=>l!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=mf(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(l=>l!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Ru(e._rawValidators,r),Ru(e._rawAsyncValidators,r),t}function Ma(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Cd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function nl(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const rl=class extends Qc{constructor(e=null,t,r){super(_f(t),Yc(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Js(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=nl(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){nl(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),il=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const y=new g.OlP("NgModelWithFormControlWarning"),_={provide:Fr,useExisting:(0,g.Gpc)(()=>S)};let S=(()=>{class n extends Fr{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(el(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Sa(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Jc(t.control||null,t,!1),function Cg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function tl(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Jc(r||null,t),(n=>n instanceof rl)(o)&&(Sa(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function If(n,e){Ef(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function nw(n,e){return el(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ef(this.form,this),this._oldForm&&el(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(xn,10),g.Y36(Jn,10),g.Y36(Ta,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([_]),g.qOj,g.TTD]}),n})();const Ct={provide:ji,useExisting:(0,g.Gpc)(()=>ht)};let ht=(()=>{class n extends ji{set isDisabled(t){}constructor(t,r,o,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Uo(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===lr?t=u:function bf(n){return Object.getPrototypeOf(n.constructor)===Y}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function xa(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Vo(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(Fr,13),g.Y36(xn,10),g.Y36(Jn,10),g.Y36(_e,10),g.Y36(y,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Ct]),g.qOj,g.TTD]}),n})(),ow=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[il]}),n})();class aw extends Qc{constructor(e,t,r){super(_f(t),Yc(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){wf(this,0,e),e.forEach((r,o)=>{Ed(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function MC(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let $S=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let u={};return MC(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new eo(o,u)}record(t,r=null){const o=this._reduceControls(t);return new Id(o,r)}control(t,r,o){let u={};return this.useNonNullable?(MC(r)?u=r:(u.validators=r,u.asyncValidators=o),new rl(t,{...u,nonNullable:!0})):new rl(t,r,o)}array(t,r,o){const u=t.map(l=>this._createControl(l));return new aw(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof rl||t instanceof Qc?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ta,useValue:t.callSetDisabledState??Xc}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[ow]}),n})(),lw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:y,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Ta,useValue:t.callSetDisabledState??Xc}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[ow]}),n})();var $o=P(2011),RC=P(4986);function gt(...n){const e=(0,$i.yG)(n);return(0,qt.D)(n,e)}var Lr=P(2122),al=P(8189);function xf(...n){return function jS(){return(0,al.J)(1)}()((0,qt.D)(n,(0,$i.yG)(n)))}var Ti=P(4482);function Rd(...n){const e=(0,$i.yG)(n);return(0,Ti.e)((t,r)=>{(e?xf(n,t,e):xf(n,t)).subscribe(r)})}function Fg(){return(0,Ti.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function dw(n,e,t,r,o){return(u,l)=>{let m=t,w=e,C=0;u.subscribe((0,Pn.x)(l,A=>{const N=C++;w=m?n(w,A,N):(m=!0,A),r&&l.next(w)},o&&(()=>{m&&l.next(w),l.complete()})))}}function to(n,e){return(0,Ti.e)(dw(n,e,arguments.length>=2,!0))}var Rf=P(4671);function Lg(n,e){return n===e}function no(n,e){return(0,Ti.e)((t,r)=>{let o=0;t.subscribe((0,Pn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}P(8971);var ft,Vg=P(3942),de=P(5861),ku=P(9681),Nd=P(4859),Fu=P(1877),cn=P(2090),fw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zi={},Zy=Zy||{},Ut=fw||self;function Od(){}function Ug(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Pd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Bg="closure_uid_"+(1e9*Math.random()>>>0),HS=0;function OC(n,e,t){return n.call.apply(n.bind,arguments)}function Nf(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function hi(n,e,t){return(hi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?OC:Nf).apply(null,arguments)}function Pa(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function sr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function Lu(){this.s=this.s,this.o=this.o}Lu.prototype.s=!1,Lu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function NC(n){Object.prototype.hasOwnProperty.call(n,Bg)&&n[Bg]||(n[Bg]=++HS)}(this)},Lu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Yy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function mw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ug(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function ni(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ni.prototype.h=function(){this.defaultPrevented=!0};var yw=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",Od,e),Ut.removeEventListener("test",Od,e)}catch{}return n}();function kd(n){return/^[\s\xa0]*$/.test(n)}var $g=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qy(n,e){return n<e?-1:n>e?1:0}function Fd(){var n=Ut.navigator;return n&&(n=n.userAgent)?n:""}function qi(n){return-1!=Fd().indexOf(n)}function Xy(n){return Xy[" "](n),n}Xy[" "]=Od;var jg,n,kC=qi("Opera"),Ld=qi("Trident")||qi("MSIE"),vw=qi("Edge"),Jy=vw||Ld,_w=qi("Gecko")&&!(-1!=Fd().toLowerCase().indexOf("webkit")&&!qi("Edge"))&&!(qi("Trident")||qi("MSIE"))&&!qi("Edge"),Vd=-1!=Fd().toLowerCase().indexOf("webkit")&&!qi("Edge");function jo(){var n=Ut.document;return n?n.documentMode:void 0}e:{var ev="",ww=(n=Fd(),_w?/rv:([^\);]+)(\)|;)/.exec(n):vw?/Edge\/([\d\.]+)/.exec(n):Ld?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Vd?/WebKit\/(\S+)/.exec(n):kC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ww&&(ev=ww?ww[1]:""),Ld){var Ew=jo();if(null!=Ew&&Ew>parseFloat(ev)){jg=String(Ew);break e}}jg=ev}var Iw={};var FC=Ut.document&&Ld&&(jo()||parseInt(jg,10))||void 0;function Ud(n,e){if(ni.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(_w){e:{try{Xy(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:LC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ud.X.h.call(this)}}sr(Ud,ni);var LC={2:"touch",3:"pen",4:"mouse"};Ud.prototype.h=function(){Ud.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Of="closure_listenable_"+(1e6*Math.random()|0),ro=0;function VC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++ro,this.ba=this.ea=!1}function Pf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function nv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Dw(n){const e={};for(const t in n)e[t]=n[t];return e}const Cw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bw(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Cw.length;u++)t=Cw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function kf(n){this.src=n,this.g={},this.h=0}function rv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=gw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Pf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function iv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}kf.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=iv(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new VC(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var sv="closure_lm_"+(1e6*Math.random()|0),kt={};function ov(n,e,t,r,o){if(r&&r.once)return Sw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ov(n,e[u],t,r,o);return null}return t=Rw(t),n&&n[Of]?n.N(e,t,Pd(r)?!!r.capture:!!r,o):av(n,e,t,!1,r,o)}function av(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Pd(o)?!!o.capture:!!o,m=uv(n);if(m||(n[sv]=m=new kf(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function Tw(){const e=xw;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)yw||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Mw(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Sw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Sw(n,e[u],t,r,o);return null}return t=Rw(t),n&&n[Of]?n.O(e,t,Pd(r)?!!r.capture:!!r,o):av(n,e,t,!0,r,o)}function Aw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Aw(n,e[u],t,r,o);else r=Pd(r)?!!r.capture:!!r,t=Rw(t),n&&n[Of]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=iv(u=n.g[e],t,r,o))&&(Pf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=uv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=iv(e,t,r,o)),(t=-1<n?e[n]:null)&&Gg(t))}function Gg(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Of])rv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Mw(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=uv(e))?(rv(t,n),0==t.h&&(t.src=null,e[sv]=null)):Pf(n)}}}function Mw(n){return n in kt?kt[n]:kt[n]="on"+n}function xw(n,e){if(n.ba)n=!0;else{e=new Ud(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Gg(n),n=t.call(r,e)}return n}function uv(n){return(n=n[sv])instanceof kf?n:null}var cv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rw(n){return"function"==typeof n?n:(n[cv]||(n[cv]=function(e){return n.handleEvent(e)}),n[cv])}function Er(){Lu.call(this),this.i=new kf(this),this.P=this,this.I=null}function Vr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ni(e,n);else if(e instanceof ni)e.target=e.target||n;else{var o=e;bw(e=new ni(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Ho(l,r,!0,e)&&o}if(o=Ho(l=e.g=n,r,!0,e)&&o,o=Ho(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Ho(l=e.g=t[u],r,!1,e)&&o}function Ho(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&rv(n.i,l),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}sr(Er,Lu),Er.prototype[Of]=!0,Er.prototype.removeEventListener=function(n,e,t,r){Aw(this,n,e,t,r)},Er.prototype.M=function(){if(Er.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Pf(t[r]);delete n.g[e],n.h--}}this.I=null},Er.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Er.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var lv=Ut.JSON.stringify;function dv(){var n=kw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var fv,Nw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new zS,n=>n.reset());class zS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qS(n){Ut.setTimeout(()=>{throw n},0)}function UC(n,e){fv||function Ow(){var n=Ut.Promise.resolve(void 0);fv=function(){n.then(Bd)}}(),Pw||(fv(),Pw=!0),kw.add(n,e)}var Pw=!1,kw=new class hv{constructor(){this.h=this.g=null}add(e,t){const r=Nw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Bd(){for(var n;n=dv();){try{n.h.call(n.g)}catch(t){qS(t)}var e=Nw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Pw=!1}function zg(n,e){Er.call(this),this.h=n||1,this.g=e||Ut,this.j=hi(this.lb,this),this.l=Date.now()}function qg(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function $d(n,e,t){if("function"==typeof n)t&&(n=hi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=hi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function Fw(n){n.g=$d(()=>{n.g=null,n.i&&(n.i=!1,Fw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}sr(zg,Er),(ft=zg.prototype).ca=!1,ft.R=null,ft.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Vr(this,"tick"),this.ca&&(qg(this),this.start()))}},ft.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.M=function(){zg.X.M.call(this),qg(this),delete this.g};class Lw extends Lu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fw(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ff(n){Lu.call(this),this.h=n,this.g={}}sr(Ff,Lu);var Vw=[];function Uw(n,e,t,r){Array.isArray(t)||(t&&(Vw[0]=t.toString()),t=Vw);for(var o=0;o<t.length;o++){var u=ov(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Bw(n){nv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Gg(e)},n),n.g={}}function Wg(){this.g=!0}function ul(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function pv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return lv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ff.prototype.M=function(){Ff.X.M.call(this),Bw(this)},Ff.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wg.prototype.Aa=function(){this.g=!1},Wg.prototype.info=function(){};var jd={},Kg=null;function Zg(){return Kg=Kg||new Er}function $C(n){ni.call(this,jd.Pa,n)}function Go(n){const e=Zg();Vr(e,new $C(e))}function gv(n,e){ni.call(this,jd.STAT_EVENT,n),this.stat=e}function Si(n){const e=Zg();Vr(e,new gv(e,n))}function mv(n,e){ni.call(this,jd.Qa,n),this.size=e}function Lf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}jd.Pa="serverreachability",sr($C,ni),jd.STAT_EVENT="statevent",sr(gv,ni),jd.Qa="timingevent",sr(mv,ni);var Yg={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Vf={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Vu(){}function Hd(){}Vu.prototype.h=null;var Uf,cl={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Gd(){ni.call(this,"d")}function Xg(){ni.call(this,"c")}function zd(){}function ll(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Ff(this),this.O=vv,this.T=new zg(n=Jy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new yv}function yv(){this.i=null,this.g="",this.h=!1}sr(Gd,ni),sr(Xg,ni),sr(zd,Vu),zd.prototype.g=function(){return new XMLHttpRequest},zd.prototype.i=function(){return{}},Uf=new zd;var vv=45e3,_v={},Jg={};function em(n,e,t){n.K=1,n.v=nm(ka(e)),n.s=t,n.P=!0,Hw(n,null)}function Hw(n,e){n.F=Date.now(),Bf(n),n.A=ka(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),qf(t.i,"t",r),n.C=0,t=n.l.H,n.h=new yv,n.g=Xf(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Lw(hi(n.La,n,n.g),n.N)),Uw(n.S,n.g,"readystatechange",n.ib),e=n.H?Dw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Go(),function $w(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var A=C[0];C=C[1];var N=A.split("_");l=2<=N.length&&"type"==N[1]?l+(A+"=")+C+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function wv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ev(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=jC(n,t),o==Jg){4==e&&(n.o=4,Si(14),r=!1),ul(n.j,n.m,null,"[Incomplete Response]");break}if(o==_v){n.o=4,Si(15),ul(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ul(n.j,n.m,o,null),Hf(n,o)}wv(n)&&o!=Jg&&o!=_v&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Si(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Rv(e),e.K=!0,Si(11))):(ul(n.j,n.m,t,"[Invalid Chunked Response]"),qd(n),jf(n))}function jC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Jg:(t=Number(e.substring(t,r)),isNaN(t)?_v:(r+=1)+t>e.length?Jg:(e=e.substr(r,t),n.C=r+t,e))}function Bf(n){n.V=Date.now()+n.O,Wi(n,n.O)}function Wi(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Lf(hi(n.gb,n),e)}function $f(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function jf(n){0==n.l.G||n.I||sE(n.l,n)}function qd(n){$f(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qg(n.T),Bw(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Hf(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||sm(t.h,n)))if(!n.J&&sm(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Xd(t),Qf(t)}Qd(t),Si(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Lf(hi(t.cb,t),6e3));if(1>=Cv(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else so(t,11)}else if((n.J||t.g==n)&&Xd(t),!kd(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const j=C[5];null!=j&&"number"==typeof j&&0<j&&(t.J=r=1.5*j,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const oe=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oe){var u=r.h;u.g||-1==oe.indexOf("spdy")&&-1==oe.indexOf("quic")&&-1==oe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(om(u,u.h),u.h=null))}if(r.D){const xe=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;xe&&(r.za=xe,kn(r.F,r.D,xe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=ju(r,r.H?r.ka:null,r.V),l.J){am(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&($f(m),Bf(m)),r.g=l}else XC(r);0<t.i.length&&pm(t)}else"stop"!=C[0]&&"close"!=C[0]||so(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?so(t,7):Av(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}Go()}catch{}}function zw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ug(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function HC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ug(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Gw(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ug(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(ft=ll.prototype).setTimeout=function(n){this.O=n},ft.ib=function(n){n=n.target;const e=this.L;e&&3==Fa(n)?e.l():this.La(n)},ft.La=function(n){try{if(n==this.g)e:{const A=Fa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Jy||this.g&&(this.h.h||this.g.fa()||tE(this.g)))){this.I||4!=A||7==e||Go(),$f(this);var t=this.g.aa();this.Y=t;t:if(wv(this)){var r=tE(this.g);n="";var o=r.length,u=4==Fa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){qd(this),jf(this);var l="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function BC(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kd(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Si(12),qd(this),jf(this);break e}ul(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Hf(this,t)}this.P?(Ev(this,A,l),Jy&&this.i&&3==A&&(Uw(this.S,this.T,"tick",this.hb),this.T.start())):(ul(this.j,this.m,l,null),Hf(this,l)),4==A&&qd(this),this.i&&!this.I&&(4==A?sE(this.l,this):(this.i=!1,Bf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Si(12)):(this.o=0,Si(13)),qd(this),jf(this)}}}catch{}},ft.hb=function(){if(this.g){var n=Fa(this.g),e=this.g.fa();this.C<e.length&&($f(this),Ev(this,n,e),this.i&&4!=n&&Bf(this))}},ft.cancel=function(){this.I=!0,qd(this)},ft.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function jw(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Go(),Si(17)),qd(this),this.o=2,jf(this)):Wi(this,this.V-n)};var qw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dl(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof dl){this.h=void 0!==e?e:n.h,Wd(this,n.j),this.s=n.s,this.g=n.g,tm(this,n.m),this.l=n.l,e=n.i;var t=new zf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Kw(this,t),this.o=n.o}else n&&(t=String(n).match(qw))?(this.h=!!e,Wd(this,t[1]||"",!0),this.s=Gf(t[2]||""),this.g=Gf(t[3]||"",!0),tm(this,t[4]),this.l=Gf(t[5]||"",!0),Kw(this,t[6]||"",!0),this.o=Gf(t[7]||"")):(this.h=!!e,this.i=new zf(null,this.h))}function ka(n){return new dl(n)}function Wd(n,e,t){n.j=t?Gf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function tm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Kw(n,e,t){e instanceof zf?(n.i=e,function rm(n,e){e&&!n.j&&(zo(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Qw(this,r),qf(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ki(e,zC)),n.i=new zf(e,n.h))}function kn(n,e,t){n.i.set(e,t)}function nm(n){return kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Gf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ki(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Iv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Iv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}dl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ki(e,Zw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ki(e,Zw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ki(t,"/"==t.charAt(0)?Yw:GC,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ki(t,qC)),n.join("")};var Zw=/[#\/\?@]/g,GC=/[#\?:]/g,Yw=/[#\?]/g,zC=/[#\?@]/g,qC=/#/g;function zf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function zo(n){n.g||(n.g=new Map,n.h=0,n.i&&function Ww(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Qw(n,e){zo(n),e=Uu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Xw(n,e){return zo(n),e=Uu(n,e),n.g.has(e)}function qf(n,e,t){Qw(n,e),0<t.length&&(n.i=null,n.g.set(Uu(n,e),Yy(t)),n.h+=t.length)}function Uu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function im(n){this.l=n||KS,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ga&&Ut.g.Ga()&&Ut.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=zf.prototype).add=function(n,e){zo(this),this.i=null,n=Uu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){zo(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},ft.oa=function(){zo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},ft.W=function(n){zo(this);let e=[];if("string"==typeof n)Xw(this,n)&&(e=e.concat(this.g.get(Uu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return zo(this),this.i=null,Xw(this,n=Uu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var KS=10;function Dv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Cv(n){return n.h?1:n.g?n.g.size:0}function sm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function om(n,e){n.g?n.g.add(e):n.h=e}function am(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qo(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Yy(n.i)}function Kd(){}function um(){this.g=new Kd}function Wf(n,e,t){const r=t||"";try{zw(n,function(o,u){let l=o;Pd(o)&&(l=lv(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Kf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Zd(n){this.l=n.ac||null,this.j=n.jb||!1}function cm(n,e){Er.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=bv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}im.prototype.cancel=function(){if(this.i=qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Kd.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},Kd.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},sr(Zd,Vu),Zd.prototype.g=function(){return new cm(this.l,this.j)},Zd.prototype.i=function(n){return function(){return n}}({}),sr(cm,Er);var bv=0;function Yd(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Zf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,lm(n)}function lm(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=cm.prototype).open=function(n,e){if(this.readyState!=bv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,lm(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zf(this)),this.readyState=bv},ft.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,lm(this)),this.g&&(this.readyState=3,lm(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ut.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Yd(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ft.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zf(this):lm(this),3==this.readyState&&Yd(this)}},ft.Va=function(n){this.g&&(this.response=this.responseText=n,Zf(this))},ft.Ua=function(n){this.g&&(this.response=n,Zf(this))},ft.ga=function(){this.g&&Zf(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(cm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var KC=Ut.JSON.parse;function er(n){Er.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Jw,this.K=this.L=!1}sr(er,Er);var Jw="",ZC=/^https?$/i,YC=["POST","PUT"];function eE(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Tv(n),hm(n)}function Tv(n){n.D||(n.D=!0,Vr(n,"complete"),Vr(n,"error"))}function dm(n){if(n.h&&typeof Zy<"u"&&(!n.C[1]||4!=Fa(n)||2!=n.aa()))if(n.v&&4==Fa(n))$d(n.Ha,0,n);else if(Vr(n,"readystatechange"),4==Fa(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(qw)[1]||null;if(!o&&Ut.self&&Ut.self.location){var u=Ut.self.location.protocol;o=u.substr(0,u.length-1)}r=!ZC.test(o?o.toLowerCase():"")}t=r}if(t)Vr(n,"complete"),Vr(n,"success");else{n.m=6;try{var l=2<Fa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Tv(n)}}finally{hm(n)}}}function hm(n,e){if(n.g){fm(n);const t=n.g,r=n.C[0]?Od:null;n.g=null,n.C=null,e||Vr(n,"ready");try{t.onreadystatechange=r}catch{}}}function fm(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Fa(n){return n.g?n.g.readyState:0}function tE(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Jw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function nE(n){let e="";return nv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Sv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=nE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kn(n,e,t))}function Yf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function rE(n){this.Ca=0,this.i=[],this.j=new Wg,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Yf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Yf("baseRetryDelayMs",5e3,n),this.bb=Yf("retryDelaySeedMs",1e4,n),this.$a=Yf("forwardChannelMaxRetries",2,n),this.ta=Yf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new im(n&&n.concurrentRequestLimit),this.Fa=new um,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Av(n){if(Mv(n),3==n.G){var e=n.U++,t=ka(n.F);kn(t,"SID",n.I),kn(t,"RID",e),kn(t,"TYPE","terminate"),Bu(n,t),(e=new ll(n,n.j,e,void 0)).K=2,e.v=nm(ka(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=Xf(e.l,null),e.g.da(e.v)),e.F=Date.now(),Bf(e)}ri(n)}function Qf(n){n.g&&(Rv(n),n.g.cancel(),n.g=null)}function Mv(n){Qf(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),Xd(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function pm(n){Dv(n.h)||n.m||(n.m=!0,UC(n.Ja,n),n.C=0)}function xv(n,e){var t;t=e?e.m:n.U++;const r=ka(n.F);kn(r,"SID",n.I),kn(r,"RID",t),kn(r,"AID",n.T),Bu(n,r),n.o&&n.s&&Sv(r,n.o,n.s),t=new ll(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=$u(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),om(n.h,t),em(t,r,e)}function Bu(n,e){n.ia&&nv(n.ia,function(t,r){kn(e,r,t)}),n.l&&zw({},function(t,r){kn(e,r,t)})}function $u(n,e,t){t=Math.min(n.i.length,t);var r=n.l?hi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const A=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{Wf(A,l,"req"+C+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function XC(n){n.g||n.u||(n.Z=1,UC(n.Ia,n),n.A=0)}function Qd(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Lf(hi(n.Ia,n),io(n,n.A)),n.A++,0))}function Rv(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function iE(n){n.g=new ll(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ka(n.sa);kn(e,"RID","rpc"),kn(e,"SID",n.I),kn(e,"CI",n.L?"0":"1"),kn(e,"AID",n.T),kn(e,"TYPE","xmlhttp"),Bu(n,e),n.o&&n.s&&Sv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=nm(ka(e)),t.s=null,t.P=!0,Hw(t,n)}function Xd(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function sE(n,e){var t=null;if(n.g==e){Xd(n),Rv(n),n.g=null;var r=2}else{if(!sm(n.h,e))return;t=e.D,am(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Vr(r=Zg(),new mv(r,t)),pm(n)}else XC(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function ZS(n,e){return!(Cv(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Lf(hi(n.Ja,n,e),io(n,n.C)),n.C++,0)))}(n,e)||2==r&&Qd(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:so(n,5);break;case 4:so(n,10);break;case 3:so(n,6);break;default:so(n,2)}}function io(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function so(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=hi(n.kb,n);t||(t=new dl("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||Wd(t,"https"),nm(t)),function WC(n,e){const t=new Wg;if(Ut.Image){const r=new Image;r.onload=Pa(Kf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Pa(Kf,t,r,"TestLoadImage: error",!1,e),r.onabort=Pa(Kf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pa(Kf,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Si(2);n.G=0,n.l&&n.l.va(e),ri(n),Mv(n)}function ri(n){if(n.G=0,n.la=[],n.l){const e=qo(n.h);(0!=e.length||0!=n.i.length)&&(mw(n.la,e),mw(n.la,n.i),n.h.i.length=0,Yy(n.i),n.i.length=0),n.l.ua()}}function ju(n,e,t){var r=t instanceof dl?ka(t):new dl(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),tm(r,r.m);else{var o=Ut.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new dl(null,void 0);r&&Wd(u,r),e&&(u.g=e),o&&tm(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&kn(r,t,e),kn(r,"VER",n.ma),Bu(n,r),r}function Xf(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new er(t&&n.Da&&!n.ra?new Zd({jb:!0}):n.ra)).Ka(n.H),e}function ls(){}function Jd(){if(Ld&&!(10<=Number(FC)))throw Error("Environmental error: no available transport.")}function Ur(n,e){Er.call(this),this.g=new rE(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!kd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new oo(this)}function hl(n){Gd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function fl(){Xg.call(this),this.status=1}function oo(n){this.g=n}(ft=er.prototype).Ka=function(n){this.L=n},ft.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Uf.g(),this.C=function Qg(n){return n.h||(n.h=n.i())}(this.u?this.u:Uf),this.g.onreadystatechange=hi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void eE(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ut.FormData&&n instanceof Ut.FormData,!(0<=gw(YC,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{fm(this),0<this.B&&((this.K=function QC(n){return Ld&&function GS(){return function PC(n){var e=Iw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=$g(String(jg)).split("."),t=$g("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Qy(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Qy(0==o[2].length,0==u[2].length)||Qy(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hi(this.qa,this)):this.A=$d(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){eE(this,u)}},ft.qa=function(){typeof Zy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vr(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vr(this,"complete"),Vr(this,"abort"),hm(this))},ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hm(this,!0)),er.X.M.call(this)},ft.Ha=function(){this.s||(this.F||this.v||this.l?dm(this):this.fb())},ft.fb=function(){dm(this)},ft.aa=function(){try{return 2<Fa(this)?this.g.status:-1}catch{return-1}},ft.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),KC(e)}},ft.Ea=function(){return this.m},ft.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=rE.prototype).ma=8,ft.G=1,ft.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new ll(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Dw(u),bw(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=$u(this,o,e),kn(t=ka(this.F),"RID",n),kn(t,"CVER",22),this.D&&kn(t,"X-HTTP-Session-Id",this.D),Bu(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(nE(u)))+"&"+e:this.o&&Sv(t,this.o,u)),om(this.h,o),this.Ya&&kn(t,"TYPE","init"),this.O?(kn(t,"$req",e),kn(t,"SID","null"),o.Z=!0,em(o,t,null)):em(o,t,e),this.G=2}}else 3==this.G&&(n?xv(this,n):0==this.i.length||Dv(this.h)||xv(this))},ft.Ia=function(){if(this.u=null,iE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Lf(hi(this.eb,this),n)}},ft.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Si(10),Qf(this),iE(this))},ft.cb=function(){null!=this.v&&(this.v=null,Qf(this),Qd(this),Si(19))},ft.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Si(2)):(this.j.info("Failed to ping google.com"),Si(1))},(ft=ls.prototype).xa=function(){},ft.wa=function(){},ft.va=function(){},ft.ua=function(){},ft.Ra=function(){},Jd.prototype.g=function(n,e){return new Ur(n,e)},sr(Ur,Er),Ur.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Si(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=ju(n,null,n.V),pm(n)},Ur.prototype.close=function(){Av(this.g)},Ur.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=lv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&pm(e)},Ur.prototype.M=function(){this.g.l=null,delete this.j,Av(this.g),delete this.g,Ur.X.M.call(this)},sr(hl,Gd),sr(fl,Xg),sr(oo,ls),oo.prototype.xa=function(){Vr(this.g,"a")},oo.prototype.wa=function(n){Vr(this.g,new hl(n))},oo.prototype.va=function(n){Vr(this.g,new fl)},oo.prototype.ua=function(){Vr(this.g,"b")},Jd.prototype.createWebChannel=Jd.prototype.g,Ur.prototype.send=Ur.prototype.u,Ur.prototype.open=Ur.prototype.m,Ur.prototype.close=Ur.prototype.close,Yg.NO_ERROR=0,Yg.TIMEOUT=8,Yg.HTTP_ERROR=6,Vf.COMPLETE="complete",Hd.EventType=cl,cl.OPEN="a",cl.CLOSE="b",cl.ERROR="c",cl.MESSAGE="d",Er.prototype.listen=Er.prototype.N,er.prototype.listenOnce=er.prototype.O,er.prototype.getLastError=er.prototype.Oa,er.prototype.getLastErrorCode=er.prototype.Ea,er.prototype.getStatus=er.prototype.aa,er.prototype.getResponseJson=er.prototype.Sa,er.prototype.getResponseText=er.prototype.fa,er.prototype.send=er.prototype.da,er.prototype.setWithCredentials=er.prototype.Ka;var eh=zi.createWebChannelTransport=function(){return new Jd},th=zi.getStatEventTarget=function(){return Zg()},Hu=zi.ErrorCode=Yg,nh=zi.EventType=Vf,rh=zi.Event=jd,Nv=zi.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},oE=zi.FetchXmlHttpFactory=Zd,Jf=zi.WebChannel=Hd,aE=zi.XhrIo=er;const Ov="@firebase/firestore";class Ir{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ir.UNAUTHENTICATED=new Ir(null),Ir.GOOGLE_CREDENTIALS=new Ir("google-credentials-uid"),Ir.FIRST_PARTY=new Ir("first-party-uid"),Ir.MOCK_USER=new Ir("mock-user");let pl="9.18.0";const La=new Fu.Yd("@firebase/firestore");function gm(){return La.logLevel}function Ne(n,...e){if(La.logLevel<=Fu.in.DEBUG){const t=e.map(mm);La.debug(`Firestore (${pl}): ${n}`,...t)}}function tr(n,...e){if(La.logLevel<=Fu.in.ERROR){const t=e.map(mm);La.error(`Firestore (${pl}): ${n}`,...t)}}function gl(n,...e){if(La.logLevel<=Fu.in.WARN){const t=e.map(mm);La.warn(`Firestore (${pl}): ${n}`,...t)}}function mm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function ut(n,e){n||tt()}function Ge(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class ym{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Pv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ir.UNAUTHENTICATED))}shutdown(){}}class uE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class cE{constructor(e){this.t=e,this.currentUser=Ir.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let l=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Dr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=l;e.enqueueRetryable((0,de.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Dr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ut("string"==typeof r.accessToken),new ym(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ut(null===e||"string"==typeof e),new Ir(e)}}class kv{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Ir.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ut(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class lE{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new kv(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ir.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Lv{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Ne("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ut("string"==typeof t.token),this.A=t.token,new Fv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nb(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Vv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=nb(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function ml(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Uv(n){return n+"\0"}class Fn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new Fn(0,0))}static max(){return new mt(new Fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ep{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ep.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ep?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends ep{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const Bv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gn extends ep{construct(e,t,r){return new Gn(e,t,r)}static isValidIdentifier(e){return Bv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Se(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Se(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Se(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Se(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gn(t)}static emptyPath(){return new Gn([])}}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(nn.fromString(e))}static fromName(e){return new ze(nn.fromString(e).popFirst(5))}static empty(){return new ze(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new nn(e.slice()))}}class tp{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function vm(n){return n.fields.find(e=>2===e.kind)}function Gu(n){return n.fields.filter(e=>2!==e.kind)}tp.UNKNOWN_ID=-1;class np{constructor(e,t){this.fieldPath=e,this.kind=t}}class zu{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zu(0,ds.min())}}function Va(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=mt.fromTimestamp(1e9===r?new Fn(t+1,0):new Fn(t,r));return new ds(o,ze.empty(),e)}function fE(n){return new ds(n.readTime,n.key,-1)}class ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ds(mt.min(),ze.empty(),-1)}static max(){return new ds(mt.max(),ze.empty(),-1)}}function rp(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const qu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _m{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Wu(n){return ip.apply(this,arguments)}function ip(){return ip=(0,de.Z)(function*(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==qu)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),ip.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},w=>r(w))}),l=!0,u===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(A=>{l[C]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new ne((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class $v{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Dr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ih(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=jv(r.target.error);this.P.reject(new ih(e,o))}}static open(e,t,r,o){try{return new $v(t,e.transaction(o,r))}catch(u){throw new ih(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Cr(t)}}class ao{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===ao.D((0,cn.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Zu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,cn.hl)())return!1;if(ao.N())return!0;const e=(0,cn.z$)(),t=ao.D(e),r=0<t&&t<10,o=ao.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.$)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,de.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new ih(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Se(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Se(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new ih(e,m))},u.onupgradeneeded=l=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.F(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,de.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.O(e);const w=$v.open(u.db,e,l?"readonly":"readwrite",r),C=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),ne.reject(A))).toPromise();return C.catch(()=>{}),yield w.v,C}catch(w){const C=w,A="FirebaseError"!==C.name&&m<3;if(Ne("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class rb{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Zu(this.q.delete())}}class ih extends Se{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ku(n){return"IndexedDbTransactionError"===n.name}class Cr{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zu(r)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Zu(this.store.add(e))}get(e){return Zu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Zu(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Zu(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ne((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const o=this.cursor(r);return this.H(o,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ne((r,o)=>{t.onerror=u=>{const l=jv(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new ne((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const w=new rb(m),C=t(m.primaryKey,m.value,w);if(C instanceof ne){const A=C.catch(N=>(w.done(),ne.reject(N)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zu(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=jv(r.target.error);t(o)}})}let pE=!1;function jv(n){const e=ao.D((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pE||(pE=!0,setTimeout(()=>{throw r},0)),r}}return n}class gE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,de.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ku(r)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Wu(r)}yield t.nt(6e4)}))}}class ib{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,de.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ne.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ne("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(m=>(Ne("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=fE(u);rp(l,r)>0&&(r=l)}),new ds(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Zi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class ob{constructor(e,t,r,o,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Ua{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ua("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}function yE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Qu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ab(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sh(n){return null==n}function yl(n){return 0===n&&1/n==-1/0}function uo(n){return"number"==typeof n&&Number.isInteger(n)&&!yl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ub extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class _n{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(o){throw o instanceof DOMException?new ub("Invalid base64 string: "+o):o}}(e);return new _n(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new _n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_n.EMPTY_BYTE_STRING=new _n("");const co=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(n){if(ut(!!n),"string"==typeof n){let e=0;const t=co.exec(n);if(ut(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zn(n.seconds),nanos:zn(n.nanos)}}function zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xu(n){return"string"==typeof n?_n.fromBase64String(n):_n.fromUint8Array(n)}function Hv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function vE(n){const e=n.mapValue.fields.__previous_value__;return Hv(e)?vE(e):e}function sp(n){const e=Br(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}const Ju={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},oh={nullValue:"NULL_VALUE"};function lo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hv(n)?4:zv(n)?9007199254740991:10:tt()}function Wo(n,e){if(n===e)return!0;const t=lo(n);if(t!==lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sp(n).isEqual(sp(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Br(r.timestampValue),l=Br(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Xu(n.bytesValue).isEqual(Xu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return zn(r.geoPointValue.latitude)===zn(o.geoPointValue.latitude)&&zn(r.geoPointValue.longitude)===zn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return zn(r.integerValue)===zn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=zn(r.doubleValue),l=zn(o.doubleValue);return u===l?yl(u)===yl(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return ml(n.arrayValue.values||[],e.arrayValue.values||[],Wo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(yE(u)!==yE(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Wo(u[m],l[m])))return!1;return!0}(n,e);default:return tt()}var o}function ah(n,e){return void 0!==(n.values||[]).find(t=>Wo(t,e))}function ec(n,e){if(n===e)return 0;const t=lo(n),r=lo(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=zn(o.integerValue||o.doubleValue),m=zn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return Gv(n.timestampValue,e.timestampValue);case 4:return Gv(sp(n),sp(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Xu(o),m=Xu(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const C=Ft(l[w],m[w]);if(0!==C)return C}return Ft(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Ft(zn(o.latitude),zn(u.latitude));return 0!==l?l:Ft(zn(o.longitude),zn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const C=ec(l[w],m[w]);if(C)return C}return Ft(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Ju.mapValue&&u===Ju.mapValue)return 0;if(o===Ju.mapValue)return 1;if(u===Ju.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let A=0;A<m.length&&A<C.length;++A){const N=Ft(m[A],C[A]);if(0!==N)return N;const j=ec(l[m[A]],w[C[A]]);if(0!==j)return j}return Ft(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function Gv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=Br(n),r=Br(e),o=Ft(t.seconds,r.seconds);return 0!==o?o:Ft(t.nanos,r.nanos)}function vl(n){return uh(n)}function uh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Br(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xu(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=uh(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${uh(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function _l(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function wm(n){return!!n&&"integerValue"in n}function ch(n){return!!n&&"arrayValue"in n}function Em(n){return!!n&&"nullValue"in n}function Im(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function op(n){return!!n&&"mapValue"in n}function lh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Qu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=lh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function zv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function _E(n){return"nullValue"in n?oh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_l(Ua.empty(),ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function wE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_l(Ua.empty(),ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ju:tt()}function qv(n,e){const t=ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Wv(n,e){const t=ec(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ba{constructor(e,t){this.position=e,this.inclusive=t}}function EE(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?ze.comparator(ze.fromName(l.referenceValue),t.key):ec(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function IE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wo(n.position[t],e.position[t]))return!1;return!0}class DE{}class Jt extends DE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new lb(e,t,r):"array-contains"===t?new fb(e,r):"in"===t?new Qv(e,r):"not-in"===t?new ME(e,r):"array-contains-any"===t?new xE(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new db(e,r):new hb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ec(t,this.value)):null!==t&&lo(this.value)===lo(t)&&this.matchesComparison(ec(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class fn extends DE{constructor(e,t){super(),this.filters=e,this.op=t,this.ft=null}static create(e,t){return new fn(e,t)}matches(e){return dh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ft||(this.ft=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(t=>t.isInequality());return null!==e?e.field:null}dt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function dh(n){return"and"===n.op}function Kv(n){return"or"===n.op}function Zv(n){return CE(n)&&dh(n)}function CE(n){for(const e of n.filters)if(e instanceof fn)return!1;return!0}function Yv(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+vl(n.value);if(Zv(n))return n.filters.map(e=>Yv(e)).join(",");{const e=n.filters.map(t=>Yv(t)).join(",");return`${n.op}(${e})`}}function bE(n,e){return n instanceof Jt?(t=n,(r=e)instanceof Jt&&t.op===r.op&&t.field.isEqual(r.field)&&Wo(t.value,r.value)):n instanceof fn?function(t,r){return r instanceof fn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&bE(u,r.filters[l]),!0)}(n,e):void tt();var t,r}function TE(n,e){const t=n.filters.concat(e);return fn.create(t,n.op)}function SE(n){return n instanceof Jt?`${(e=n).field.canonicalString()} ${e.op} ${vl(e.value)}`:n instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(SE).join(" ,")+"}"}(n):"Filter";var e}class lb extends Jt{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.matchesComparison(t)}}class db extends Jt{constructor(e,t){super(e,"in",t),this.keys=AE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class hb extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=AE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function AE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class fb extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&ah(t.arrayValue,this.value)}}class Qv extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ah(this.value.arrayValue,t)}}class ME extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ah(this.value.arrayValue,t)}}class xE extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ah(this.value.arrayValue,r))}}class wl{constructor(e,t="asc"){this.field=e,this.dir=t}}function RE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class qn{constructor(e,t){this.comparator=e,this.root=t||$r.EMPTY}insert(e,t){return new qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ap(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ap(this.root,e,this.comparator,!1)}getReverseIterator(){return new ap(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ap(this.root,e,this.comparator,!0)}}class ap{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??$r.RED,this.left=o??$r.EMPTY,this.right=u??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new $r(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return $r.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new $r(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pn{constructor(e){this.comparator=e,this.data=new qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pn(this.comparator);return t.data=e,t}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function El(n){return n.hasNext()?n.getNext():void 0}class dr{constructor(e){this.fields=e,e.sort(Gn.comparator)}static empty(){return new dr([])}unionWith(e){let t=new pn(Gn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!op(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lh(t)}setAll(e){let t=Gn.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=lh(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());op(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];op(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Qu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new jr(lh(this.value))}}function NE(n){const e=[];return Qu(n.fields,(t,r)=>{const o=new Gn([t]);if(op(r)){const u=NE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new dr(e)}class hn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new hn(e,0,mt.min(),mt.min(),mt.min(),jr.empty(),0)}static newFoundDocument(e,t,r,o){return new hn(e,1,t,mt.min(),r,o,0)}static newNoDocument(e,t){return new hn(e,2,t,mt.min(),mt.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new hn(e,3,t,mt.min(),mt.min(),jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class YS{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this._t=null}}function up(n,e=null,t=[],r=[],o=null,u=null,l=null){return new YS(n,e,t,r,o,u,l)}function hh(n){const e=Ge(n);if(null===e._t){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vl(r)).join(",")),e._t=t}return e._t}function fh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IE(n.startAt,e.startAt)&&IE(n.endAt,e.endAt)}function cp(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Jv(n,e){return n.filters.filter(t=>t instanceof Jt&&t.field.isEqual(e))}function It(n,e,t){let r=oh,o=!0;for(const u of Jv(n,e)){let l=oh,m=!0;switch(u.op){case"<":case"<=":l=_E(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=oh}qv({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];qv({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function OE(n,e,t){let r=Ju,o=!0;for(const u of Jv(n,e)){let l=Ju,m=!0;switch(u.op){case">=":case">":l=wE(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=Ju}Wv({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];Wv({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class $a{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this.gt=null}}function PE(n,e,t,r,o,u,l,m){return new $a(n,e,t,r,o,u,l,m)}function ho(n){return new $a(n)}function kE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ph(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Il(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function Ln(n){return null!==n.collectionGroup}function gh(n){const e=Ge(n);if(null===e.wt){e.wt=[];const t=Il(e),r=ph(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new wl(t)),e.wt.push(new wl(Gn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new wl(Gn.keyField(),u))}}}return e.wt}function fi(n){const e=Ge(n);if(!e.gt)if("F"===e.limitType)e.gt=up(e.path,e.collectionGroup,gh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of gh(e))t.push(new wl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ba(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ba(e.startAt.position,e.startAt.inclusive):null;e.gt=up(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.gt}function Dm(n,e){e.getFirstInequalityField(),Il(n);const t=n.filters.concat([e]);return new $a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Cm(n,e,t){return new $a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mh(n,e){return fh(fi(n),fi(e))&&n.limitType===e.limitType}function e_(n){return`${hh(fi(n))}|lt:${n.limitType}`}function bm(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>SE(r)).join(", ")}]`),sh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vl(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vl(r)).join(",")),`Target(${t})`}(fi(n))}; limitType=${n.limitType})`}function yh(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of gh(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=EE(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,gh(t),r)||t.endAt&&!function(o,u,l){const m=EE(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,gh(t),r)));var t,r}function FE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LE(n){return(e,t)=>{let r=!1;for(const o of gh(n)){const u=pb(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function pb(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),w=l.data.field(o);return null!==m&&null!==w?ec(m,w):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function vh(n,e){if(n.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yl(e)?"-0":e}}function VE(n){return{integerValue:""+n}}function UE(n,e){return uo(e)?VE(e):vh(n,e)}class Tm{constructor(){this._=void 0}}function Sm(n,e,t){return n instanceof Dl?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Cl?_h(n,e):n instanceof fo?$E(n,e):function(r,o){const u=t_(r,o),l=jE(u)+jE(r.It);return wm(u)&&wm(r.It)?VE(l):vh(r.Tt,l)}(n,e)}function BE(n,e,t){return n instanceof Cl?_h(n,e):n instanceof fo?$E(n,e):t}function t_(n,e){return n instanceof wh?wm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Dl extends Tm{}class Cl extends Tm{constructor(e){super(),this.elements=e}}function _h(n,e){const t=n_(e);for(const r of n.elements)t.some(o=>Wo(o,r))||t.push(r);return{arrayValue:{values:t}}}class fo extends Tm{constructor(e){super(),this.elements=e}}function $E(n,e){let t=n_(e);for(const r of n.elements)t=t.filter(o=>!Wo(o,r));return{arrayValue:{values:t}}}class wh extends Tm{constructor(e,t){super(),this.Tt=e,this.It=t}}function jE(n){return zn(n.integerValue||n.doubleValue)}function n_(n){return ch(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Eh{constructor(e,t){this.field=e,this.transform=t}}class gb{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Am(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Mm{}function mb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Dh(n.key,Rn.none()):new ja(n.key,n.data,Rn.none());{const t=n.data,r=jr.empty();let o=new pn(Gn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Ha(n.key,r,new dr(o.toArray()),Rn.none())}}function QS(n,e,t){n instanceof ja?function(r,o,u){const l=r.value.clone(),m=i_(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ha?function(r,o,u){if(!Am(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=i_(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(GE(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xm(n,e,t,r){return n instanceof ja?function(o,u,l,m){if(!Am(o.precondition,u))return l;const w=o.value.clone(),C=Ih(o.fieldTransforms,m,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ha?function(o,u,l,m){if(!Am(o.precondition,u))return l;const w=Ih(o.fieldTransforms,m,u),C=u.data;return C.setAll(GE(o)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Am(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function XS(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=t_(r.transform,o||null);null!=u&&(null===t&&(t=jr.empty()),t.set(r.field,u))}return t||null}function r_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ml(t,r,(o,u)=>function HE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Cl&&r instanceof Cl||t instanceof fo&&r instanceof fo?ml(t.elements,r.elements,Wo):t instanceof wh&&r instanceof wh?Wo(t.It,r.It):t instanceof Dl&&r instanceof Dl);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class ja extends Mm{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ha extends Mm{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function GE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function i_(n,e,t){const r=new Map;ut(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,BE(l,m,t[o]))}return r}function Ih(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,Sm(u,l,e))}return r}class Dh extends Mm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class s_ extends Mm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yb{constructor(e){this.count=e}}var hr,on;function zE(n){switch(n){default:return tt();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function o_(n){if(void 0===n)return tr("GRPC error has no .code"),ie.UNKNOWN;switch(n){case hr.OK:return ie.OK;case hr.CANCELLED:return ie.CANCELLED;case hr.UNKNOWN:return ie.UNKNOWN;case hr.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case hr.INTERNAL:return ie.INTERNAL;case hr.UNAVAILABLE:return ie.UNAVAILABLE;case hr.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case hr.NOT_FOUND:return ie.NOT_FOUND;case hr.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case hr.ABORTED:return ie.ABORTED;case hr.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case hr.DATA_LOSS:return ie.DATA_LOSS;default:return tt()}}(on=hr||(hr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class tc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Qu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return ab(this.inner)}size(){return this.innerSize}}const vb=new qn(ze.comparator);function Hr(){return vb}const qE=new qn(ze.comparator);function Ch(...n){let e=qE;for(const t of n)e=e.insert(t.key,t);return e}function WE(n){let e=qE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function po(){return bh()}function KE(){return bh()}function bh(){return new tc(n=>n.toString(),(n,e)=>n.isEqual(e))}const _b=new qn(ze.comparator),a_=new pn(ze.comparator);function $t(...n){let e=a_;for(const t of n)e=e.add(t);return e}const ZE=new pn(Ft);function lp(){return ZE}class dp{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,hp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new dp(mt.min(),o,lp(),Hr(),$t())}}class hp{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new hp(r,t,$t(),$t(),$t())}}class Rm{constructor(e,t,r,o){this.Et=e,this.removedTargetIds=t,this.key=r,this.At=o}}class Nm{constructor(e,t){this.targetId=e,this.Rt=t}}class YE{constructor(e,t,r=_n.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class u_{constructor(){this.Pt=0,this.vt=XE(),this.bt=_n.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.bt}get Dt(){return 0!==this.Pt}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.bt=e)}Nt(){let e=$t(),t=$t(),r=$t();return this.vt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new hp(this.bt,this.Vt,e,t,r)}kt(){this.St=!1,this.vt=XE()}$t(e,t){this.St=!0,this.vt=this.vt.insert(e,t)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ot(){this.Pt+=1}Ft(){this.Pt-=1}Bt(){this.St=!0,this.Vt=!0}}class wb{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=Hr(),this.Kt=QE(),this.Gt=new pn(Ft)}Qt(e){for(const t of e.Et)e.At&&e.At.isFoundDocument()?this.jt(t,e.At):this.zt(t,e.key,e.At);for(const t of e.removedTargetIds)this.zt(t,e.key,e.At)}Wt(e){this.forEachTarget(e,t=>{const r=this.Ht(t);switch(e.state){case 0:this.Jt(t)&&r.xt(e.resumeToken);break;case 1:r.Ft(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.Ft(),r.Dt||this.removeTarget(t);break;case 3:this.Jt(t)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(t)&&(this.Yt(t),r.xt(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qt.forEach((r,o)=>{this.Jt(o)&&t(o)})}Zt(e){const t=e.targetId,r=e.Rt.count,o=this.Xt(t);if(o){const u=o.target;if(cp(u))if(0===r){const l=new ze(u.path);this.zt(t,l,hn.newNoDocument(l,mt.min()))}else ut(1===r);else this.te(t)!==r&&(this.Yt(t),this.Gt=this.Gt.add(t))}}ee(e){const t=new Map;this.qt.forEach((u,l)=>{const m=this.Xt(l);if(m){if(u.current&&cp(m.target)){const w=new ze(m.target.path);null!==this.Ut.get(w)||this.ne(l,w)||this.zt(l,w,hn.newNoDocument(w,e))}u.Ct&&(t.set(l,u.Nt()),u.kt())}});let r=$t();this.Kt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const C=this.Xt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const o=new dp(e,t,this.Gt,this.Ut,r);return this.Ut=Hr(),this.Kt=QE(),this.Gt=new pn(Ft),o}jt(e,t){if(!this.Jt(e))return;const r=this.ne(e,t.key)?2:0;this.Ht(e).$t(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.Kt=this.Kt.insert(t.key,this.se(t.key).add(e))}zt(e,t,r){if(!this.Jt(e))return;const o=this.Ht(e);this.ne(e,t)?o.$t(t,1):o.Mt(t),this.Kt=this.Kt.insert(t,this.se(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.qt.delete(e)}te(e){const t=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Ht(e).Ot()}Ht(e){let t=this.qt.get(e);return t||(t=new u_,this.qt.set(e,t)),t}se(e){let t=this.Kt.get(e);return t||(t=new pn(Ft),this.Kt=this.Kt.insert(e,t)),t}Jt(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.qt.get(e);return t&&t.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new u_),this.Lt.getRemoteKeysForTarget(e).forEach(t=>{this.zt(e,t,null)})}ne(e,t){return this.Lt.getRemoteKeysForTarget(e).has(t)}}function QE(){return new qn(ze.comparator)}function XE(){return new qn(ze.comparator)}const Eb={asc:"ASCENDING",desc:"DESCENDING"},Ib={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Db={and:"AND",or:"OR"};class Cb{constructor(e,t){this.databaseId=e,this.yt=t}}function Th(n,e){return n.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function c_(n,e){return n.yt?e.toBase64():e.toUint8Array()}function JE(n,e){return Th(n,e.toTimestamp())}function or(n){return ut(!!n),mt.fromTimestamp(function(e){const t=Br(e);return new Fn(t.seconds,t.nanos)}(n))}function l_(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function d_(n){const e=nn.fromString(n);return ut(__(e)),e}function fp(n,e){return l_(n.databaseId,e.path)}function Ko(n,e){const t=d_(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(f_(t))}function h_(n,e){return l_(n.databaseId,e)}function Om(n){const e=d_(n);return 4===e.length?nn.emptyPath():f_(e)}function bl(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function f_(n){return ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Pm(n,e,t){return{name:fp(n,e),fields:t.value.mapValue.fields}}function eI(n,e,t){const r=Ko(n,e.name),o=or(e.updateTime),u=e.createTime?or(e.createTime):mt.min(),l=new jr({mapValue:{fields:e.fields}}),m=hn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function pp(n,e){let t;if(e instanceof ja)t={update:Pm(n,e.key,e.value)};else if(e instanceof Dh)t={delete:fp(n,e.key)};else if(e instanceof Ha)t={update:Pm(n,e.key,e.data),updateMask:nI(e.fieldMask)};else{if(!(e instanceof s_))return tt();t={verify:fp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof Dl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Cl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof fo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wh)return{fieldPath:u.field.canonicalString(),increment:l.It};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:JE(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function km(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Rn.updateTime(or(o.updateTime)):void 0!==o.exists?Rn.exists(o.exists):Rn.none():Rn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(ut("REQUEST_TIME"===l.setToServerValue),m=new Dl):"appendMissingElements"in l?m=new Cl(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new fo(l.removeAllFromArray.values||[]):"increment"in l?m=new wh(u,l.increment):tt();const w=Gn.fromServerFormat(l.fieldPath);return new Eh(w,m)}(n,o)):[];var o;if(e.update){const o=Ko(n,e.update.name),u=new jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new dr((e.updateMask.fieldPaths||[]).map(C=>Gn.fromServerFormat(C)));return new Ha(o,u,l,t,r)}return new ja(o,u,t,r)}if(e.delete){const o=Ko(n,e.delete);return new Dh(o,t)}if(e.verify){const o=Ko(n,e.verify);return new s_(o,t)}return tt()}function g_(n,e){return{documents:[h_(n,e.path)]}}function m_(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=h_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=h_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return v_(fn.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Ga((A=C).field),direction:Sb(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(C=e.limit,n.yt||sh(C)?C:{value:C});var C,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function Tb(n){let e=Om(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){ut(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=Fm(A);return N instanceof fn&&Zv(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new wl(nc((N=A).field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,sh(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new Ba((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new Ba(A.values||[],!A.before)}(t.endAt)),PE(e,o,l,u,m,"F",w,C)}function Fm(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=nc(e.unaryFilter.field);return Jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=nc(e.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=nc(e.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=nc(e.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}(n):void 0!==n.fieldFilter?Jt.create(nc((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(t=>Fm(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return tt()}}(e.compositeFilter.op))}(n):tt();var e}function Sb(n){return Eb[n]}function y_(n){return Ib[n]}function Ab(n){return Db[n]}function Ga(n){return{fieldPath:n.canonicalString()}}function nc(n){return Gn.fromServerFormat(n.fieldPath)}function v_(n){return n instanceof Jt?function(e){if("=="===e.op){if(Im(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NAN"}};if(Em(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Im(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NOT_NAN"}};if(Em(e.value))return{unaryFilter:{field:Ga(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(e.field),op:y_(e.op),value:e.value}}}(n):n instanceof fn?function(e){const t=e.getFilters().map(r=>v_(r));return 1===t.length?t[0]:{compositeFilter:{op:Ab(e.op),filters:t}}}(n):tt()}function nI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function __(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rI(e)),e=Mb(n.get(t),e);return rI(e)}function Mb(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function rI(n){return n+"\x01\x01"}function Zo(n){const e=n.length;if(ut(e>=2),2===e)return ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&tt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:tt()}u=l+2}return new nn(r)}const iI=["userId","batchId"];function gp(n,e){return[n,pi(e)]}function xb(n,e,t){return[n,pi(e),t]}const sI={},Rb=["prefixPath","collectionGroup","readTime","documentId"],Nb=["prefixPath","collectionGroup","documentId"],JS=["collectionGroup","readTime","prefixPath","documentId"],Ob=["canonicalId","targetId"],Pb=["targetId","path"],kb=["path","targetId"],oI=["collectionId","parent"],Fb=["indexId","uid"],Lb=["uid","sequenceNumber"],Vb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ub=["indexId","uid","orderedDocumentKey"],Bb=["userId","collectionPath","documentId"],$b=["userId","collectionPath","largestBatchId"],jb=["userId","collectionGroup","largestBatchId"],aI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mp=[...aI,"documentOverlays"],w_=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],E_=w_,uI=[...E_,"indexConfiguration","indexState","indexEntries"];class Lm extends _m{constructor(e,t){super(),this.re=e,this.currentSequenceNumber=t}}function br(n,e){const t=Ge(n);return ao.M(t.re,e)}class I_{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&QS(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=KE();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const w=mb(l,m);null!==w&&r.set(o.key,w),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),$t())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,(t,r)=>r_(t,r))&&ml(this.baseMutations,e.baseMutations,(t,r)=>r_(t,r))}}class D_{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){ut(e.mutations.length===r.length);let o=_b;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new D_(e,t,r,o)}}class cI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rc{constructor(e,t,r,o,u=mt.min(),l=mt.min(),m=_n.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class lI{constructor(e){this.oe=e}}function dI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Vm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:fp(o=n.oe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Th(o,u.version.toTimestamp()),createTime:Th(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:go(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:go(e.version)}}var o,u;return r}function Vm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function go(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Tl(n){const e=new Fn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function za(n,e){const t=(e.baseMutations||[]).map(u=>km(n.oe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>km(n.oe,u)),o=Fn.fromMillis(e.localWriteTimeMs);return new I_(e.batchId,o,t,r)}function Yi(n){const e=Tl(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Tl(n.lastLimboFreeSnapshotVersion):mt.min();let r;var o;return void 0!==n.query.documents?(ut(1===(o=n.query).documents.length),r=fi(ho(Om(o.documents[0])))):r=fi(Tb(n.query)),new rc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,_n.fromBase64String(n.resumeToken))}function hI(n,e){const t=go(e.snapshotVersion),r=go(e.lastLimboFreeSnapshotVersion);let o;o=cp(e.target)?g_(n.oe,e.target):m_(n.oe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function yp(n){const e=Tb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Cm(e,e.limit,"L"):e}function Sl(n,e){return new cI(e.largestBatchId,km(n.oe,e.overlayMutation))}function fI(n,e){const t=e.path.lastSegment();return[n,pi(e.path.popLast()),t]}function pI(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:go(r.readTime),documentKey:pi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Gb{getBundleMetadata(e,t){return vp(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Tl(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return vp(e).put({bundleId:(r=t).id,createTime:go(or(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return _p(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:yp(o.bundledQuery),readTime:Tl(o.readTime)};var o})}saveNamedQuery(e,t){return _p(e).put({name:(r=t).name,readTime:go(or(r.readTime)),bundledQuery:r.bundledQuery});var r}}function vp(n){return br(n,"bundles")}function _p(n){return br(n,"namedQueries")}class Um{constructor(e,t){this.Tt=e,this.userId=t}static ue(e,t){return new Um(e,t.uid||"")}getOverlay(e,t){return wp(e).get(fI(this.userId,t)).next(r=>r?Sl(this.Tt,r):null)}getOverlays(e,t){const r=po();return ne.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new cI(t,l);o.push(this.ce(e,m))}),ne.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(pi(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(wp(e).Y("collectionPathOverlayIndex",m))}),ne.waitFor(u)}getOverlaysForCollection(e,t,r){const o=po(),u=pi(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return wp(e).W("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const C=Sl(this.Tt,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=po();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wp(e).X({index:"collectionGroupOverlayIndex",range:m},(w,C,A)=>{const N=Sl(this.Tt,C);u.size()<o||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):A.done()}).next(()=>u)}ce(e,t){return wp(e).put(function(r,o,u){const[l,m,w]=fI(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:pp(r.oe,u.mutation)}}(this.Tt,this.userId,t))}}function wp(n){return br(n,"documentOverlays")}class ic{constructor(){}ae(e,t){this.he(e,t),t.le()}he(e,t){if("nullValue"in e)this.fe(t,5);else if("booleanValue"in e)this.fe(t,10),t.de(e.booleanValue?1:0);else if("integerValue"in e)this.fe(t,15),t.de(zn(e.integerValue));else if("doubleValue"in e){const r=zn(e.doubleValue);isNaN(r)?this.fe(t,13):(this.fe(t,15),yl(r)?t.de(0):t.de(r))}else if("timestampValue"in e){const r=e.timestampValue;this.fe(t,20),"string"==typeof r?t._e(r):(t._e(`${r.seconds||""}`),t.de(r.nanos||0))}else if("stringValue"in e)this.we(e.stringValue,t),this.me(t);else if("bytesValue"in e)this.fe(t,30),t.ge(Xu(e.bytesValue)),this.me(t);else if("referenceValue"in e)this.ye(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.fe(t,45),t.de(r.latitude||0),t.de(r.longitude||0)}else"mapValue"in e?zv(e)?this.fe(t,Number.MAX_SAFE_INTEGER):(this.pe(e.mapValue,t),this.me(t)):"arrayValue"in e?(this.Ie(e.arrayValue,t),this.me(t)):tt()}we(e,t){this.fe(t,25),this.Te(e,t)}Te(e,t){t._e(e)}pe(e,t){const r=e.fields||{};this.fe(t,55);for(const o of Object.keys(r))this.we(o,t),this.he(r[o],t)}Ie(e,t){const r=e.values||[];this.fe(t,50);for(const o of r)this.he(o,t)}ye(e,t){this.fe(t,37),ze.fromName(e).path.forEach(r=>{this.fe(t,60),this.Te(r,t)})}fe(e,t){e.de(t)}me(e){e.de(2)}}function gI(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Bm(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=gI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}ic.Ee=new ic;class mI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ae(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Re(r.value),r=t.next();this.Pe()}ve(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Ve()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Re(r);else if(r<2048)this.Re(960|r>>>6),this.Re(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Re(480|r>>>12),this.Re(128|63&r>>>6),this.Re(128|63&r);else{const o=t.codePointAt(0);this.Re(240|o>>>18),this.Re(128|63&o>>>12),this.Re(128|63&o>>>6),this.Re(128|63&o)}}this.Pe()}De(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Ve()}Ce(e){const t=this.xe(e),r=Bm(t);this.Ne(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}ke(e){const t=this.xe(e),r=Bm(t);this.Ne(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}$e(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.Ne(e.length),this.buffer.set(e,this.position),this.position+=e.length}Be(){return this.buffer.slice(0,this.position)}xe(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Re(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}be(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Pe(){this.Me(0),this.Me(1)}Ve(){this.Fe(0),this.Fe(1)}Me(e){this.Ne(1),this.buffer[this.position++]=e}Fe(e){this.Ne(1),this.buffer[this.position++]=~e}Ne(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class C_{constructor(e){this.Le=e}ge(e){this.Le.Ae(e)}_e(e){this.Le.Se(e)}de(e){this.Le.Ce(e)}le(){this.Le.$e()}}class b_{constructor(e){this.Le=e}ge(e){this.Le.ve(e)}_e(e){this.Le.De(e)}de(e){this.Le.ke(e)}le(){this.Le.Oe()}}class Ah{constructor(){this.Le=new mI,this.qe=new C_(this.Le),this.Ue=new b_(this.Le)}seed(e){this.Le.seed(e)}Ke(e){return 0===e?this.qe:this.Ue}Be(){return this.Le.Be()}reset(){this.Le.reset()}}class qa{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ge(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new qa(this.indexId,this.documentKey,this.arrayValue,r)}}function Yo(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=yI(n.arrayValue,e.arrayValue),0!==t?t:(t=yI(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function yI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class zb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Qe=e.orderBy,this.je=[];for(const t of e.filters){const r=t;r.isInequality()?this.ze=r:this.je.push(r)}}We(e){ut(e.collectionGroup===this.collectionId);const t=vm(e);if(void 0!==t&&!this.He(t))return!1;const r=Gu(e);let o=0,u=0;for(;o<r.length&&this.He(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.ze){const l=r[o];if(!this.Je(this.ze,l)||!this.Ye(this.Qe[u++],l))return!1;++o}for(;o<r.length;++o)if(u>=this.Qe.length||!this.Ye(this.Qe[u++],r[o]))return!1;return!0}He(e){for(const t of this.je)if(this.Je(t,e))return!0;return!1}Je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ye(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function vI(n){var e,t;if(ut(n instanceof Jt||n instanceof fn),n instanceof Jt){if(n instanceof Qv){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Jt.create(n.field,"==",u)))||[];return fn.create(o,"or")}return n}const r=n.filters.map(o=>vI(o));return fn.create(r,n.op)}function qb(n){if(0===n.getFilters().length)return[];const e=S_(vI(n));return ut(T_(e)),$m(e)||Ep(e)?[e]:e.getFilters()}function $m(n){return n instanceof Jt}function Ep(n){return n instanceof fn&&Zv(n)}function T_(n){return $m(n)||Ep(n)||function(e){if(e instanceof fn&&Kv(e)){for(const t of e.getFilters())if(!$m(t)&&!Ep(t))return!1;return!0}return!1}(n)}function S_(n){if(ut(n instanceof Jt||n instanceof fn),n instanceof Jt)return n;if(1===n.filters.length)return S_(n.filters[0]);const e=n.filters.map(r=>S_(r));let t=fn.create(e,n.op);return t=Hm(t),T_(t)?t:(ut(t instanceof fn),ut(dh(t)),ut(t.filters.length>1),t.filters.reduce((r,o)=>jm(r,o)))}function jm(n,e){let t;return ut(n instanceof Jt||n instanceof fn),ut(e instanceof Jt||e instanceof fn),t=n instanceof Jt?e instanceof Jt?fn.create([n,e],"and"):A_(n,e):e instanceof Jt?A_(e,n):function(r,o){if(ut(r.filters.length>0&&o.filters.length>0),dh(r)&&dh(o))return TE(r,o.getFilters());const u=Kv(r)?r:o,l=Kv(r)?o:r,m=u.filters.map(w=>jm(w,l));return fn.create(m,"or")}(n,e),Hm(t)}function A_(n,e){if(dh(e))return TE(e,n.getFilters());{const t=e.filters.map(r=>jm(n,r));return fn.create(t,"or")}}function Hm(n){if(ut(n instanceof Jt||n instanceof fn),n instanceof Jt)return n;const e=n.getFilters();if(1===e.length)return Hm(e[0]);if(CE(n))return n;const t=e.map(o=>Hm(o)),r=[];return t.forEach(o=>{o instanceof Jt?r.push(o):o instanceof fn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:fn.create(r,n.op)}class _I{constructor(){this.Ze=new Gm}addToCollectionParentIndex(e,t){return this.Ze.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Ze.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ds.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class Gm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new pn(nn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new pn(nn.comparator)).toArray()}}const zm=new Uint8Array(0);class wI{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Gm,this.tn=new tc(r=>hh(r),(r,o)=>fh(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:pi(o)};return EI(e).put(u)}return ne.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Uv(t),""],!1,!0);return EI(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(Zo(l.parent))}return r})}addFieldIndex(e,t){const r=Wa(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=Ip(e);return u.next(m=>{l.put(pI(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Wa(e),o=Ip(e),u=Tr(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Tr(e);let o=!0;const u=new Map;return ne.forEach(this.en(t),l=>this.nn(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=$t();const m=[];return ne.forEach(u,(w,C)=>{var A;Ne("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Rt=>`${Rt.fieldPath}:${Rt.kind}`).join(",")}`} to execute ${hh(t)}`);const N=function(Rt,Ht){const Bt=vm(Ht);if(void 0===Bt)return null;for(const Wt of Jv(Rt,Bt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(C,w),j=function(Rt,Ht){const Bt=new Map;for(const Wt of Gu(Ht))for(const yi of Jv(Rt,Wt.fieldPath))switch(yi.op){case"==":case"in":Bt.set(Wt.fieldPath.canonicalString(),yi.value);break;case"not-in":case"!=":return Bt.set(Wt.fieldPath.canonicalString(),yi.value),Array.from(Bt.values())}return null}(C,w),Q=function(Rt,Ht){const Bt=[];let Wt=!0;for(const yi of Gu(Ht)){const Wh=0===yi.kind?It(Rt,yi.fieldPath,Rt.startAt):OE(Rt,yi.fieldPath,Rt.startAt);Bt.push(Wh.value),Wt&&(Wt=Wh.inclusive)}return new Ba(Bt,Wt)}(C,w),oe=function(Rt,Ht){const Bt=[];let Wt=!0;for(const yi of Gu(Ht)){const Wh=0===yi.kind?OE(Rt,yi.fieldPath,Rt.endAt):It(Rt,yi.fieldPath,Rt.endAt);Bt.push(Wh.value),Wt&&(Wt=Wh.inclusive)}return new Ba(Bt,Wt)}(C,w),xe=this.sn(w,C,Q),Ue=this.sn(w,C,oe),jt=this.rn(w,C,j),tn=this.on(w.indexId,N,xe,Q.inclusive,Ue,oe.inclusive,jt);return ne.forEach(tn,Rt=>r.J(Rt,t.limit).next(Ht=>{Ht.forEach(Bt=>{const Wt=ze.fromSegments(Bt.documentKey);l.has(Wt)||(l=l.add(Wt),m.push(Wt))})}))}).next(()=>m)}return ne.resolve(null)})}en(e){let t=this.tn.get(e);return t||(t=0===e.filters.length?[e]:qb(fn.create(e.filters,"and")).map(r=>up(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.tn.set(e,t),t)}on(e,t,r,o,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),C=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const j=t?this.un(t[N/C]):zm,Q=this.cn(e,j,r[N%C],o),oe=this.an(e,j,u[N%C],l),xe=m.map(Ue=>this.cn(e,j,Ue,!0));A.push(...this.createRange(Q,oe,xe))}return A}cn(e,t,r,o){const u=new qa(e,ze.empty(),t,r);return o?u:u.Ge()}an(e,t,r,o){const u=new qa(e,ze.empty(),t,r);return o?u.Ge():u}nn(e,t){const r=new zb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.We(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.en(t);return ne.forEach(o,u=>this.nn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new pn(Gn.comparator),C=!1;for(const A of m.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?C=!0:w=w.add(N.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}hn(e,t){const r=new Ah;for(const o of Gu(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.Ke(o.kind);ic.Ee.ae(u,l)}return r.Be()}un(e){const t=new Ah;return ic.Ee.ae(e,t.Ke(0)),t.Be()}ln(e,t){const r=new Ah;return ic.Ee.ae(_l(this.databaseId,t),r.Ke(function(o){const u=Gu(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Be()}rn(e,t,r){if(null===r)return[];let o=[];o.push(new Ah);let u=0;for(const l of Gu(e)){const m=r[u++];for(const w of o)if(this.fn(t,l.fieldPath)&&ch(m))o=this.dn(o,l,m);else{const C=w.Ke(l.kind);ic.Ee.ae(m,C)}}return this._n(o)}sn(e,t,r){return this.rn(e,t,r.position)}_n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Be();return t}dn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const w=new Ah;w.seed(m.Be()),ic.Ee.ae(l,w.Ke(t.kind)),u.push(w)}return u}fn(e,t){return!!e.filters.find(r=>r instanceof Jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Wa(e),o=Ip(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return ne.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{l.push(function(C,A){const N=A?new zu(A.sequenceNumber,new ds(Tl(A.readTime),new ze(Zo(A.documentKey)),A.largestBatchId)):zu.empty(),j=C.fields.map(([Q,oe])=>new np(Gn.fromServerFormat(Q),oe));return new tp(C.indexId,C.collectionGroup,j,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Ft(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=Wa(e),u=Ip(e);return this.wn(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ne.forEach(m,w=>u.put(pI(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?ne.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ne.forEach(m,w=>this.mn(e,o,w).next(C=>{const A=this.gn(u,w);return C.isEqual(A)?ne.resolve():this.yn(e,u,w,C,A)}))))})}pn(e,t,r,o){return Tr(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.ln(r,t.key),documentKey:t.key.path.toArray()})}In(e,t,r,o){return Tr(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.ln(r,t.key),t.key.path.toArray()])}mn(e,t,r){const o=Tr(e);let u=new pn(Yo);return o.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.ln(r,t)])},(l,m)=>{u=u.add(new qa(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}gn(e,t){let r=new pn(Yo);const o=this.hn(t,e);if(null==o)return r;const u=vm(t);if(null!=u){const l=e.data.field(u.fieldPath);if(ch(l))for(const m of l.arrayValue.values||[])r=r.add(new qa(t.indexId,e.key,this.un(m),o))}else r=r.add(new qa(t.indexId,e.key,zm,o));return r}yn(e,t,r,o,u){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,C,A,N){const j=m.getIterator(),Q=w.getIterator();let oe=El(j),xe=El(Q);for(;oe||xe;){let Ue=!1,jt=!1;if(oe&&xe){const tn=C(oe,xe);tn<0?jt=!0:tn>0&&(Ue=!0)}else null!=oe?jt=!0:Ue=!0;Ue?(A(xe),xe=El(Q)):jt?(N(oe),oe=El(j)):(oe=El(j),xe=El(Q))}}(o,u,Yo,m=>{l.push(this.pn(e,t,r,m))},m=>{l.push(this.In(e,t,r,m))}),ne.waitFor(l)}wn(e){let t=1;return Ip(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Yo(l,m)).filter((l,m,w)=>!m||0!==Yo(l,w[m-1]));const o=[];o.push(e);for(const l of r){const m=Yo(l,e),w=Yo(l,t);if(0===m)o[0]=e.Ge();else if(m>0&&w<0)o.push(l),o.push(l.Ge());else if(w>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.Tn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,zm,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,zm,[]]))}return u}Tn(e,t){return Yo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(II)}getMinOffset(e,t){return ne.mapArray(this.en(t),r=>this.nn(e,r).next(o=>o||tt())).next(II)}}function EI(n){return br(n,"collectionParents")}function Tr(n){return br(n,"indexEntries")}function Wa(n){return br(n,"indexConfiguration")}function Ip(n){return br(n,"indexState")}function II(n){ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;rp(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new ds(e.readTime,e.documentKey,t)}const Wb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class hs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new hs(e,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function M_(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(A,N,j)=>(m++,j.delete()));u.push(w.next(()=>{ut(1===m)}));const C=[];for(const A of t.mutations){const N=xb(e,A.key.path,t.batchId);u.push(o.delete(N)),C.push(A.key)}return ne.waitFor(u).next(()=>C)}function Dp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}hs.DEFAULT_COLLECTION_PERCENTILE=10,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hs.DEFAULT=new hs(41943040,hs.DEFAULT_COLLECTION_PERCENTILE,hs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hs.DISABLED=new hs(-1,0,0);class sc{constructor(e,t,r,o){this.userId=e,this.Tt=t,this.indexManager=r,this.referenceDelegate=o,this.En={}}static ue(e,t,r,o){ut(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new sc(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Qo(e).X({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Mh(e),l=Qo(e);return l.add({}).next(m=>{ut("number"==typeof m);const w=new I_(m,t,r,o),C=function(j,Q,oe){const xe=oe.baseMutations.map(jt=>pp(j.oe,jt)),Ue=oe.mutations.map(jt=>pp(j.oe,jt));return{userId:Q,batchId:oe.batchId,localWriteTimeMs:oe.localWriteTime.toMillis(),baseMutations:xe,mutations:Ue}}(this.Tt,this.userId,w),A=[];let N=new pn((j,Q)=>Ft(j.canonicalString(),Q.canonicalString()));for(const j of o){const Q=xb(this.userId,j.key.path,m);N=N.add(j.key.path.popLast()),A.push(l.put(C)),A.push(u.put(Q,sI))}return N.forEach(j=>{A.push(this.indexManager.addToCollectionParentIndex(e,j))}),e.addOnCommittedListener(()=>{this.En[m]=w.keys()}),ne.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return Qo(e).get(t).next(r=>r?(ut(r.userId===this.userId),za(this.Tt,r)):null)}An(e,t){return this.En[t]?ne.resolve(this.En[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.En[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Qo(e).X({index:"userMutationsIndex",range:o},(l,m,w)=>{m.userId===this.userId&&(ut(m.batchId>=r),u=za(this.Tt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Qo(e).X({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Qo(e).W("userMutationsIndex",t).next(r=>r.map(o=>za(this.Tt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=gp(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Mh(e).X({range:o},(l,m,w)=>{const[C,A,N]=l,j=Zo(A);if(C===this.userId&&t.path.isEqual(j))return Qo(e).get(N).next(Q=>{if(!Q)throw tt();ut(Q.userId===this.userId),u.push(za(this.Tt,Q))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ft);const o=[];return t.forEach(u=>{const l=gp(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=Mh(e).X({range:m},(C,A,N)=>{const[j,Q,oe]=C,xe=Zo(Q);j===this.userId&&u.path.isEqual(xe)?r=r.add(oe):N.done()});o.push(w)}),ne.waitFor(o).next(()=>this.Rn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=gp(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new pn(Ft);return Mh(e).X({range:l},(w,C,A)=>{const[N,j,Q]=w,oe=Zo(j);N===this.userId&&r.isPrefixOf(oe)?oe.length===o&&(m=m.add(Q)):A.done()}).next(()=>this.Rn(e,m))}Rn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Qo(e).get(u).next(l=>{if(null===l)throw tt();ut(l.userId===this.userId),r.push(za(this.Tt,l))}))}),ne.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return M_(e.re,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Pn(t.batchId)}),ne.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}Pn(e){delete this.En[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Mh(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=Zo(u[1]);o.push(w)}else m.done()}).next(()=>{ut(0===o.length)})})}containsKey(e,t){return DI(e,this.userId,t)}vn(e){return x_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function DI(n,e,t){const r=gp(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return Mh(n).X({range:u,Z:!0},(m,w,C)=>{const[A,N,j]=m;A===e&&N===o&&(l=!0),C.done()}).next(()=>l)}function Qo(n){return br(n,"mutations")}function Mh(n){return br(n,"documentMutations")}function x_(n){return br(n,"mutationQueues")}class Al{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Vn(){return new Al(0)}static Sn(){return new Al(-1)}}class Kb{constructor(e,t){this.referenceDelegate=e,this.Tt=t}allocateTargetId(e){return this.Dn(e).next(t=>{const r=new Al(t.highestTargetId);return t.highestTargetId=r.next(),this.Cn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Dn(e).next(t=>mt.fromTimestamp(new Fn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Dn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Dn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Cn(e,o)))}addTargetData(e,t){return this.xn(e,t).next(()=>this.Dn(e).next(r=>(r.targetCount+=1,this.Nn(t,r),this.Cn(e,r))))}updateTargetData(e,t){return this.xn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>xh(e).delete(t.targetId)).next(()=>this.Dn(e)).next(r=>(ut(r.targetCount>0),r.targetCount-=1,this.Cn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return xh(e).X((l,m)=>{const w=Yi(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>ne.waitFor(u)).next(()=>o)}forEachTarget(e,t){return xh(e).X((r,o)=>{const u=Yi(o);t(u)})}Dn(e){return qm(e).get("targetGlobalKey").next(t=>(ut(null!==t),t))}Cn(e,t){return qm(e).put("targetGlobalKey",t)}xn(e,t){return xh(e).put(hI(this.Tt,t))}Nn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Dn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hh(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return xh(e).X({range:o,index:"queryTargetsIndex"},(l,m,w)=>{const C=Yi(m);fh(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Ka(e);return t.forEach(l=>{const m=pi(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),ne.waitFor(o)}removeMatchingKeys(e,t,r){const o=Ka(e);return ne.forEach(t,u=>{const l=pi(u.path);return ne.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ka(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Ka(e);let u=$t();return o.X({range:r,Z:!0},(l,m,w)=>{const C=Zo(l[1]),A=new ze(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=pi(t.path),o=IDBKeyRange.bound([r],[Uv(r)],!1,!0);let u=0;return Ka(e).X({index:"documentTargetsIndex",Z:!0,range:o},([l,m],w,C)=>{0!==l&&(u++,C.done())}).next(()=>u>0)}ie(e,t){return xh(e).get(t).next(r=>r?Yi(r):null)}}function xh(n){return br(n,"targets")}function qm(n){return br(n,"targetGlobal")}function Ka(n){return br(n,"targetDocuments")}function R_([n,e],[t,r]){const o=Ft(n,t);return 0===o?Ft(e,r):o}class Wm{constructor(e){this.kn=e,this.buffer=new pn(R_),this.$n=0}Mn(){return++this.$n}On(e){const t=[e,this.Mn()];if(this.buffer.size<this.kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();R_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class N_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Fn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Bn(6e4)}stop(){this.Fn&&(this.Fn.cancel(),this.Fn=null)}get started(){return null!==this.Fn}Bn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Fn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,de.Z)(function*(){t.Fn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ku(r)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Wu(r)}yield t.Bn(3e5)}))}}class eA{constructor(e,t){this.Ln=e,this.params=t}calculateTargetCount(e,t){return this.Ln.qn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(Zi.at);const r=new Wm(t);return this.Ln.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.Ln.Un(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Ln.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Ln.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(Wb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wb):this.Kn(e,t))}getCacheSize(e){return this.Ln.getCacheSize(e)}Kn(e,t){let r,o,u,l,m,w,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,l=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),gm()<=Fu.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(C-w)+`ms\nTotal Duration: ${C-A}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class CI{constructor(e,t){this.db=e,this.garbageCollector=new eA(this,t)}qn(e){const t=this.Gn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Gn(e){let t=0;return this.Un(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Un(e,t){return this.Qn(e,(r,o)=>t(o))}addReference(e,t,r){return Km(e,r)}removeReference(e,t,r){return Km(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Km(e,t)}jn(e,t){return function(r,o){let u=!1;return x_(r).tt(l=>DI(r,l,o).next(m=>(m&&(u=!0),ne.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Qn(e,(l,m)=>{if(m<=t){const w=this.jn(e,l).next(C=>{if(!C)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),Ka(e).delete([0,pi(l.path)])))});o.push(w)}}).next(()=>ne.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Km(e,t)}Qn(e,t){const r=Ka(e);let o,u=Zi.at;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:C})=>{0===l?(u!==Zi.at&&t(new ze(Zo(o)),u),u=C,o=w):u=Zi.at}).next(()=>{u!==Zi.at&&t(new ze(Zo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Km(n,e){return Ka(n).put((r=n.currentSequenceNumber,{targetId:0,path:pi(e.path),sequenceNumber:r}));var r}class O_{constructor(){this.changes=new tc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rh{constructor(e){this.Tt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nh(e).put(r)}removeEntry(e,t,r){return Nh(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Vm(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.zn(e,r)))}getEntry(e,t){let r=hn.newInvalidDocument(t);return Nh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Cp(t))},(o,u)=>{r=this.Wn(t,u)}).next(()=>r)}Hn(e,t){let r={size:0,document:hn.newInvalidDocument(t)};return Nh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Cp(t))},(o,u)=>{r={document:this.Wn(t,u),size:Dp(u)}}).next(()=>r)}getEntries(e,t){let r=Hr();return this.Jn(e,t,(o,u)=>{const l=this.Wn(o,u);r=r.insert(o,l)}).next(()=>r)}Yn(e,t){let r=Hr(),o=new qn(ze.comparator);return this.Jn(e,t,(u,l)=>{const m=this.Wn(u,l);r=r.insert(u,m),o=o.insert(u,Dp(l))}).next(()=>({documents:r,Zn:o}))}Jn(e,t,r){if(t.isEmpty())return ne.resolve();let o=new pn(SI);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Cp(o.first()),Cp(o.last())),l=o.getIterator();let m=l.getNext();return Nh(e).X({index:"documentKeyIndex",range:u},(w,C,A)=>{const N=ze.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&SI(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,C),m=l.hasNext()?l.getNext():null),m?A.j(Cp(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),Vm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nh(e).W(IDBKeyRange.bound(l,m,!0)).next(w=>{let C=Hr();for(const A of w){const N=this.Wn(ze.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);N.isFoundDocument()&&(yh(t,N)||o.has(N.key))&&(C=C.insert(N.key,N))}return C})}getAllFromCollectionGroup(e,t,r,o){let u=Hr();const l=Zb(t,r),m=Zb(t,ds.max());return Nh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,C,A)=>{const N=this.Wn(ze.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new TI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Zm(e).get("remoteDocumentGlobalKey").next(t=>(ut(!!t),t))}zn(e,t){return Zm(e).put("remoteDocumentGlobalKey",t)}Wn(e,t){if(t){const r=function Hb(n,e){let t;if(e.document)t=eI(n.oe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),o=Tl(e.noDocument.readTime);t=hn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=ze.fromSegments(e.unknownDocument.path),o=Tl(e.unknownDocument.version);t=hn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Fn(r[0],r[1]);return mt.fromTimestamp(o)}(e.readTime)),t}(this.Tt,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return hn.newInvalidDocument(e)}}function bI(n){return new Rh(n)}class TI extends O_{constructor(e,t){super(),this.Xn=e,this.trackRemovals=t,this.ts=new tc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new pn((u,l)=>Ft(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.ts.get(u);if(t.push(this.Xn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=dI(this.Xn.Tt,l);o=o.add(u.path.popLast());const C=Dp(w);r+=C-m.size,t.push(this.Xn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=dI(this.Xn.Tt,l.convertToNoDocument(mt.min()));t.push(this.Xn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Xn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Xn.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.Xn.Hn(e,t).next(r=>(this.ts.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Xn.Yn(e,t).next(({documents:r,Zn:o})=>(o.forEach((u,l)=>{this.ts.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function Zm(n){return br(n,"remoteDocumentGlobal")}function Nh(n){return br(n,"remoteDocumentsV14")}function Cp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Zb(n,e){const t=e.documentKey.path.toArray();return[n,Vm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function SI(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Ft(t[u],r[u]),o)return o;return o=Ft(t.length,r.length),o||(o=Ft(t[t.length-2],r[r.length-2]),o||Ft(t[t.length-1],r[r.length-1]))}class Yb{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class AI{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&xm(r.mutation,o,dr.empty(),Fn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,$t()).next(()=>r))}getLocalViewOfDocuments(e,t,r=$t()){const o=po();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Ch();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=po();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,$t()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=Hr();const l=bh(),m=bh();return t.forEach((w,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof Ha)?u=u.insert(C.key,C):void 0!==A?(l.set(C.key,A.mutation.getFieldMask()),xm(A.mutation,C,A.mutation.getFieldMask(),Fn.now())):l.set(C.key,dr.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,A)=>l.set(C,A)),t.forEach((C,A)=>{var N;return m.set(C,new Yb(A,null!==(N=l.get(C))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=bh();let o=new qn((l,m)=>l-m),u=$t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let A=r.get(w)||dr.empty();A=m.applyToLocalView(C,A),r.set(w,A);const N=(o.get(m.batchId)||$t()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),C=w.key,A=w.value,N=KE();A.forEach(j=>{if(!u.has(j)){const Q=mb(t.get(j),r.get(j));null!==Q&&N.set(j,Q),u=u.add(j)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,N))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ln(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ne.resolve(po());let m=-1,w=u;return l.next(C=>ne.forEach(C,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?ne.resolve():this.remoteDocumentCache.getEntry(e,A).next(j=>{w=w.insert(A,j)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,$t())).next(A=>({batchId:m,changes:WE(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ze(t)).next(r=>{let o=Ch();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Ch();return this.indexManager.getCollectionParents(e,o).next(l=>ne.forEach(l,m=>{const w=(C=t,A=m.child(o),new $a(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,w)=>{const C=w.getKey();null===u.get(C)&&(u=u.insert(C,hn.newInvalidDocument(C)))});let l=Ch();return u.forEach((m,w)=>{const C=o.get(m);void 0!==C&&xm(C.mutation,w,dr.empty(),Fn.now()),yh(t,w)&&(l=l.insert(m,w))}),l})}}class MI{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,t){return ne.resolve(this.es.get(t))}saveBundleMetadata(e,t){var r;return this.es.set(t.id,{id:(r=t).id,version:r.version,createTime:or(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.ns.get(t))}saveNamedQuery(e,t){return this.ns.set(t.name,{name:(r=t).name,query:yp(r.bundledQuery),readTime:or(r.readTime)}),ne.resolve();var r}}class xI{constructor(){this.overlays=new qn(ze.comparator),this.ss=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=po();return ne.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ce(e,t,u)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.ss.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.ss.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=po(),u=t.length+1,l=new ze(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new qn((C,A)=>C-A);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=po(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const m=po(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,A)=>m.set(C,A)),!(m.size()>=o)););return ne.resolve(m)}ce(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.ss.get(o.largestBatchId).delete(r.key);this.ss.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new cI(t,r));let u=this.ss.get(t);void 0===u&&(u=$t(),this.ss.set(t,u)),this.ss.set(t,u.add(r.key))}}class P_{constructor(){this.rs=new pn(Sr.os),this.us=new pn(Sr.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,t){const r=new Sr(e,t);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ls(new Sr(e,t))}fs(e,t){e.forEach(r=>this.removeReference(r,t))}ds(e){const t=new ze(new nn([])),r=new Sr(t,e),o=new Sr(t,e+1),u=[];return this.us.forEachInRange([r,o],l=>{this.ls(l),u.push(l.key)}),u}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const t=new ze(new nn([])),r=new Sr(t,e),o=new Sr(t,e+1);let u=$t();return this.us.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Sr(e,0),r=this.rs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Sr{constructor(e,t){this.key=e,this.gs=t}static os(e,t){return ze.comparator(e.key,t.key)||Ft(e.gs,t.gs)}static cs(e,t){return Ft(e.gs,t.gs)||ze.comparator(e.key,t.key)}}class RI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ys=1,this.ps=new pn(Sr.os)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ys;this.ys++;const l=new I_(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.ps=this.ps.add(new Sr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.Is(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.Ts(t+1),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.ys-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Sr(t,0),o=new Sr(t,Number.POSITIVE_INFINITY),u=[];return this.ps.forEachInRange([r,o],l=>{const m=this.Is(l.gs);u.push(m)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new pn(Ft);return t.forEach(o=>{const u=new Sr(o,0),l=new Sr(o,Number.POSITIVE_INFINITY);this.ps.forEachInRange([u,l],m=>{r=r.add(m.gs)})}),ne.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;ze.isDocumentKey(u)||(u=u.child(""));const l=new Sr(new ze(u),0);let m=new pn(Ft);return this.ps.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.gs)),!0)},l),ne.resolve(this.Es(m))}Es(e){const t=[];return e.forEach(r=>{const o=this.Is(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){ut(0===this.As(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ps;return ne.forEach(t.mutations,o=>{const u=new Sr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ps=r})}Pn(e){}containsKey(e,t){const r=new Sr(t,0),o=this.ps.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ne.resolve()}As(e,t){return this.Ts(e)}Ts(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Is(e){const t=this.Ts(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qb{constructor(e){this.Rs=e,this.docs=new qn(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Rs(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let r=Hr();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():hn.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Hr();const l=t.path,m=new ze(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:C,value:{document:A}}=w.getNext();if(!l.isPrefixOf(C.path))break;C.path.length>l.length+1||rp(fE(A),r)<=0||(o.has(A.key)||yh(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,r,o){tt()}Ps(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Xb(this)}getSize(e){return ne.resolve(this.size)}}class Xb extends O_{constructor(e){super(),this.Xn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Xn.addEntry(e,o)):this.Xn.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Xn.getEntry(e,t)}getAllFromCache(e,t){return this.Xn.getEntries(e,t)}}class NI{constructor(e){this.persistence=e,this.vs=new tc(t=>hh(t),fh),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Vs=new P_,this.targetCount=0,this.Ss=Al.Vn()}forEachTarget(e,t){return this.vs.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ne.resolve()}xn(e){this.vs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ss=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.xn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.xn(t),ne.resolve()}removeTargetData(e,t){return this.vs.delete(t.target),this.Vs.ds(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.vs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.vs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.vs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Vs.hs(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Vs.fs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Vs.ds(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Vs.ws(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Vs.containsKey(t))}}class OI{constructor(e,t){this.Ds={},this.overlays={},this.Cs=new Zi(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new NI(this),this.indexManager=new _I,this.remoteDocumentCache=new Qb(r=>this.referenceDelegate.ks(r)),this.Tt=new lI(t),this.$s=new MI(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ds[e.toKey()];return r||(r=new RI(t,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$s}runTransaction(e,t,r){Ne("MemoryPersistence","Starting transaction:",e);const o=new PI(this.Cs.next());return this.referenceDelegate.Ms(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Fs(e,t){return ne.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,t)))}}class PI extends _m{constructor(e){super(),this.currentSequenceNumber=e}}class bp{constructor(e){this.persistence=e,this.Bs=new P_,this.Ls=null}static qs(e){return new bp(e)}get Us(){if(this.Ls)return this.Ls;throw tt()}addReference(e,t,r){return this.Bs.addReference(r,t),this.Us.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Bs.removeReference(r,t),this.Us.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Us.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Bs.ds(t.targetId).forEach(o=>this.Us.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Us.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ms(){this.Ls=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Us,r=>{const o=ze.fromPath(r);return this.Ks(e,o).next(u=>{u||t.removeEntry(o,mt.min())})}).next(()=>(this.Ls=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ks(e,t).next(r=>{r?this.Us.delete(t.toString()):this.Us.add(t.toString())})}ks(e){return 0}Ks(e,t){return ne.or([()=>ne.resolve(this.Bs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Fs(e,t)])}}class kI{constructor(e){this.Tt=e}F(e,t,r,o){const u=new $v("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iI,{unique:!0}),m.createObjectStore("documentMutations"),k_(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ne.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),k_(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").W().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iI,{unique:!0});const A=w.store("mutations"),N=C.map(j=>A.put(j));return ne.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Gs(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Qs(u)))),r<7&&o>=7&&(l=l.next(()=>this.js(u))),r<8&&o>=8&&(l=l.next(()=>this.zs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.Ws(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:Bb});w.createIndex("collectionPathOverlayIndex",$b,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",jb,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Rb});w.createIndex("documentKeyIndex",Nb),w.createIndex("collectionGroupIndex",JS)}(e)).next(()=>this.Hs(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.Js(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:Fb}).createIndex("sequenceNumberIndex",Lb,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Vb}).createIndex("documentKeyIndex",Ub,{unique:!1})}(e))),l}Qs(e){let t=0;return e.store("remoteDocuments").X((r,o)=>{t+=Dp(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Gs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ne.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>ne.forEach(m,w=>{ut(w.userId===u.userId);const C=za(this.Tt,w);return M_(e,u.userId,C).next(()=>{})}))}))}js(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.X((l,m)=>{const w=new nn(l),C=[0,pi(w)];u.push(t.get(C).next(A=>A?ne.resolve():t.put({targetId:0,path:pi(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ne.waitFor(u))})}zs(e,t){e.createObjectStore("collectionParents",{keyPath:oI});const r=t.store("collectionParents"),o=new Gm,u=l=>{if(o.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:pi(w)})}};return t.store("remoteDocuments").X({Z:!0},(l,m)=>{const w=new nn(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Z:!0},([l,m,w],C)=>{const A=Zo(m);return u(A.popLast())}))}Ws(e){const t=e.store("targets");return t.X((r,o)=>{const u=Yi(o),l=hI(this.Tt,u);return t.put(l)})}Hs(e,t){const r=t.store("remoteDocuments"),o=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(C=l,C.document?new ze(nn.fromString(C.document.name).popFirst(5)):C.noDocument?ze.fromSegments(C.noDocument.path):C.unknownDocument?ze.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>ne.waitFor(o))}Js(e,t){const r=t.store("mutations"),o=bI(this.Tt),u=new OI(bp.qs,this.Tt.oe);return r.W().next(l=>{const m=new Map;return l.forEach(w=>{var C;let A=null!==(C=m.get(w.userId))&&void 0!==C?C:$t();za(this.Tt,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),ne.forEach(m,(w,C)=>{const A=new Ir(C),N=Um.ue(this.Tt,A),j=u.getIndexManager(A),Q=sc.ue(A,this.Tt,j,u.referenceDelegate);return new AI(o,Q,N,j).recalculateAndSaveOverlaysForDocumentKeys(new Lm(t,Zi.at),w).next()})})}}function k_(n){n.createObjectStore("targetDocuments",{keyPath:Pb}).createIndex("documentTargetsIndex",kb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ob,{unique:!0}),n.createObjectStore("targetGlobal")}const F_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class L_{constructor(e,t,r,o,u,l,m,w,C,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ys=u,this.window=l,this.document=m,this.Zs=C,this.Xs=A,this.ti=N,this.Cs=null,this.xs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ei=null,this.inForeground=!1,this.ni=null,this.si=null,this.ii=Number.NEGATIVE_INFINITY,this.ri=j=>Promise.resolve(),!L_.C())throw new Se(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new CI(this,o),this.oi=t+"main",this.Tt=new lI(w),this.ui=new ao(this.oi,this.ti,new kI(this.Tt)),this.Ns=new Kb(this.referenceDelegate,this.Tt),this.remoteDocumentCache=bI(this.Tt),this.$s=new Gb,this.window&&this.window.localStorage?this.ci=this.window.localStorage:(this.ci=null,!1===A&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ie.FAILED_PRECONDITION,F_);return this.hi(),this.li(),this.fi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ns.getHighestSequenceNumber(e))}).then(e=>{this.Cs=new Zi(e,this.Zs)}).then(()=>{this.xs=!0}).catch(e=>(this.ui&&this.ui.close(),Promise.reject(e)))}di(e){var t=this;return this.ri=function(){var r=(0,de.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ui.L(function(){var t=(0,de.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ys.enqueueAndForget((0,de.Z)(function*(){t.started&&(yield t.ai())})))}ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Tp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this._i(e).next(t=>{t||(this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)))})}).next(()=>this.wi(e)).next(t=>this.isPrimary&&!t?this.mi(e).next(()=>!1):!!t&&this.gi(e).next(()=>!0))).catch(e=>{if(Ku(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ys.enqueueRetryable(()=>this.ri(e)),this.isPrimary=e})}_i(e){return Ym(e).get("owner").next(t=>ne.resolve(this.yi(t)))}pi(e){return Tp(e).delete(this.clientId)}Ii(){var e=this;return(0,de.Z)(function*(){if(e.isPrimary&&!e.Ti(e.ii,18e5)){e.ii=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=br(r,"clientMetadata");return o.W().next(u=>{const l=e.Ei(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ne.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ci)for(const r of t)e.ci.removeItem(e.Ai(r.clientId))}})()}fi(){this.si=this.Ys.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ai().then(()=>this.Ii()).then(()=>this.fi()))}yi(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.Xs?ne.resolve(!0):Ym(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new Se(ie.FAILED_PRECONDITION,F_);return!1}}return!(!this.networkEnabled||!this.inForeground)||Tp(e).W().next(r=>void 0===this.Ei(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,de.Z)(function*(){e.xs=!1,e.Pi(),e.si&&(e.si.cancel(),e.si=null),e.vi(),e.bi(),yield e.ui.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Lm(t,Zi.at);return e.mi(r).next(()=>e.pi(r))}),e.ui.close(),e.Vi()})()}Ei(e,t){return e.filter(r=>this.Ti(r.updateTimeMs,t)&&!this.Ri(r.clientId))}Si(){return this.runTransaction("getActiveClients","readonly",e=>Tp(e).W().next(t=>this.Ei(t,18e5).map(r=>r.clientId)))}get started(){return this.xs}getMutationQueue(e,t){return sc.ue(e,this.Tt,t,this.referenceDelegate)}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new wI(e,this.Tt.oe.databaseId)}getDocumentOverlayCache(e){return Um.ue(this.Tt,e)}getBundleCache(){return this.$s}runTransaction(e,t,r){Ne("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.ti)?uI:14===l?E_:13===l?w_:12===l?mp:11===l?aI:void tt();var l;let m;return this.ui.runTransaction(e,o,u,w=>(m=new Lm(w,this.Cs?this.Cs.next():Zi.at),"readwrite-primary"===t?this._i(m).next(C=>!!C||this.wi(m)).next(C=>{if(!C)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ys.enqueueRetryable(()=>this.ri(!1)),new Se(ie.FAILED_PRECONDITION,qu);return r(m)}).next(C=>this.gi(m).next(()=>C)):this.Di(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Di(e){return Ym(e).get("owner").next(t=>{if(null!==t&&this.Ti(t.leaseTimestampMs,5e3)&&!this.Ri(t.ownerId)&&!this.yi(t)&&!(this.Xs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ie.FAILED_PRECONDITION,F_)})}gi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ym(e).put("owner",t)}static C(){return ao.C()}mi(e){const t=Ym(e);return t.get("owner").next(r=>this.yi(r)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}Ti(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}hi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ni=()=>{this.Ys.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ai()))},this.document.addEventListener("visibilitychange",this.ni),this.inForeground="visible"===this.document.visibilityState)}vi(){this.ni&&(this.document.removeEventListener("visibilitychange",this.ni),this.ni=null)}li(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ei=()=>{this.Pi();const t=/(?:Version|Mobile)\/1[456]/;(0,cn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ys.enterRestrictedMode(!0),this.Ys.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ei))}bi(){this.ei&&(this.window.removeEventListener("pagehide",this.ei),this.ei=null)}Ri(e){var t;try{const r=null!==(null===(t=this.ci)||void 0===t?void 0:t.getItem(this.Ai(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Pi(){if(this.ci)try{this.ci.setItem(this.Ai(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Vi(){if(this.ci)try{this.ci.removeItem(this.Ai(this.clientId))}catch{}}Ai(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ym(n){return br(n,"owner")}function Tp(n){return br(n,"clientMetadata")}function FI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class LI{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Ci=r,this.xi=o}static Ni(e,t){let r=$t(),o=$t();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new LI(e,t.fromCache,r,o)}}class Jb{constructor(){this.ki=!1}initialize(e,t){this.$i=e,this.indexManager=t,this.ki=!0}getDocumentsMatchingQuery(e,t,r,o){return this.Mi(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Fi(e,t))}Mi(e,t){if(kE(t))return ne.resolve(null);let r=fi(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=Cm(t,null,"F"),r=fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=$t(...u);return this.$i.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.Bi(t,m);return this.Li(t,C,l,w.readTime)?this.Mi(e,Cm(t,null,"F")):this.qi(e,C,t,w)}))})))}Oi(e,t,r,o){return kE(t)||o.isEqual(mt.min())?this.Fi(e,t):this.$i.getDocuments(e,r).next(u=>{const l=this.Bi(t,u);return this.Li(t,l,r,o)?this.Fi(e,t):(gm()<=Fu.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),bm(t)),this.qi(e,l,t,Va(o,-1)))})}Bi(e,t){let r=new pn(LE(e));return t.forEach((o,u)=>{yh(e,u)&&(r=r.add(u))}),r}Li(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Fi(e,t){return gm()<=Fu.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",bm(t)),this.$i.getDocumentsMatchingQuery(e,t,ds.min())}qi(e,t,r,o){return this.$i.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class tA{constructor(e,t,r,o){this.persistence=e,this.Ui=t,this.Tt=o,this.Ki=new qn(Ft),this.Gi=new tc(u=>hh(u),fh),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.$s=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AI(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ki))}}function eT(n,e,t,r){return new tA(n,e,t,r)}function tT(n,e){return VI.apply(this,arguments)}function VI(){return VI=(0,de.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.zi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=$t();for(const C of o){l.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}for(const C of u){m.push(C.batchId);for(const A of C.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(C=>({Wi:C,removedBatchIds:l,addedBatchIds:m}))})})}),VI.apply(this,arguments)}function nA(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ji.newChangeBuffer({trackRemovals:!0});return function(l,m,w,C){const A=w.batch,N=A.keys();let j=ne.resolve();return N.forEach(Q=>{j=j.next(()=>C.getEntry(m,Q)).next(oe=>{const xe=w.docVersions.get(Q);ut(null!==xe),oe.version.compareTo(xe)<0&&(A.applyToRemoteDocument(oe,w),oe.isValidDocument()&&(oe.setReadTime(w.commitVersion),C.addEntry(oe)))})}),j.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=$t();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function Sp(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ns.getLastRemoteSnapshotVersion(t))}function rA(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.Ki;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.ji.newChangeBuffer({trackRemovals:!0});o=t.Ki;const m=[];e.targetChanges.forEach((A,N)=>{const j=o.get(N);if(!j)return;m.push(t.Ns.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Ns.addMatchingKeys(u,A.addedDocuments,N)));let Q=j.withSequenceNumber(u.currentSequenceNumber);var oe,xe,Ue;e.targetMismatches.has(N)?Q=Q.withResumeToken(_n.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):A.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(A.resumeToken,r)),o=o.insert(N,Q),xe=Q,Ue=A,(0===(oe=j).resumeToken.approximateByteSize()||xe.snapshotVersion.toMicroseconds()-oe.snapshotVersion.toMicroseconds()>=3e8||Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0)&&m.push(t.Ns.updateTargetData(u,Q))});let w=Hr(),C=$t();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(V_(u,l,e.documentUpdates).next(A=>{w=A.Hi,C=A.Ji})),!r.isEqual(mt.min())){const A=t.Ns.getLastRemoteSnapshotVersion(u).next(N=>t.Ns.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return ne.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ki=o,u))}function V_(n,e,t){let r=$t(),o=$t();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Hr();return t.forEach((m,w)=>{const C=u.get(m);w.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(mt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Ne("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",w.version)}),{Hi:l,Ji:o}})}function Qm(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ml(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Ns.getTargetData(r,e).next(u=>u?(o=u,ne.resolve(o)):t.Ns.allocateTargetId(r).next(l=>(o=new rc(e,l,0,r.currentSequenceNumber),t.Ns.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ki.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ki=t.Ki.insert(r.targetId,r),t.Gi.set(e,r.targetId)),r})}function xl(n,e,t){return UI.apply(this,arguments)}function UI(){return UI=(0,de.Z)(function*(n,e,t){const r=Ge(n),o=r.Ki.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Ku(l))throw l;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(o.target)}),UI.apply(this,arguments)}function Oh(n,e,t){const r=Ge(n);let o=mt.min(),u=$t();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,C){const A=Ge(m),N=A.Gi.get(C);return void 0!==N?ne.resolve(A.Ki.get(N)):A.Ns.getTargetData(w,C)}(r,l,fi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Ui.getDocumentsMatchingQuery(l,e,t?o:mt.min(),t?u:$t())).next(m=>(B_(r,FE(e),m),{documents:m,Yi:u})))}function U_(n,e){const t=Ge(n),r=Ge(t.Ns),o=t.Ki.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ie(u,e).next(l=>l?l.target:null))}function BI(n,e){const t=Ge(n),r=t.Qi.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ji.getAllFromCollectionGroup(o,e,Va(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(B_(t,e,o),o))}function B_(n,e,t){let r=n.Qi.get(e)||mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Qi.set(e,r)}function $I(){return $I=(0,de.Z)(function*(n,e,t,r){const o=Ge(n);let u=$t(),l=Hr();for(const C of t){const A=e.Zi(C.metadata.name);C.document&&(u=u.add(A));const N=e.Xi(C);N.setReadTime(e.tr(C.metadata.readTime)),l=l.insert(A,N)}const m=o.ji.newChangeBuffer({trackRemovals:!0}),w=yield Ml(o,(C=r,fi(ho(nn.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>V_(C,m,l).next(A=>(m.apply(C),A)).next(A=>o.Ns.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.Ns.addMatchingKeys(C,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Hi,A.Ji)).next(()=>A.Hi)))}),$I.apply(this,arguments)}function nT(n,e){return $_.apply(this,arguments)}function $_(){return $_=(0,de.Z)(function*(n,e,t=$t()){const r=yield Ml(n,fi(yp(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=or(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.$s.saveNamedQuery(u,e);const m=r.withResumeToken(_n.EMPTY_BYTE_STRING,l);return o.Ki=o.Ki.insert(m.targetId,m),o.Ns.updateTargetData(u,m).next(()=>o.Ns.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Ns.addMatchingKeys(u,t,r.targetId)).next(()=>o.$s.saveNamedQuery(u,e))})}),$_.apply(this,arguments)}function Ap(n,e){return`firestore_clients_${n}_${e}`}function jI(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HI(n,e){return`firestore_targets_${n}_${e}`}class j_{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static er(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Se(o.error.code,o.error.message))),l?new j_(e,t,o.state,u):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static er(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Se(r.error.code,r.error.message))),u?new Xm(e,r.state,o):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}nr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static er(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=lp();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=uo(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new Jm(e,u):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class H_{constructor(e,t){this.clientId=e,this.onlineState=t}static er(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new H_(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class G_{constructor(){this.activeTargetIds=lp()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GI{constructor(e,t,r,o,u){this.window=e,this.Ys=t,this.persistenceKey=r,this.rr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ur=this.cr.bind(this),this.ar=new qn(Ft),this.started=!1,this.hr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.lr=Ap(this.persistenceKey,this.rr),this.dr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.rr,new G_),this._r=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.wr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.mr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.gr=`firestore_online_state_${this.persistenceKey}`,this.yr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ur)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,de.Z)(function*(){const t=yield e.syncEngine.Si();for(const o of t){if(o===e.rr)continue;const u=e.getItem(Ap(e.persistenceKey,o));if(u){const l=Jm.er(o,u);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.pr();const r=e.storage.getItem(e.gr);if(r){const o=e.Ir(r);o&&e.Tr(o)}for(const o of e.hr)e.cr(o);e.hr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.dr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Er(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ar(e,"pending")}updateMutationState(e,t,r){this.Ar(e,t,r),this.Rr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(HI(this.persistenceKey,e));if(r){const o=Xm.er(e,r);o&&(t=o.state)}}return this.Pr.sr(e),this.pr(),t}removeLocalQueryTarget(e){this.Pr.ir(e),this.pr()}isLocalQueryTarget(e){return this.Pr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HI(this.persistenceKey,e))}updateQueryState(e,t,r){this.vr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Rr(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ur),this.removeItem(this.lr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}cr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ne("SharedClientState","EVENT",r.key,r.newValue),r.key===this.lr)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ys.enqueueRetryable((0,de.Z)(function*(){if(t.started){if(null!==r.key)if(t._r.test(r.key)){if(null==r.newValue){const o=t.Sr(r.key);return t.Dr(o,null)}{const o=t.Cr(r.key,r.newValue);if(o)return t.Dr(o.clientId,o)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(t.mr.test(r.key)){if(null!==r.newValue){const o=t.$r(r.key,r.newValue);if(o)return t.Mr(o)}}else if(r.key===t.gr){if(null!==r.newValue){const o=t.Ir(r.newValue);if(o)return t.Tr(o)}}else if(r.key===t.dr){const o=function(u){let l=Zi.at;if(null!=u)try{const m=JSON.parse(u);ut("number"==typeof m),l=m}catch(m){tr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Zi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.yr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Fr(u)))}}else t.hr.push(r)}))}}get Pr(){return this.ar.get(this.rr)}pr(){this.setItem(this.lr,this.Pr.nr())}Ar(e,t,r){const o=new j_(this.currentUser,e,t,r),u=jI(this.persistenceKey,this.currentUser,e);this.setItem(u,o.nr())}Rr(e){const t=jI(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.gr,JSON.stringify({clientId:this.rr,onlineState:e}))}vr(e,t,r){const o=HI(this.persistenceKey,e),u=new Xm(e,t,r);this.setItem(o,u.nr())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.yr,t)}Sr(e){const t=this._r.exec(e);return t?t[1]:null}Cr(e,t){const r=this.Sr(e);return Jm.er(r,t)}Nr(e,t){const r=this.wr.exec(e),o=Number(r[1]);return j_.er(new Ir(void 0!==r[2]?r[2]:null),o,t)}$r(e,t){const r=this.mr.exec(e),o=Number(r[1]);return Xm.er(o,t)}Ir(e){return H_.er(e)}Or(e){return JSON.parse(e)}kr(e){var t=this;return(0,de.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Br(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Lr(e.targetId,e.state,e.error)}Dr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),o=this.Er(this.ar),u=this.Er(r),l=[],m=[];return u.forEach(w=>{o.has(w)||l.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.qr(l,m).then(()=>{this.ar=r})}Tr(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Er(e){let t=lp();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class zI{constructor(){this.Ur=new G_,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,t,r){this.Kr[e]=t}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new G_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class qI{Gr(e){}shutdown(){}}class z_{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let q_=null;function fs(){return null===q_?q_=268435456+Math.round(2147483648*Math.random()):q_++,"0x"+q_.toString(16)}const rT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W_{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}const gi="WebChannelConnection";class sA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.co=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,t,r,o,u){const l=fs(),m=this.fo(e,t);Ne("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this._o(w,o,u),this.wo(e,m,w,r).then(C=>(Ne("RestConnection",`Received RPC '${e}' ${l}: `,C),C),C=>{throw gl("RestConnection",`RPC '${e}' ${l} failed with error: `,C,"url: ",m,"request:",r),C})}mo(e,t,r,o,u,l){return this.lo(e,t,r,o,u)}_o(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+pl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}fo(e,t){return`${this.co}/v1/${t}:${rT[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,t,r,o){const u=fs();return new Promise((l,m)=>{const w=new aE;w.setWithCredentials(!0),w.listenOnce(nh.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Hu.NO_ERROR:const A=w.getResponseJson();Ne(gi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(A)),l(A);break;case Hu.TIMEOUT:Ne(gi,`RPC '${e}' ${u} timed out`),m(new Se(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:const N=w.getStatus();if(Ne(gi,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let j=w.getResponseJson();Array.isArray(j)&&(j=j[0]);const Q=j?.error;if(Q&&Q.status&&Q.message){const oe=function(xe){const Ue=xe.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Ue)>=0?Ue:ie.UNKNOWN}(Q.status);m(new Se(oe,Q.message))}else m(new Se(ie.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new Se(ie.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Ne(gi,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(o);Ne(gi,`RPC '${e}' ${u} sending request:`,o),w.send(t,"POST",C,r,15)})}yo(e,t,r){const o=fs(),u=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=eh(),m=th(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(w.xmlHttpFactory=new oE({})),this._o(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const C=u.join("");Ne(gi,`Creating RPC '${e}' stream ${o}: ${C}`,w);const A=l.createWebChannel(C,w);let N=!1,j=!1;const Q=new W_({Yr:xe=>{j?Ne(gi,`Not sending because RPC '${e}' stream ${o} is closed:`,xe):(N||(Ne(gi,`Opening RPC '${e}' stream ${o} transport.`),A.open(),N=!0),Ne(gi,`RPC '${e}' stream ${o} sending:`,xe),A.send(xe))},Zr:()=>A.close()}),oe=(xe,Ue,jt)=>{xe.listen(Ue,tn=>{try{jt(tn)}catch(Rt){setTimeout(()=>{throw Rt},0)}})};return oe(A,Jf.EventType.OPEN,()=>{j||Ne(gi,`RPC '${e}' stream ${o} transport opened.`)}),oe(A,Jf.EventType.CLOSE,()=>{j||(j=!0,Ne(gi,`RPC '${e}' stream ${o} transport closed`),Q.oo())}),oe(A,Jf.EventType.ERROR,xe=>{j||(j=!0,gl(gi,`RPC '${e}' stream ${o} transport errored:`,xe),Q.oo(new Se(ie.UNAVAILABLE,"The operation could not be completed")))}),oe(A,Jf.EventType.MESSAGE,xe=>{var Ue;if(!j){const jt=xe.data[0];ut(!!jt);const Rt=jt.error||(null===(Ue=jt[0])||void 0===Ue?void 0:Ue.error);if(Rt){Ne(gi,`RPC '${e}' stream ${o} received error:`,Rt);const Ht=Rt.status;let Bt=function(yi){const Wh=hr[yi];if(void 0!==Wh)return o_(Wh)}(Ht),Wt=Rt.message;void 0===Bt&&(Bt=ie.INTERNAL,Wt="Unknown error status: "+Ht+" with message "+Rt.message),j=!0,Q.oo(new Se(Bt,Wt)),A.close()}else Ne(gi,`RPC '${e}' stream ${o} received:`,jt),Q.uo(jt)}}),oe(m,rh.STAT_EVENT,xe=>{xe.stat===Nv.PROXY?Ne(gi,`RPC '${e}' stream ${o} detected buffering proxy`):xe.stat===Nv.NOPROXY&&Ne(gi,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{Q.ro()},0),Q}}function ps(){return typeof window<"u"?window:null}function ey(){return typeof document<"u"?document:null}function Rl(n){return new Cb(n,!0)}class K_{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Ys=e,this.timerId=t,this.po=r,this.Io=o,this.To=u,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}Po(){this.Eo=this.To}vo(e){this.cancel();const t=Math.floor(this.Eo+this.bo()),r=Math.max(0,Date.now()-this.Ro),o=Math.max(0,t-r);o>0&&Ne("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Eo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,o,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){null!==this.Ao&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){null!==this.Ao&&(this.Ao.cancel(),this.Ao=null)}bo(){return(Math.random()-.5)*this.Eo}}class WI{constructor(e,t,r,o,u,l,m,w){this.Ys=e,this.So=r,this.Do=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new K_(e,t)}$o(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,de.Z)(function*(){e.$o()&&(yield e.close(0))})()}Fo(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&null===this.xo&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}Lo(){var e=this;return(0,de.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}close(e,t){var r=this;return(0,de.Z)(function*(){r.Uo(),r.Ko(),r.ko.cancel(),r.Co++,4!==e?r.ko.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.ko.Po()):t&&t.code===ie.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Go(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.no(t)})()}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),t=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Co===t&&this.jo(r,o)},r=>{e(()=>{const o=new Se(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(o)})})}jo(e,t){const r=this.Qo(this.Co);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(o=>{r(()=>this.zo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.ko.vo((0,de.Z)(function*(){e.state=0,e.start()}))}zo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return t=>{this.Ys.enqueueAndForget(()=>this.Co===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z_ extends WI{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.Tt=u}Wo(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.ko.reset();const t=function p_(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:tt(),o=e.targetChange.targetIds||[],u=function(w,C){return w.yt?(ut(void 0===C||"string"==typeof C),_n.fromBase64String(C||"")):(ut(void 0===C||C instanceof Uint8Array),_n.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const C=void 0===w.code?ie.UNKNOWN:o_(w.code);return new Se(C,w.message||"")}(l);t=new YE(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ko(n,r.document.name),u=or(r.document.updateTime),l=r.document.createTime?or(r.document.createTime):mt.min(),m=new jr({mapValue:{fields:r.document.fields}}),w=hn.newFoundDocument(o,u,l,m);t=new Rm(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=Ko(n,r.document),u=r.readTime?or(r.readTime):mt.min(),l=hn.newNoDocument(o,u);t=new Rm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=Ko(n,r.document);t=new Rm([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new yb(r.count||0);t=new Nm(r.targetId,u)}}var w;return t}(this.Tt,e),r=function(o){if(!("targetChange"in o))return mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?or(u.readTime):mt.min()}(e);return this.listener.Ho(t,r)}Jo(e){const t={};t.database=bl(this.Tt),t.addTarget=function(o,u){let l;const m=u.target;return l=cp(m)?{documents:g_(o,m)}:{query:m_(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=c_(o,u.resumeToken):u.snapshotVersion.compareTo(mt.min())>0&&(l.readTime=Th(o,u.snapshotVersion.toTimestamp())),l}(this.Tt,e);const r=function tI(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.qo(t)}Yo(e){const t={};t.database=bl(this.Tt),t.removeTarget=e,this.qo(t)}}class KI extends WI{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.Tt=u,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const t=function Sh(n,e){return n&&n.length>0?(ut(void 0!==e),n.map(t=>function(r,o){let u=or(r.updateTime?r.updateTime:o);return u.isEqual(mt.min())&&(u=or(o)),new gb(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=or(e.commitTime);return this.listener.eu(r,t)}return ut(!e.writeResults||0===e.writeResults.length),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=bl(this.Tt),this.qo(e)}tu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pp(this.Tt,r))};this.qo(t)}}class ZI extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.Tt=o,this.iu=!1}ru(){if(this.iu)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,t,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.lo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ie.UNKNOWN,o.toString())})}mo(e,t,r,o){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.mo(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Se(ie.UNKNOWN,u.toString())})}terminate(){this.iu=!0}}class YI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){0===this.ou&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){"Online"===this.state?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,"Online"===e&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(tr(t),this.cu=!1):Ne("OnlineStateTracker",t)}du(){null!==this.uu&&(this.uu.cancel(),this.uu=null)}}class sT{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=u,this.yu.Gr(m=>{r.enqueueAndForget((0,de.Z)(function*(){var w;Za(l)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,de.Z)(function*(C){const A=Ge(C);A.mu.add(4),yield oc(A),A.pu.set("Unknown"),A.mu.delete(4),yield Ph(A)}),function(C){return w.apply(this,arguments)})(l))}))}),this.pu=new YI(r,o)}}function Ph(n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,de.Z)(function*(n){if(Za(n))for(const e of n.gu)yield e(!0)}),Y_.apply(this,arguments)}function oc(n){return Xo.apply(this,arguments)}function Xo(){return Xo=(0,de.Z)(function*(n){for(const e of n.gu)yield e(!1)}),Xo.apply(this,arguments)}function Mp(n,e){const t=Ge(n);t.wu.has(e.targetId)||(t.wu.set(e.targetId,e),Q_(t)?XI(t):Op(t).Mo()&&mo(t,e))}function Nl(n,e){const t=Ge(n),r=Op(t);t.wu.delete(e),r.Mo()&&QI(t,e),0===t.wu.size&&(r.Mo()?r.Bo():Za(t)&&t.pu.set("Unknown"))}function mo(n,e){n.Iu.Ot(e.targetId),Op(n).Jo(e)}function QI(n,e){n.Iu.Ot(e),Op(n).Yo(e)}function XI(n){n.Iu=new wb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>n.wu.get(e)||null}),Op(n).start(),n.pu.au()}function Q_(n){return Za(n)&&!Op(n).$o()&&n.wu.size>0}function Za(n){return 0===Ge(n).mu.size}function JI(n){n.Iu=void 0}function oT(n){return ny.apply(this,arguments)}function ny(){return ny=(0,de.Z)(function*(n){n.wu.forEach((e,t)=>{mo(n,e)})}),ny.apply(this,arguments)}function oA(n,e){return ry.apply(this,arguments)}function ry(){return ry=(0,de.Z)(function*(n,e){JI(n),Q_(n)?(n.pu.fu(e),XI(n)):n.pu.set("Unknown")}),ry.apply(this,arguments)}function aT(n,e,t){return iy.apply(this,arguments)}function iy(){return iy=(0,de.Z)(function*(n,e,t){if(n.pu.set("Online"),e instanceof YE&&2===e.state&&e.cause)try{yield(r=(0,de.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.wu.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.wu.delete(m),o.Iu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield X_(n,r)}else if(e instanceof Rm?n.Iu.Qt(e):e instanceof Nm?n.Iu.Zt(e):n.Iu.Wt(e),!t.isEqual(mt.min()))try{const r=yield Sp(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.Iu.ee(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.wu.get(w);C&&o.wu.set(w,C.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=o.wu.get(m);if(!w)return;o.wu.set(m,w.withResumeToken(_n.EMPTY_BYTE_STRING,w.snapshotVersion)),QI(o,m);const C=new rc(w.target,m,1,w.sequenceNumber);mo(o,C)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ne("RemoteStore","Failed to raise snapshot:",r),yield X_(n,r)}var r}),iy.apply(this,arguments)}function X_(n,e,t){return xp.apply(this,arguments)}function xp(){return xp=(0,de.Z)(function*(n,e,t){if(!Ku(e))throw e;n.mu.add(1),yield oc(n),n.pu.set("Offline"),t||(t=()=>Sp(n.localStore)),n.asyncQueue.enqueueRetryable((0,de.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.mu.delete(1),yield Ph(n)}))}),xp.apply(this,arguments)}function J_(n,e){return e().catch(t=>X_(n,t,e))}function Ol(n){return sy.apply(this,arguments)}function sy(){return sy=(0,de.Z)(function*(n){const e=Ge(n),t=Pl(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;eD(e);)try{const o=yield Qm(e.localStore,r);if(null===o){0===e._u.length&&t.Bo();break}r=o.batchId,tD(e,o)}catch(o){yield X_(e,o)}Rp(e)&&Np(e)}),sy.apply(this,arguments)}function eD(n){return Za(n)&&n._u.length<10}function tD(n,e){n._u.push(e);const t=Pl(n);t.Mo()&&t.Xo&&t.tu(e.mutations)}function Rp(n){return Za(n)&&!Pl(n).$o()&&n._u.length>0}function Np(n){Pl(n).start()}function nD(n){return e0.apply(this,arguments)}function e0(){return e0=(0,de.Z)(function*(n){Pl(n).su()}),e0.apply(this,arguments)}function uT(n){return rD.apply(this,arguments)}function rD(){return rD=(0,de.Z)(function*(n){const e=Pl(n);for(const t of n._u)e.tu(t.mutations)}),rD.apply(this,arguments)}function aA(n,e,t){return iD.apply(this,arguments)}function iD(){return iD=(0,de.Z)(function*(n,e,t){const r=n._u.shift(),o=D_.from(r,e,t);yield J_(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Ol(n)}),iD.apply(this,arguments)}function sD(n,e){return t0.apply(this,arguments)}function t0(){return t0=(0,de.Z)(function*(n,e){var t;e&&Pl(n).Xo&&(yield(t=(0,de.Z)(function*(r,o){if(zE(u=o.code)&&u!==ie.ABORTED){const l=r._u.shift();Pl(r).Fo(),yield J_(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Ol(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),Rp(n)&&Np(n)}),t0.apply(this,arguments)}function oD(n,e){return n0.apply(this,arguments)}function n0(){return n0=(0,de.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const r=Za(t);t.mu.add(3),yield oc(t),r&&t.pu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.mu.delete(3),yield Ph(t)}),n0.apply(this,arguments)}function aD(n,e){return uD.apply(this,arguments)}function uD(){return uD=(0,de.Z)(function*(n,e){const t=Ge(n);e?(t.mu.delete(2),yield Ph(t)):e||(t.mu.add(2),yield oc(t),t.pu.set("Unknown"))}),uD.apply(this,arguments)}function Op(n){return n.Tu||(n.Tu=function(e,t,r){const o=Ge(e);return o.ru(),new Z_(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:oT.bind(null,n),no:oA.bind(null,n),Ho:aT.bind(null,n)}),n.gu.push(function(){var e=(0,de.Z)(function*(t){t?(n.Tu.Fo(),Q_(n)?XI(n):n.pu.set("Unknown")):(yield n.Tu.stop(),JI(n))});return function(t){return e.apply(this,arguments)}}())),n.Tu}function Pl(n){return n.Eu||(n.Eu=function(e,t,r){const o=Ge(e);return o.ru(),new KI(t,o.connection,o.authCredentials,o.appCheckCredentials,o.Tt,r)}(n.datastore,n.asyncQueue,{Xr:nD.bind(null,n),no:sD.bind(null,n),nu:uT.bind(null,n),eu:aA.bind(null,n)}),n.gu.push(function(){var e=(0,de.Z)(function*(t){t?(n.Eu.Fo(),yield Ol(n)):(yield n.Eu.stop(),n._u.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n._u.length} pending writes`),n._u=[]))});return function(t){return e.apply(this,arguments)}}())),n.Eu}class cD{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new cD(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kh(n,e){if(tr("AsyncQueue",`${e}: ${n}`),Ku(n))return new Se(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class Ya{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=Ch(),this.sortedSet=new qn(this.comparator)}static emptySet(e){return new Ya(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ya)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ya;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lD{constructor(){this.Au=new qn(ze.comparator)}track(e){const t=e.doc.key,r=this.Au.get(t);r?0!==e.type&&3===r.type?this.Au=this.Au.insert(t,e):3===e.type&&1!==r.type?this.Au=this.Au.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Au=this.Au.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Au=this.Au.remove(t):1===e.type&&2===r.type?this.Au=this.Au.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Au=this.Au.insert(t,{type:2,doc:e.doc}):tt():this.Au=this.Au.insert(t,e)}Ru(){const e=[];return this.Au.inorderTraversal((t,r)=>{e.push(r)}),e}}class Fh{constructor(e,t,r,o,u,l,m,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Fh(e,t,Ya.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class dD{constructor(){this.Pu=void 0,this.listeners=[]}}class kl{constructor(){this.queries=new tc(e=>e_(e),mh),this.onlineState="Unknown",this.vu=new Set}}function oy(n,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,de.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new dD),o)try{u.Pu=yield t.onListen(r)}catch(l){const m=kh(l,`Initialization of query '${bm(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Pu&&e.Vu(u.Pu)&&Lh(t)}),Pp.apply(this,arguments)}function kp(n,e){return r0.apply(this,arguments)}function r0(){return r0=(0,de.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),r0.apply(this,arguments)}function s0(n,e){const t=Ge(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.Vu(o)&&(r=!0);l.Pu=o}}r&&Lh(t)}function o0(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Lh(n){n.vu.forEach(e=>{e.next()})}class hD{constructor(e,t,r){this.query=e,this.Su=t,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Fh(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Du?this.xu(e)&&(this.Su.next(e),t=!0):this.Nu(e,this.onlineState)&&(this.ku(e),t=!0),this.Cu=e,t}onError(e){this.Su.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),t=!0),t}Nu(e,t){return!e.fromCache||(!this.options.$u||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}xu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}ku(e){e=Fh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}class uA{constructor(e,t){this.Mu=e,this.byteLength=t}Ou(){return"metadata"in this.Mu}}class cT{constructor(e){this.Tt=e}Zi(e){return Ko(this.Tt,e)}Xi(e){return e.metadata.exists?eI(this.Tt,e.document,!1):hn.newNoDocument(this.Zi(e.metadata.name),this.tr(e.metadata.readTime))}tr(e){return or(e)}}class cA{constructor(e,t,r){this.Fu=e,this.localStore=t,this.Tt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=a0(e)}Bu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Mu.namedQuery)this.queries.push(e.Mu.namedQuery);else if(e.Mu.documentMetadata){this.documents.push({metadata:e.Mu.documentMetadata}),e.Mu.documentMetadata.exists||++t;const r=nn.fromString(e.Mu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Mu.document&&(this.documents[this.documents.length-1].document=e.Mu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Lu(e){const t=new Map,r=new cT(this.Tt);for(const o of e)if(o.metadata.queries){const u=r.Zi(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||$t()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,de.Z)(function*(){const t=yield function iA(n,e,t,r){return $I.apply(this,arguments)}(e.localStore,new cT(e.Tt),e.documents,e.Fu.id),r=e.Lu(e.documents);for(const o of e.queries)yield nT(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,qu:e.collectionGroups,Uu:t}})()}}function a0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class fD{constructor(e){this.key=e}}class pD{constructor(e){this.key=e}}class gD{constructor(e,t){this.query=e,this.Ku=t,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=$t(),this.mutatedKeys=$t(),this.ju=LE(e),this.zu=new Ya(this.ju)}get Wu(){return this.Ku}Hu(e,t){const r=t?t.Ju:new lD,o=t?t.zu:this.zu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const j=o.get(A),Q=yh(this.query,N)?N:null,oe=!!j&&this.mutatedKeys.has(j.key),xe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Ue=!1;j&&Q?j.data.isEqual(Q.data)?oe!==xe&&(r.track({type:3,doc:Q}),Ue=!0):this.Yu(j,Q)||(r.track({type:2,doc:Q}),Ue=!0,(w&&this.ju(Q,w)>0||C&&this.ju(Q,C)<0)&&(m=!0)):!j&&Q?(r.track({type:0,doc:Q}),Ue=!0):j&&!Q&&(r.track({type:1,doc:j}),Ue=!0,(w||C)&&(m=!0)),Ue&&(Q?(l=l.add(Q),u=xe?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{zu:l,Ju:r,Li:m,mutatedKeys:u}}Yu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const u=e.Ju.Ru();u.sort((C,A)=>function(N,j){const Q=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Q(N)-Q(j)}(C.type,A.type)||this.ju(C.doc,A.doc)),this.Zu(r);const l=t?this.Xu():[],m=0===this.Qu.size&&this.current?1:0,w=m!==this.Gu;return this.Gu=m,0!==u.length||w?{snapshot:new Fh(this.query,e.zu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:l}:{tc:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new lD,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(t=>this.Ku=this.Ku.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ku=this.Ku.delete(t)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=$t(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const t=[];return e.forEach(r=>{this.Qu.has(r)||t.push(new pD(r))}),this.Qu.forEach(r=>{e.has(r)||t.push(new fD(r))}),t}nc(e){this.Ku=e.Yi,this.Qu=$t();const t=this.Hu(e.documents);return this.applyChanges(t,!0)}sc(){return Fh.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,0===this.Gu,this.hasCachedResults)}}class lT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class mD{constructor(e){this.key=e,this.ic=!1}}class yD{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.rc={},this.oc=new tc(m=>e_(m),mh),this.uc=new Map,this.cc=new Set,this.ac=new qn(ze.comparator),this.hc=new Map,this.lc=new P_,this.fc={},this.dc=new Map,this._c=Al.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return!0===this.wc}}function vD(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,de.Z)(function*(n,e){const t=Ot(n);let r,o;const u=t.oc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.sc();else{const l=yield Ml(t.localStore,fi(e));t.isPrimaryClient&&Mp(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield c0(t,e,r,"current"===m,l.resumeToken)}return o}),u0.apply(this,arguments)}function c0(n,e,t,r,o){return ay.apply(this,arguments)}function ay(){return ay=(0,de.Z)(function*(n,e,t,r,o){n.mc=(N,j,Q)=>{return(oe=(0,de.Z)(function*(xe,Ue,jt,tn){let Rt=Ue.view.Hu(jt);Rt.Li&&(Rt=yield Oh(xe.localStore,Ue.query,!1).then(({documents:Wt})=>Ue.view.Hu(Wt,Rt)));const Ht=tn&&tn.targetChanges.get(Ue.targetId),Bt=Ue.view.applyChanges(Rt,xe.isPrimaryClient,Ht);return bD(xe,Ue.targetId,Bt.tc),Bt.snapshot}),function(xe,Ue,jt,tn){return oe.apply(this,arguments)})(n,N,j,Q);var oe};const u=yield Oh(n.localStore,e,!0),l=new gD(e,u.Yi),m=l.Hu(u.documents),w=hp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=l.applyChanges(m,n.isPrimaryClient,w);bD(n,t,C.tc);const A=new lT(e,t,l);return n.oc.set(e,A),n.uc.has(t)?n.uc.get(t).push(e):n.uc.set(t,[e]),C.snapshot}),ay.apply(this,arguments)}function l0(n,e){return _D.apply(this,arguments)}function _D(){return _D=(0,de.Z)(function*(n,e){const t=Ge(n),r=t.oc.get(e),o=t.uc.get(r.targetId);if(o.length>1)return t.uc.set(r.targetId,o.filter(u=>!mh(u,e))),void t.oc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Nl(t.remoteStore,r.targetId),Lp(t,r.targetId)}).catch(Wu))):(Lp(t,r.targetId),yield xl(t.localStore,r.targetId,!0))}),_D.apply(this,arguments)}function Fp(){return Fp=(0,de.Z)(function*(n,e,t){const r=An(n);try{const o=yield function(u,l){const m=Ge(u),w=Fn.now(),C=l.reduce((j,Q)=>j.add(Q.key),$t());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",j=>{let Q=Hr(),oe=$t();return m.ji.getEntries(j,C).next(xe=>{Q=xe,Q.forEach((Ue,jt)=>{jt.isValidDocument()||(oe=oe.add(Ue))})}).next(()=>m.localDocuments.getOverlayedDocuments(j,Q)).next(xe=>{A=xe;const Ue=[];for(const jt of l){const tn=XS(jt,A.get(jt.key).overlayedDocument);null!=tn&&Ue.push(new Ha(jt.key,tn,NE(tn.value.mapValue),Rn.exists(!0)))}return m.mutationQueue.addMutationBatch(j,w,Ue,l)}).next(xe=>{N=xe;const Ue=xe.applyToLocalDocumentSet(A,oe);return m.documentOverlayCache.saveOverlays(j,xe.batchId,Ue)})}).then(()=>({batchId:N.batchId,changes:WE(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let w=u.fc[u.currentUser.toKey()];w||(w=new qn(Ft)),w=w.insert(l,m),u.fc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield ac(r,o.changes),yield Ol(r.remoteStore)}catch(o){const u=kh(o,"Failed to persist write");t.reject(u)}}),Fp.apply(this,arguments)}function ED(n,e){return d0.apply(this,arguments)}function d0(){return d0=(0,de.Z)(function*(n,e){const t=Ge(n);try{const r=yield rA(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.hc.get(u);l&&(ut(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.ic=!0:o.modifiedDocuments.size>0?ut(l.ic):o.removedDocuments.size>0&&(ut(l.ic),l.ic=!1))}),yield ac(t,r,e)}catch(r){yield Wu(r)}}),d0.apply(this,arguments)}function dT(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.oc.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=Ge(u);m.onlineState=l;let w=!1;m.queries.forEach((C,A)=>{for(const N of A.listeners)N.bu(l)&&(w=!0)}),w&&Lh(m)}(r.eventManager,e),o.length&&r.rc.Ho(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lA(n,e,t){return h0.apply(this,arguments)}function h0(){return h0=(0,de.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.hc.get(e),u=o&&o.key;if(u){let l=new qn(ze.comparator);l=l.insert(u,hn.newNoDocument(u,mt.min()));const m=$t().add(u),w=new dp(mt.min(),new Map,new pn(Ft),l,m);yield ED(r,w),r.ac=r.ac.remove(u),r.hc.delete(e),TD(r)}else yield xl(r.localStore,e,!1).then(()=>Lp(r,e,t)).catch(Wu)}),h0.apply(this,arguments)}function hT(n,e){return f0.apply(this,arguments)}function f0(){return f0=(0,de.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield nA(t.localStore,e);p0(t,r,null),CD(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ac(t,o)}catch(o){yield Wu(o)}}),f0.apply(this,arguments)}function dA(n,e,t){return ID.apply(this,arguments)}function ID(){return ID=(0,de.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,l){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(ut(null!==A),C=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,C,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>m.localDocuments.getDocuments(w,C))})}(r.localStore,e);p0(r,e,t),CD(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ac(r,o)}catch(o){yield Wu(o)}}),ID.apply(this,arguments)}function DD(){return DD=(0,de.Z)(function*(n,e){const t=Ge(n);Za(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Ge(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.dc.get(r)||[];o.push(e),t.dc.set(r,o)}catch(r){const o=kh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),DD.apply(this,arguments)}function CD(n,e){(n.dc.get(e)||[]).forEach(t=>{t.resolve()}),n.dc.delete(e)}function p0(n,e,t){const r=Ge(n);let o=r.fc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.fc[r.currentUser.toKey()]=o}}function Lp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.uc.get(e))n.oc.delete(r),t&&n.rc.gc(r,t);n.uc.delete(e),n.isPrimaryClient&&n.lc.ds(e).forEach(r=>{n.lc.containsKey(r)||fT(n,r)})}function fT(n,e){n.cc.delete(e.path.canonicalString());const t=n.ac.get(e);null!==t&&(Nl(n.remoteStore,t),n.ac=n.ac.remove(e),n.hc.delete(t),TD(n))}function bD(n,e,t){for(const r of t)r instanceof fD?(n.lc.addReference(r.key,e),fA(n,r)):r instanceof pD?(Ne("SyncEngine","Document no longer in limbo: "+r.key),n.lc.removeReference(r.key,e),n.lc.containsKey(r.key)||fT(n,r.key)):tt()}function fA(n,e){const t=e.key,r=t.path.canonicalString();n.ac.get(t)||n.cc.has(r)||(Ne("SyncEngine","New document in limbo: "+t),n.cc.add(r),TD(n))}function TD(n){for(;n.cc.size>0&&n.ac.size<n.maxConcurrentLimboResolutions;){const e=n.cc.values().next().value;n.cc.delete(e);const t=new ze(nn.fromString(e)),r=n._c.next();n.hc.set(r,new mD(t)),n.ac=n.ac.insert(t,r),Mp(n.remoteStore,new rc(fi(ho(t.path)),r,2,Zi.at))}}function ac(n,e,t){return i.apply(this,arguments)}function i(){return i=(0,de.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],l=[];var m;r.oc.isEmpty()||(r.oc.forEach((m,w)=>{l.push(r.mc(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const A=LI.Ni(w.targetId,C);u.push(A)}}))}),yield Promise.all(l),r.rc.Ho(o),yield(m=(0,de.Z)(function*(w,C){const A=Ge(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ne.forEach(C,j=>ne.forEach(j.Ci,Q=>A.persistence.referenceDelegate.addReference(N,j.targetId,Q)).next(()=>ne.forEach(j.xi,Q=>A.persistence.referenceDelegate.removeReference(N,j.targetId,Q)))))}catch(N){if(!Ku(N))throw N;Ne("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const j=N.targetId;if(!N.fromCache){const Q=A.Ki.get(j),xe=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);A.Ki=A.Ki.insert(j,xe)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),i.apply(this,arguments)}function s(n,e){return a.apply(this,arguments)}function a(){return a=(0,de.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const r=yield tT(t.localStore,e);t.currentUser=e,(o=t).dc.forEach(l=>{l.forEach(m=>{m.reject(new Se(ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.dc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ac(t,r.Wi)}var o}),a.apply(this,arguments)}function c(n,e){const t=Ge(n),r=t.hc.get(e);if(r&&r.ic)return $t().add(r.key);{let o=$t();const u=t.uc.get(e);if(!u)return o;for(const l of u){const m=t.oc.get(l);o=o.unionWith(m.view.Wu)}return o}}function d(n,e){return f.apply(this,arguments)}function f(){return f=(0,de.Z)(function*(n,e){const t=Ge(n),r=yield Oh(t.localStore,e.query,!0),o=e.view.nc(r);return t.isPrimaryClient&&bD(t,e.targetId,o.tc),o}),f.apply(this,arguments)}function v(n,e){return E.apply(this,arguments)}function E(){return E=(0,de.Z)(function*(n,e){const t=Ge(n);return BI(t.localStore,e).then(r=>ac(t,r))}),E.apply(this,arguments)}function I(n,e,t,r){return T.apply(this,arguments)}function T(){return T=(0,de.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(l,m){const w=Ge(l),C=Ge(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.An(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):ne.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Ol(o.remoteStore):"acknowledged"===t||"rejected"===t?(p0(o,e,r||null),CD(o,e),m=e,Ge(Ge(o.localStore).mutationQueue).Pn(m)):tt(),yield ac(o,u)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),T.apply(this,arguments)}function k(){return k=(0,de.Z)(function*(n,e){const t=Ge(n);if(Ot(t),An(t),!0===e&&!0!==t.wc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield H(t,r.toArray());t.wc=!0,yield aD(t.remoteStore,!0);for(const u of o)Mp(t.remoteStore,u)}else if(!1===e&&!1!==t.wc){const r=[];let o=Promise.resolve();t.uc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Lp(t,l),xl(t.localStore,l,!0))),Nl(t.remoteStore,l)}),yield o,yield H(t,r),function(u){const l=Ge(u);l.hc.forEach((m,w)=>{Nl(l.remoteStore,w)}),l.lc._s(),l.hc=new Map,l.ac=new qn(ze.comparator)}(t),t.wc=!1,yield aD(t.remoteStore,!1)}}),k.apply(this,arguments)}function H(n,e,t){return Z.apply(this,arguments)}function Z(){return Z=(0,de.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const l of e){let m;const w=r.uc.get(l);if(w&&0!==w.length){m=yield Ml(r.localStore,fi(w[0]));for(const C of w){const A=r.oc.get(C),N=yield d(r,A);N.snapshot&&u.push(N.snapshot)}}else{const C=yield U_(r.localStore,l);m=yield Ml(r.localStore,C),yield c0(r,ge(C),l,!1,m.resumeToken)}o.push(m)}return r.rc.Ho(u),o}),Z.apply(this,arguments)}function ge(n){return PE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function ke(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Si()}function Ke(n,e,t,r){return rt.apply(this,arguments)}function rt(){return rt=(0,de.Z)(function*(n,e,t,r){const o=Ge(n);if(o.wc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const u=o.uc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield BI(o.localStore,FE(u[0])),m=dp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_n.EMPTY_BYTE_STRING);yield ac(o,l,m);break}case"rejected":yield xl(o.localStore,e,!0),Lp(o,e,r);break;default:tt()}}),rt.apply(this,arguments)}function bt(n,e,t){return Me.apply(this,arguments)}function Me(){return Me=(0,de.Z)(function*(n,e,t){const r=Ot(n);if(r.wc){for(const o of e){if(r.uc.has(o)){Ne("SyncEngine","Adding an already active target "+o);continue}const u=yield U_(r.localStore,o),l=yield Ml(r.localStore,u);yield c0(r,ge(u),l.targetId,!1,l.resumeToken),Mp(r.remoteStore,l)}for(const o of t)r.uc.has(o)&&(yield xl(r.localStore,o,!1).then(()=>{Nl(r.remoteStore,o),Lp(r,o)}).catch(Wu))}}),Me.apply(this,arguments)}function Ot(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ED.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lA.bind(null,e),e.rc.Ho=s0.bind(null,e.eventManager),e.rc.gc=o0.bind(null,e.eventManager),e}function An(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dA.bind(null,e),e}class pT{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,de.Z)(function*(){t.Tt=Rl(e.databaseInfo.databaseId),t.sharedClientState=t.Ic(e),t.persistence=t.Tc(e),yield t.persistence.start(),t.localStore=t.Ec(e),t.gcScheduler=t.Ac(e,t.localStore),t.indexBackfillerScheduler=t.Rc(e,t.localStore)})()}Ac(e,t){return null}Rc(e,t){return null}Ec(e){return eT(this.persistence,new Jb,e.initialUser,this.Tt)}Tc(e){return new OI(bp.qs,this.Tt)}Ic(e){return new zI}terminate(){var e=this;return(0,de.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pA extends pT{constructor(e,t,r){super(),this.Pc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,de.Z)(function*(){yield t().call(r,e),yield r.Pc.initialize(r,e),yield An(r.Pc.syncEngine),yield Ol(r.Pc.remoteStore),yield r.persistence.di(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ec(e){return eT(this.persistence,new Jb,e.initialUser,this.Tt)}Ac(e,t){return new N_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Rc(e,t){const r=new ib(t,this.persistence);return new gE(e.asyncQueue,r)}Tc(e){const t=FI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?hs.withCacheSize(this.cacheSizeBytes):hs.DEFAULT;return new L_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ps(),ey(),this.Tt,this.sharedClientState,!!this.forceOwnership)}Ic(e){return new zI}}class hR extends pA{constructor(e,t){super(e,t,!1),this.Pc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,de.Z)(function*(){yield t().call(r,e);const o=r.Pc.syncEngine;r.sharedClientState instanceof GI&&(r.sharedClientState.syncEngine={Br:I.bind(null,o),Lr:Ke.bind(null,o),qr:bt.bind(null,o),Si:ke.bind(null,o),Fr:v.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.di(function(){var u=(0,de.Z)(function*(l){yield function x(n,e){return k.apply(this,arguments)}(r.Pc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}Ic(e){const t=ps();if(!GI.C(t))throw new Se(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=FI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GI(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gT{initialize(e,t){var r=this;return(0,de.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>dT(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=s.bind(null,r.syncEngine),yield aD(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new kl}createDatastore(e){const t=Rl(e.databaseInfo.databaseId),r=new sA(e.databaseInfo);return new ZI(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>dT(this.syncEngine,m,0),l=z_.C()?new z_:new qI,new sT(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,w,C){const A=new yD(r,o,u,l,m,w);return C&&(A.wc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,de.Z)(function*(t){const r=Ge(t);Ne("RemoteStore","RemoteStore shutting down."),r.mu.add(5),yield oc(r),r.yu.shutdown(),r.pu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gA(n,e=10240){let t=0;return{read:()=>(0,de.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,de.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class SD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}vc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fR{constructor(e,t){this.Vc=e,this.Tt=t,this.metadata=new Dr,this.buffer=new Uint8Array,this.Sc=new TextDecoder("utf-8"),this.Dc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.Mu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Mu)}`))},r=>this.metadata.reject(r))}close(){return this.Vc.cancel()}getMetadata(){var e=this;return(0,de.Z)(function*(){return e.metadata.promise})()}yc(){var e=this;return(0,de.Z)(function*(){return yield e.getMetadata(),e.Dc()})()}Dc(){var e=this;return(0,de.Z)(function*(){const t=yield e.Cc();if(null===t)return null;const r=e.Sc.decode(t),o=Number(r);isNaN(o)&&e.xc(`length string (${r}) is not valid number`);const u=yield e.Nc(o);return new uA(JSON.parse(u),t.length+o)})()}kc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Cc(){var e=this;return(0,de.Z)(function*(){for(;e.kc()<0&&!(yield e.$c()););if(0===e.buffer.length)return null;const t=e.kc();t<0&&e.xc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Nc(e){var t=this;return(0,de.Z)(function*(){for(;t.buffer.length<e;)(yield t.$c())&&t.xc("Reached the end of bundle when more is expected.");const r=t.Sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}xc(e){throw this.Vc.cancel(),new Error(`Invalid bundle format: ${e}`)}$c(){var e=this;return(0,de.Z)(function*(){const t=yield e.Vc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pR{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,de.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,de.Z)(function*(u,l){const m=Ge(u),w=bl(m.Tt)+"/documents",C={documents:l.map(Q=>fp(m.Tt,Q))},A=yield m.mo("BatchGetDocuments",w,C,l.length),N=new Map;A.forEach(Q=>{const oe=function bb(n,e){return"found"in e?function(t,r){ut(!!r.found);const o=Ko(t,r.found.name),u=or(r.found.updateTime),l=r.found.createTime?or(r.found.createTime):mt.min(),m=new jr({mapValue:{fields:r.found.fields}});return hn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){ut(!!r.missing),ut(!!r.readTime);const o=Ko(t,r.missing),u=or(r.readTime);return hn.newNoDocument(o,u)}(n,e):tt()}(m.Tt,Q);N.set(oe.key.toString(),oe)});const j=[];return l.forEach(Q=>{const oe=N.get(Q.toString());ut(!!oe),j.push(oe)}),j}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Dh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,de.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=ze.fromPath(o);e.mutations.push(new s_(u,e.precondition(u)))}),yield(r=(0,de.Z)(function*(o,u){const l=Ge(o),m=bl(l.Tt)+"/documents",w={writes:u.map(C=>pp(l.Tt,C))};yield l.lo("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Se(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gR{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.Mc=r.maxAttempts,this.ko=new K_(this.asyncQueue,"transaction_retry")}run(){this.Mc-=1,this.Oc()}Oc(){var e=this;this.ko.vo((0,de.Z)(function*(){const t=new pR(e.datastore),r=e.Fc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Bc(u)}))}).catch(o=>{e.Bc(o)})}))}Fc(e){try{const t=this.updateFunction(e);return!sh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Bc(e){this.Mc>0&&this.Lc(e)?(this.Mc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}Lc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zE(t)}return!1}}class mR{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Ir.UNAUTHENTICATED,this.clientId=Vv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,de.Z)(function*(m){Ne("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ne("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,de.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=kh(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function mA(n,e){return mT.apply(this,arguments)}function mT(){return mT=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,de.Z)(function*(u){r.isEqual(u)||(yield tT(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mT.apply(this,arguments)}function yA(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,de.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vT(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>oD(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>oD(e.remoteStore,u)),n.onlineComponents=e}),yT.apply(this,arguments)}function vT(n){return _T.apply(this,arguments)}function _T(){return _T=(0,de.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield mA(n,new pT)),n.offlineComponents}),_T.apply(this,arguments)}function AD(n){return wT.apply(this,arguments)}function wT(){return wT=(0,de.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield yA(n,new gT)),n.onlineComponents}),wT.apply(this,arguments)}function vA(n){return vT(n).then(e=>e.persistence)}function MD(n){return vT(n).then(e=>e.localStore)}function ET(n){return AD(n).then(e=>e.remoteStore)}function IT(n){return AD(n).then(e=>e.syncEngine)}function uy(n){return DT.apply(this,arguments)}function DT(){return DT=(0,de.Z)(function*(n){const e=yield AD(n),t=e.eventManager;return t.onListen=vD.bind(null,e.syncEngine),t.onUnlisten=l0.bind(null,e.syncEngine),t}),DT.apply(this,arguments)}function wA(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(o,u,l,m,w){const C=new SD({next:N=>{u.enqueueAndForget(()=>kp(o,A));const j=N.docs.has(l);!j&&N.fromCache?w.reject(new Se(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):j&&N.fromCache&&m&&"server"===m.source?w.reject(new Se(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new hD(ho(l.path),C,{includeMetadataChanges:!0,$u:!0});return oy(o,A)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}function EA(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function(o,u,l,m,w){const C=new SD({next:N=>{u.enqueueAndForget(()=>kp(o,A)),N.fromCache&&"server"===m.source?w.reject(new Se(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new hD(l,C,{includeMetadataChanges:!0,$u:!0});return oy(o,A)}(yield uy(n),n.asyncQueue,e,t,r)})),r.promise}const IA=new Map;function CT(n,e,t){if(!t)throw new Se(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DA(n,e,t,r){if(!0===e&&!0===r)throw new Se(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function CA(n){if(!ze.isDocumentKey(n))throw new Se(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bA(n){if(ze.isDocumentKey(n))throw new Se(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xD(n);throw new Se(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TA(n,e){if(e<=0)throw new Se(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class SA{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,DA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Se(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Pv;switch(t.type){case"gapi":return new lE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Se(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=IA.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),IA.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class Ai{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ai(this.firestore,e,this._query)}}class uc extends Ai{constructor(e,t,r){super(e,t,ho(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new ze(e))}withConverter(e){return new uc(this.firestore,e,this._path)}}function MA(n,e,...t){if(n=(0,cn.m9)(n),CT("collection","path",e),n instanceof g0){const r=nn.fromString(e,...t);return bA(r),new uc(n,null,r)}{if(!(n instanceof Wn||n instanceof uc))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return bA(r),new uc(n.firestore,null,r)}}function RD(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=Vv.R()),CT("doc","path",e),n instanceof g0){const r=nn.fromString(e,...t);return CA(r),new Wn(n,null,new ze(r))}{if(!(n instanceof Wn||n instanceof uc))throw new Se(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return CA(r),new Wn(n.firestore,n instanceof uc?n.converter:null,new ze(r))}}function xA(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof Wn||n instanceof uc)&&(e instanceof Wn||e instanceof uc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bT(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof Ai&&e instanceof Ai&&n.firestore===e.firestore&&mh(n._query,e._query)&&n.converter===e.converter}class bR{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new K_(this,"async_queue_retry"),this.Hc=()=>{const t=ey();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ko.Vo()};const e=ey();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const t=ey();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const t=new Dr;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}Zc(){var e=this;return(0,de.Z)(function*(){if(0!==e.Uc.length){try{yield e.Uc[0](),e.Uc.shift(),e.ko.reset()}catch(t){if(!Ku(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Uc.length>0&&e.ko.vo(()=>e.Zc())}})()}Yc(e){const t=this.qc.then(()=>(this.jc=!0,e().catch(r=>{throw this.Qc=r,this.jc=!1,tr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.jc=!1,r))));return this.qc=t,t}enqueueAfterDelay(e,t,r){this.Jc(),this.Wc.indexOf(e)>-1&&(t=0);const o=cD.createAndSchedule(this,e,t,r,u=>this.Xc(u));return this.Gc.push(o),o}Jc(){this.Qc&&tt()}verifyOperationInProgress(){}ta(){var e=this;return(0,de.Z)(function*(){let t;do{t=e.qc,yield t}while(t!==e.qc)})()}ea(e){for(const t of this.Gc)if(t.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Gc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const t=this.Gc.indexOf(e);this.Gc.splice(t,1)}}function TT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class TR{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Kn extends g0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new bR,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||RA(this),this._firestoreClient.terminate()}}function Ar(n){return n._firestoreClient||RA(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function RA(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ob(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new mR(n._authCredentials,n._appCheckCredentials,n._queue,r)}function NA(n,e,t){const r=new Dr;return n.asyncQueue.enqueue((0,de.Z)(function*(){try{yield mA(n,t),yield yA(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===ie.FAILED_PRECONDITION||l.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;gl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function OA(n){if(n._initialized||n._terminated)throw new Se(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cc(_n.fromBase64String(e))}catch(t){throw new Se(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new cc(_n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vp{constructor(e){this._methodName=e}}class ND{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const LR=/^__.*__$/;class VR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms):new ja(e,this.data,t,this.fieldTransforms)}}class PA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ha(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class OD{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.Tt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.ia(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new OD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.aa(e),o}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.oa({path:r,ca:!1});return o.ia(),o}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return FD(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(0===e.length)throw this.fa("Document fields must not be empty");if(kA(this.ra)&&LR.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class UR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.Tt=r||Rl(e)}wa(e,t,r,o=!1){return new OD({ra:e,methodName:t,_a:r,path:Gn.emptyPath(),ca:!1,da:o},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Up(n){const e=n._freezeSettings(),t=Rl(n._databaseId);return new UR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PD(n,e,t,r,o,u={}){const l=n.wa(u.merge||u.mergeFields?2:0,e,t,o);xT("Data must be an object, but it was:",l,r);const m=VA(r,l);let w,C;if(u.merge)w=new dr(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const j=v0(e,N,t);if(!l.contains(j))throw new Se(ie.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);BA(A,j)||A.push(j)}w=new dr(A),C=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,C=l.fieldTransforms;return new VR(new jr(m),w,C)}class y0 extends Vp{_toFieldTransform(e){if(2!==e.ra)throw e.fa(1===e.ra?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof y0}}function FA(n,e,t){return new OD({ra:3,_a:e.settings._a,methodName:n._methodName,ca:t},e.databaseId,e.Tt,e.ignoreUndefinedProperties)}class ST extends Vp{_toFieldTransform(e){return new Eh(e.path,new Dl)}isEqual(e){return e instanceof ST}}class BR extends Vp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=FA(this,e,!0),r=this.ma.map(u=>Bp(u,t)),o=new Cl(r);return new Eh(e.path,o)}isEqual(e){return this===e}}class $R extends Vp{constructor(e,t){super(e),this.ma=t}_toFieldTransform(e){const t=FA(this,e,!0),r=this.ma.map(u=>Bp(u,t)),o=new fo(r);return new Eh(e.path,o)}isEqual(e){return this===e}}class jR extends Vp{constructor(e,t){super(e),this.ga=t}_toFieldTransform(e){const t=new wh(e.Tt,UE(e.Tt,this.ga));return new Eh(e.path,t)}isEqual(e){return this===e}}function AT(n,e,t,r){const o=n.wa(1,e,t);xT("Data must be an object, but it was:",o,r);const u=[],l=jr.empty();Qu(r,(w,C)=>{const A=kD(e,w,t);C=(0,cn.m9)(C);const N=o.ha(A);if(C instanceof y0)u.push(A);else{const j=Bp(C,N);null!=j&&(u.push(A),l.set(A,j))}});const m=new dr(u);return new PA(l,m,o.fieldTransforms)}function MT(n,e,t,r,o,u){const l=n.wa(1,e,t),m=[v0(e,r,t)],w=[o];if(u.length%2!=0)throw new Se(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)m.push(v0(e,u[j])),w.push(u[j+1]);const C=[],A=jr.empty();for(let j=m.length-1;j>=0;--j)if(!BA(C,m[j])){const Q=m[j];let oe=w[j];oe=(0,cn.m9)(oe);const xe=l.ha(Q);if(oe instanceof y0)C.push(Q);else{const Ue=Bp(oe,xe);null!=Ue&&(C.push(Q),A.set(Q,Ue))}}const N=new dr(C);return new PA(A,N,l.fieldTransforms)}function LA(n,e,t,r=!1){return Bp(t,n.wa(r?4:3,e))}function Bp(n,e){if(UA(n=(0,cn.m9)(n)))return xT("Unsupported field value:",e,n),VA(n,e);if(n instanceof Vp)return function(t,r){if(!kA(r.ra))throw r.fa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ca&&4!==e.ra)throw e.fa("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Bp(l,r.la(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return UE(r.Tt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Fn.fromDate(t);return{timestampValue:Th(r.Tt,o)}}if(t instanceof Fn){const o=new Fn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Th(r.Tt,o)}}if(t instanceof ND)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cc)return{bytesValue:c_(r.Tt,t._byteString)};if(t instanceof Wn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.fa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:l_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.fa(`Unsupported field value: ${xD(t)}`)}(n,e)}function VA(n,e){const t={};return ab(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qu(n,(r,o)=>{const u=Bp(o,e.ua(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function UA(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof ND||n instanceof cc||n instanceof Wn||n instanceof Vp)}function xT(n,e,t){if(!UA(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=xD(t);throw e.fa("an object"===r?n+" a custom object":n+" "+r)}var r}function v0(n,e,t){if((e=(0,cn.m9)(e))instanceof Fl)return e._internalPath;if("string"==typeof e)return kD(n,e);throw FD("Field path arguments must be of type string or ",n,!1,void 0,t)}const HR=new RegExp("[~\\*/\\[\\]]");function kD(n,e,t){if(e.search(HR)>=0)throw FD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Fl(...e.split("."))._internalPath}catch{throw FD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FD(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${o}`),w+=")"),new Se(ie.INVALID_ARGUMENT,m+n+w)}function BA(n,e){return n.some(t=>t.isEqual(e))}class _0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new GR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class GR extends _0{data(){return super.data()}}function LD(n,e){return"string"==typeof e?kD(n,e):e instanceof Fl?e._internalPath:e._delegate._internalPath}function $A(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Se(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RT{}class w0 extends RT{}function Vh(n,e,...t){let r=[];e instanceof RT&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof cy).length,l=o.filter(m=>m instanceof E0).length;if(u>1||u>0&&l>0)throw new Se(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class E0 extends w0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new E0(e,t,r)}_apply(e){const t=this._parse(e);return zA(e._query,t),new Ai(e.firestore,e.converter,Dm(e._query,t))}_parse(e){const t=Up(e.firestore);return function(o,u,l,m,w,C,A){let N;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){GA(A,C);const j=[];for(const Q of A)j.push(HA(m,o,Q));N={arrayValue:{values:j}}}else N=HA(m,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||GA(A,C),N=LA(l,"where",A,"in"===C||"not-in"===C);return Jt.create(w,C,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class cy extends RT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cy(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)zA(u,m),u=Dm(u,m)}(e._query,t),new Ai(e.firestore,e.converter,Dm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class NT extends w0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new NT(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new wl(o,u);return function(m,w){if(null===ph(m)){const C=Il(m);null!==C&&qA(0,C,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ai(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new $a(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class VD extends w0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new VD(e,t,r)}_apply(e){return new Ai(e.firestore,e.converter,Cm(e._query,this._limit,this._limitType))}}class UD extends w0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new UD(e,t,r)}_apply(e){const t=jA(e,this.type,this._docOrFields,this._inclusive);return new Ai(e.firestore,e.converter,(o=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class BD extends w0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new BD(e,t,r)}_apply(e){const t=jA(e,this.type,this._docOrFields,this._inclusive);return new Ai(e.firestore,e.converter,(o=t,new $a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function jA(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof _0)return function(o,u,l,m,w){if(!m)throw new Se(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const A of gh(o))if(A.field.isKeyField())C.push(_l(u,m.key));else{const N=m.data.field(A.field);if(Hv(N))throw new Se(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const j=A.field.canonicalString();throw new Se(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${j}' (used as the orderBy) does not exist.`)}C.push(N)}return new Ba(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Up(n.firestore);return function(u,l,m,w,C,A){const N=u.explicitOrderBy;if(C.length>N.length)throw new Se(ie.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const j=[];for(let Q=0;Q<C.length;Q++){const oe=C[Q];if(N[Q].field.isKeyField()){if("string"!=typeof oe)throw new Se(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof oe}`);if(!Ln(u)&&-1!==oe.indexOf("/"))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${oe}' contains a slash.`);const xe=u.path.child(nn.fromString(oe));if(!ze.isDocumentKey(xe))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${xe}' is not because it contains an odd number of segments.`);const Ue=new ze(xe);j.push(_l(l,Ue))}else{const xe=LA(m,w,oe);j.push(xe)}}return new Ba(j,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function HA(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new Se(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ln(e)&&-1!==t.indexOf("/"))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!ze.isDocumentKey(r))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _l(n,new ze(r))}if(t instanceof Wn)return _l(n,t._key);throw new Se(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xD(t)}.`)}function GA(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zA(n,e){if(e.isInequality()){const r=Il(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=ph(n);null!==u&&qA(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Se(ie.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function qA(n,e,t){if(!t.isEqual(e))throw new Se(ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class OT{convertValue(e,t="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Qu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ND(zn(e.latitude),zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=vE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sp(e));default:return null}}convertTimestamp(e){const t=Br(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);ut(__(r));const o=new Ua(r.get(1),r.get(3)),u=new ze(r.popFirst(5));return o.isEqual(t)||tr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function $D(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class JR extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class $p{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ll extends _0{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new I0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class I0 extends Ll{data(e={}){return super.data(e)}}class Uh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new $p(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new I0(this._firestore,this._userDataWriter,r.key,r,new $p(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new I0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $p(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new I0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new $p(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:tN(l.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function KA(n,e){return n instanceof Ll&&e instanceof Ll?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Uh&&e instanceof Uh&&n._firestore===e._firestore&&bT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bh extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new cc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function ZA(n,e,t){n=sn(n,Wn);const r=sn(n.firestore,Kn),o=$D(n.converter,e,t);return ly(r,[PD(Up(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Rn.none())])}function YA(n,e,t,...r){n=sn(n,Wn);const o=sn(n.firestore,Kn),u=Up(o);let l;return l="string"==typeof(e=(0,cn.m9)(e))||e instanceof Fl?MT(u,"updateDoc",n._key,e,t,r):AT(u,"updateDoc",n._key,e),ly(o,[l.toMutation(n._key,Rn.exists(!0))])}function QA(n,...e){var t,r,o;n=(0,cn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||TT(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(TT(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,C,A;if(n instanceof Wn)C=sn(n.firestore,Kn),A=ho(n._key.path),w={next:N=>{e[l]&&e[l](PT(C,n,N))},error:e[l+1],complete:e[l+2]};else{const N=sn(n,Ai);C=sn(N.firestore,Kn),A=N._query;const j=new Bh(C);w={next:Q=>{e[l]&&e[l](new Uh(C,j,N,Q))},error:e[l+1],complete:e[l+2]},$A(n._query)}return function(N,j,Q,oe){const xe=new SD(oe),Ue=new hD(j,xe,Q);return N.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return oy(yield uy(N),Ue)})),()=>{xe.bc(),N.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return kp(yield uy(N),Ue)}))}}(Ar(C),A,m,w)}function ly(n,e){return function(t,r){const o=new Dr;return t.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function wD(n,e,t){return Fp.apply(this,arguments)}(yield IT(t),r,o)})),o.promise}(Ar(n),e)}function PT(n,e,t){const r=t.docs.get(e._key),o=new Bh(n);return new Ll(n,o,e._key,r,new $p(t.hasPendingWrites,t.fromCache),e.converter)}const hN={maxAttempts:5};class XA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Up(e)}set(e,t,r){this._verifyNotCommitted();const o=$h(e,this._firestore),u=$D(o.converter,t,r),l=PD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Rn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=$h(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof Fl?MT(this._dataReader,"WriteBatch.update",u._key,t,r,o):AT(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$h(e,this._firestore);return this._mutations=this._mutations.concat(new Dh(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $h(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new Se(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class fN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Up(e)}get(e){const t=$h(e,this._firestore),r=new JR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new _0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new _0(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=$h(e,this._firestore),u=$D(o.converter,t,r),l=PD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=$h(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof Fl?MT(this._dataReader,"Transaction.update",u._key,t,r,o):AT(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=$h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$h(e,this._firestore),r=new Bh(this._firestore);return super.get(e).then(o=>new Ll(this._firestore,r,t._key,o._document,new $p(!1,!1),t.converter))}}function kT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eM(){if(typeof Uint8Array>"u")throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function tM(){if(!function cb(){return typeof atob<"u"}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){pl=ku.SDK_VERSION,(0,ku._registerComponent)(new Nd.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Kn(new cE(t.getProvider("auth-internal")),new Lv(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Se(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,ku.registerVersion)(Ov,"3.9.0",n),(0,ku.registerVersion)(Ov,"3.9.0","esm2017")}();class D0{constructor(e){this._delegate=e}static fromBase64String(e){return tM(),new D0(cc.fromBase64String(e))}static fromUint8Array(e){return eM(),new D0(cc.fromUint8Array(e))}toBase64(){return tM(),this._delegate.toBase64()}toUint8Array(){return eM(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FT(n){return function IN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class DN{enableIndexedDbPersistence(e,t){return function AR(n,e){OA(n=sn(n,Kn));const t=Ar(n),r=n._freezeSettings(),o=new gT;return NA(t,o,new pA(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function MR(n){OA(n=sn(n,Kn));const e=Ar(n),t=n._freezeSettings(),r=new gT;return NA(e,r,new hR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function xR(n){if(n._initialized&&!n._terminated)throw new Se(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Dr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,de.Z)(function*(){try{yield(t=(0,de.Z)(function*(r){if(!ao.C())return Promise.resolve();const o=r+"main";yield ao.delete(o)}),function(r){return t.apply(this,arguments)})(FI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nM{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ua||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function AA(n,e,t,r={}){var o;const u=(n=sn(n,g0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&gl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Ir.MOCK_USER;else{l=(0,cn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Se(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ir(w)}n._authCredentials=new uE(new ym(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function NR(n){return function yR(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield vA(n),t=yield ET(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.mu.delete(0),Ph(o)}(t)}))}(Ar(n=sn(n,Kn)))}(this._delegate)}disableNetwork(){return function OR(n){return function vR(n){return n.asyncQueue.enqueue((0,de.Z)(function*(){const e=yield vA(n),t=yield ET(n);return e.setNetworkEnabled(!1),(r=(0,de.Z)(function*(o){const u=Ge(o);u.mu.add(0),yield oc(u),u.pu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ar(n=sn(n,Kn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DA("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RR(n){return function(e){const t=new Dr;return e.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return function hA(n,e){return DD.apply(this,arguments)}(yield IT(e),t)})),t.promise}(Ar(n=sn(n,Kn)))}(this._delegate)}onSnapshotsInSync(e){return function lN(n,e){return function ER(n,e){const t=new SD(e);return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return r=yield uy(n),o=t,Ge(r).vu.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return r=yield uy(n),o=t,void Ge(r).vu.delete(o);var r,o}))}}(Ar(n=sn(n,Kn)),TT(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new dy(this,MA(this._delegate,e))}catch(t){throw gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Jo(this,RD(this._delegate,e))}catch(t){throw gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ms(this,function CR(n,e){if(n=sn(n,g0),CT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ai(n,null,(t=e,new $a(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function pN(n,e,t){n=sn(n,Kn);const r=Object.assign(Object.assign({},hN),t);return function(o){if(o.maxAttempts<1)throw new Se(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Dr;return o.asyncQueue.enqueueAndForget((0,de.Z)(function*(){const w=yield function _A(n){return AD(n).then(e=>e.datastore)}(o);new gR(o.asyncQueue,w,l,u,m).run()})),m.promise}(Ar(n),o=>e(new fN(n,o)),r)}(this._delegate,t=>e(new rM(this,t)))}batch(){return Ar(this._delegate),new iM(new XA(this._delegate,e=>ly(this._delegate,e)))}loadBundle(e){return function PR(n,e){const t=Ar(n=sn(n,Kn)),r=new TR;return function IR(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return gA(w,C);if(w instanceof ArrayBuffer)return gA(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new fR(w,l);var w}(t,Rl(e));n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){!function ar(n,e,t){const r=Ge(n);var o;(o=(0,de.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(j,Q){const oe=Ge(j),xe=or(Q.createTime);return oe.persistence.runTransaction("hasNewerBundle","readonly",Ue=>oe.$s.getBundleMetadata(Ue,Q.id)).then(Ue=>!!Ue&&Ue.createTime.compareTo(xe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(j=w).totalDocuments,bytesLoaded:j.totalBytes,totalDocuments:j.totalDocuments,totalBytes:j.totalBytes}),Promise.resolve(new Set);m._updateProgress(a0(w));const C=new cA(w,u.localStore,l.Tt);let A=yield l.yc();for(;A;){const j=yield C.Bu(A);j&&m._updateProgress(j),A=yield l.yc()}const N=yield C.complete();return yield ac(u,N.Uu,void 0),yield function(j,Q){const oe=Ge(j);return oe.persistence.runTransaction("Save bundle","readwrite",xe=>oe.$s.saveBundleMetadata(xe,Q))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.qu)}catch(w){return gl("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var j}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield IT(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function kR(n,e){return function DR(n,e){return n.asyncQueue.enqueue((0,de.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.$s.getNamedQuery(u,r))}(yield MD(n),e)}))}(Ar(n=sn(n,Kn)),e).then(t=>t?new Ai(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ms(this,t):null)}}class jD extends OT{constructor(e){super(),this.firestore=e}convertBytes(e){return new D0(new cc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Jo.forKey(t,this.firestore,null)}}class rM{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}get(e){const t=Hp(e);return this._delegate.get(t).then(r=>new C0(this._firestore,new Ll(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Hp(e);return r?(kT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}}class iM{constructor(e){this._delegate=e}set(e,t,r){const o=Hp(e);return r?(kT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Hp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Hp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new I0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new b0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=jp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new jp(e,new jD(e),t),o.set(t,u)),u}}jp.INSTANCES=new WeakMap;class Jo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Jo(t,new Wn(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new Jo(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new dy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new dy(this.firestore,MA(this._delegate,e))}catch(t){throw gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof Wn&&xA(this._delegate,e)}set(e,t){t=kT("DocumentReference.set",t);try{return t?ZA(this._delegate,e,t):ZA(this._delegate,e)}catch(r){throw gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?YA(this._delegate,e):YA(this._delegate,e,t,...r)}catch(o){throw gs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function uN(n){return ly(sn(n.firestore,Kn),[new Dh(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=sM(e),r=oM(e,o=>new C0(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return QA(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function rN(n){n=sn(n,Wn);const e=sn(n.firestore,Kn),t=Ar(e),r=new Bh(e);return function _R(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(r=(0,de.Z)(function*(o,u,l){try{const m=yield function(w,C){const A=Ge(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,C))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Se(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=kh(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield MD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ll(e,r,n._key,o,new $p(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function iN(n){n=sn(n,Wn);const e=sn(n.firestore,Kn);return wA(Ar(e),n._key,{source:"server"}).then(t=>PT(e,n,t))}(this._delegate):function nN(n){n=sn(n,Wn);const e=sn(n.firestore,Kn);return wA(Ar(e),n._key).then(t=>PT(e,n,t))}(this._delegate),t.then(r=>new C0(this.firestore,new Ll(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Jo(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function gs(n,e,t){return n.message=n.message.replace(e,t),n}function sM(n){for(const e of n)if("object"==typeof e&&!FT(e))return e;return{}}function oM(n,e){var t,r;let o;return o=FT(n[0])?n[0]:FT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class C0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Jo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return KA(this._delegate,e._delegate)}}class b0 extends C0{data(e){const t=this._delegate.data(e);return function eb(n,e){n||tt()}(void 0!==t),t}}class ms{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}where(e,t,r){try{return new ms(this.firestore,Vh(this._delegate,function zR(n,e,t){const r=e,o=LD("where",n);return E0._create(o,r,t)}(e,t,r)))}catch(o){throw gs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ms(this.firestore,Vh(this._delegate,function qR(n,e="asc"){const t=e,r=LD("orderBy",n);return NT._create(r,t)}(e,t)))}catch(r){throw gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ms(this.firestore,Vh(this._delegate,function WR(n){return TA("limit",n),VD._create("limit",n,"F")}(e)))}catch(t){throw gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ms(this.firestore,Vh(this._delegate,function KR(n){return TA("limitToLast",n),VD._create("limitToLast",n,"L")}(e)))}catch(t){throw gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ms(this.firestore,Vh(this._delegate,function ZR(...n){return UD._create("startAt",n,!0)}(...e)))}catch(t){throw gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ms(this.firestore,Vh(this._delegate,function YR(...n){return UD._create("startAfter",n,!1)}(...e)))}catch(t){throw gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ms(this.firestore,Vh(this._delegate,function QR(...n){return BD._create("endBefore",n,!1)}(...e)))}catch(t){throw gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ms(this.firestore,Vh(this._delegate,function XR(...n){return BD._create("endAt",n,!0)}(...e)))}catch(t){throw gs(t,"endAt()","Query.endAt()")}}isEqual(e){return bT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function oN(n){n=sn(n,Ai);const e=sn(n.firestore,Kn),t=Ar(e),r=new Bh(e);return function wR(n,e){const t=new Dr;return n.asyncQueue.enqueueAndForget((0,de.Z)(function*(){return(r=(0,de.Z)(function*(o,u,l){try{const m=yield Oh(o,u,!0),w=new gD(u,m.Yi),C=w.Hu(m.documents),A=w.applyChanges(C,!1);l.resolve(A.snapshot)}catch(m){const w=kh(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield MD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Uh(e,r,n,o))}(this._delegate):"server"===e?.source?function aN(n){n=sn(n,Ai);const e=sn(n.firestore,Kn),t=Ar(e),r=new Bh(e);return EA(t,n._query,{source:"server"}).then(o=>new Uh(e,r,n,o))}(this._delegate):function sN(n){n=sn(n,Ai);const e=sn(n.firestore,Kn),t=Ar(e),r=new Bh(e);return $A(n._query),EA(t,n._query).then(o=>new Uh(e,r,n,o))}(this._delegate),t.then(r=>new LT(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sM(e),r=oM(e,o=>new LT(this.firestore,new Uh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return QA(this._delegate,t,r)}withConverter(e){return new ms(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}class bN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new b0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ms(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new b0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new bN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new b0(this._firestore,r))})}isEqual(e){return KA(this._delegate,e._delegate)}}class dy extends ms{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Jo(this.firestore,e):null}doc(e){try{return new Jo(this.firestore,void 0===e?RD(this._delegate):RD(this._delegate,e))}catch(t){throw gs(t,"doc()","CollectionReference.doc()")}}add(e){return function cN(n,e){const t=sn(n.firestore,Kn),r=RD(n),o=$D(n.converter,e);return ly(t,[PD(Up(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Rn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Jo(this.firestore,t))}isEqual(e){return xA(this._delegate,e._delegate)}withConverter(e){return new dy(this.firestore,this._delegate.withConverter(e?jp.getInstance(this.firestore,e):null))}}function Hp(n){return sn(n,Wn)}class VT{constructor(...e){this._delegate=new Fl(...e)}static documentId(){return new VT(Gn.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof Fl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Gp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function mN(){return new ST("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Gp(e)}static delete(){const e=function gN(){return new y0("deleteField")}();return e._methodName="FieldValue.delete",new Gp(e)}static arrayUnion(...e){const t=function yN(...n){return new BR("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Gp(t)}static arrayRemove(...e){const t=function vN(...n){return new $R("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Gp(t)}static increment(e){const t=function _N(n){return new jR("increment",n)}(e);return t._methodName="FieldValue.increment",new Gp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const TN={Firestore:nM,GeoPoint:ND,Timestamp:Fn,Blob:D0,Transaction:rM,WriteBatch:iM,DocumentReference:Jo,DocumentSnapshot:C0,Query:ms,QueryDocumentSnapshot:b0,QuerySnapshot:LT,CollectionReference:dy,FieldPath:VT,FieldValue:Gp,setLogLevel:function CN(n){!function JC(n){La.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function AN(n){(function SN(n,e){n.INTERNAL.registerComponent(new Nd.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},TN)))})(n,(e,t)=>new nM(e,t,new DN)),n.registerVersion("@firebase/firestore-compat","0.3.5")}(Vg.Z);var jh=P(7579),MN=P(6451),HD=P(5363);function mi(n,e){return(0,Ti.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,Pn.x)(r,w=>{o?.unsubscribe();let C=0;const A=u++;(0,Da.Xf)(n(w,A)).subscribe(o=(0,Pn.x)(r,N=>r.next(e?e(w,N,A,C++):N),()=>{o=null,m()}))},()=>{l=!0,m()}))})}var xN=P(6063);class RN extends jh.x{constructor(e=1/0,t=1/0,r=xN.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var NN=P(3099);function aM(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,NN.B)({connector:()=>new RN(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}var uM=P(3888);const GD=(0,uM.d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Hh=P(515);function T0(n){return n<=0?()=>Hh.E:(0,Ti.e)((e,t)=>{let r=0;e.subscribe((0,Pn.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function zD(n){return(0,Ti.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function cM(n=ON){return(0,Ti.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function ON(){return new GD}function Vl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((o,u)=>n(o,u,r)):Rf.y,T0(1),t?zD(e):cM(()=>new GD))}var UT=P(576);function lM(n,e){return(0,UT.m)(e)?mi(()=>n,e):mi(()=>n)}var BT=P(9468);P(259);const jT=new Map,hM={activated:!1,tokenObservers:[]},VN={initialized:!1,enabled:!1};function Mi(n){return jT.get(n)||Object.assign({},hM)}function WD(){return VN}class GN{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,de.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield function zN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ys=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function pM(n){if(!Mi(n).activated)throw ys.create("use-before-activation",{appName:n.name})}function zT(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,de.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw ys.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw ys.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw ys.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}}),qT.apply(this,arguments)}function ZN(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const S0="firebase-app-check-store";let YD=null;function mM(){return YD||(YD=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ys.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(S0,{keyPath:"compositeKey"})}}catch(t){e(ys.create("storage-open",{originalErrorMessage:t?.message}))}}),YD)}function WT(){return WT=(0,de.Z)(function*(n,e){const r=(yield mM()).transaction(S0,"readwrite"),u=r.objectStore(S0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var C;m(ys.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),WT.apply(this,arguments)}const A0=new Fu.Yd("@firebase/app-check");function YT(n,e){return(0,cn.hl)()?function JN(n,e){return function yM(n,e){return WT.apply(this,arguments)}(function _M(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{A0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wM(){return WD().enabled}function EM(){return XT.apply(this,arguments)}function XT(){return XT=(0,de.Z)(function*(){const n=WD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),XT.apply(this,arguments)}const sO={error:"UNKNOWN_ERROR"};function oO(n){return cn.US.encodeString(JSON.stringify(n),!1)}function QD(n){return JT.apply(this,arguments)}function JT(){return JT=(0,de.Z)(function*(n,e=!1){const t=n.app;pM(t);const r=Mi(t);let u,o=r.token;if(o&&!hy(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(hy(w)?o=w:yield YT(t,void 0))}if(!e&&o&&hy(o))return{token:o.token};let m,l=!1;if(wM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=zT(ZN(t,yield EM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield YT(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Mi(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?A0.warn(w.message):A0.error(w),u=w}return o?u?m=hy(o)?{token:o.token,internalError:u}:CM(u):(m={token:o.token},r.token=o,yield YT(t,o)):m=CM(u),l&&DM(t,m),m}),JT.apply(this,arguments)}function tS(n,e){const t=Mi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function IM(n){const{app:e}=n,t=Mi(e);let r=t.tokenRefresher;r||(r=function aO(n){const{app:e}=n;return new GN((0,de.Z)(function*(){let r;if(r=Mi(e).token?yield QD(n,!0):yield QD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function DM(n,e){const t=Mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function hy(n){return n.expireTimeMillis-Date.now()>0}function CM(n){return{token:oO(sO),error:n}}class uO{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mi(this.app);for(const t of e)tS(this.app,t.next);return Promise.resolve()}}const NM="app-check-internal";!function IO(){(0,ku._registerComponent)(new Nd.wA("app-check",n=>function cO(n,e){return new uO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(NM).initialize()})),(0,ku._registerComponent)(new Nd.wA(NM,n=>function lO(n){return{getToken:e=>QD(n,e),addTokenListener:e=>function eS(n,e,t,r){const{app:o}=n,u=Mi(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&hy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),IM(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>IM(n))}(n,"INTERNAL",e),removeTokenListener:e=>tS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ku.registerVersion)("@firebase/app-check","0.6.4")}();class sS{constructor(){return(0,Lr.vb)("app-check")}}typeof window<"u"&&window;var SO=P(9260);const PM=new g.OlP("angularfire2.auth.use-emulator"),kM=new g.OlP("angularfire2.auth.settings"),FM=new g.OlP("angularfire2.auth.tenant-id"),LM=new g.OlP("angularfire2.auth.langugage-code"),VM=new g.OlP("angularfire2.auth.use-device-language"),UM=new g.OlP("angularfire.auth.persistence"),BM=(n,e,t,r,o,u,l,m)=>(0,$o.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),l)for(const[C,A]of Object.entries(l))w.settings[C]=A;return m&&w.setPersistence(m),w},[t,r,o,u,l,m]);let $M=(()=>{class n{constructor(t,r,o,u,l,m,w,C,A,N,j,Q){const oe=new jh.x,xe=gt(void 0).pipe((0,HD.Q)(l.outsideAngular),mi(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,8971)))),(0,wt.U)(()=>(0,$o.on)(t,u,r)),(0,wt.U)(Ue=>BM(Ue,u,m,C,A,N,w,j)),aM({bufferSize:1,refCount:!1}));if(Ja(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=gt(null);else{xe.pipe(Vl()).subscribe();const jt=xe.pipe(mi(Ht=>Ht.getRedirectResult().then(Bt=>Bt,()=>null)),Lr.iC,aM({bufferSize:1,refCount:!1})),tn=xe.pipe(mi(Ht=>new Jr.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Ht.onAuthStateChanged(Wt=>Bt.next(Wt),Wt=>Bt.error(Wt),()=>Bt.complete()))})))),Rt=xe.pipe(mi(Ht=>new Jr.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Ht.onIdTokenChanged(Wt=>Bt.next(Wt),Wt=>Bt.error(Wt),()=>Bt.complete()))}))));this.authState=jt.pipe(lM(tn),(0,BT.R)(l.outsideAngular),(0,HD.Q)(l.insideAngular)),this.user=jt.pipe(lM(Rt),(0,BT.R)(l.outsideAngular),(0,HD.Q)(l.insideAngular)),this.idToken=this.user.pipe(mi(Ht=>Ht?(0,qt.D)(Ht.getIdToken()):gt(null))),this.idTokenResult=this.user.pipe(mi(Ht=>Ht?(0,qt.D)(Ht.getIdTokenResult()):gt(null))),this.credential=(0,MN.T)(jt,oe,this.authState.pipe(no(Ht=>!Ht))).pipe((0,wt.U)(Ht=>Ht?.user?Ht:null),(0,BT.R)(l.outsideAngular),(0,HD.Q)(l.insideAngular))}return(0,$o.pX)(this,xe,u,{spy:{apply:(Ue,jt,tn)=>{(Ue.startsWith("signIn")||Ue.startsWith("createUser"))&&tn.then(Rt=>oe.next(Rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($o.Dh),g.LFG($o.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Lr.HU),g.LFG(PM,8),g.LFG(kM,8),g.LFG(FM,8),g.LFG(LM,8),g.LFG(VM,8),g.LFG(UM,8),g.LFG(sS,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function jM(n,e){return function MO(n,e=RC.z){return new Jr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function aS(n,e){return jM(n,e).pipe((0,wt.U)(t=>({payload:t,type:"query"})))}function JD(n,e){return aS(n,e).pipe(Rd(void 0),Fg(),(0,wt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=o.find(A=>A.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function HM(n,e,t){return JD(n,t).pipe(to((r,o)=>function RO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function NO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return uS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return uS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return uS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Ky(n,e=Rf.y){return n=n??Lg,(0,Ti.e)((t,r)=>{let o,u=!0;t.subscribe((0,Pn.x)(r,l=>{const m=e(l);(u||!n(o,m))&&(u=!1,o=m,r.next(l))}))})}(),(0,wt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function uS(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function GM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=JD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,wt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Rd(void 0),Fg(),no(([r,o])=>o.length>0||!r),(0,wt.U)(([r,o])=>o),Lr.iC)}auditTrail(e){return this.stateChanges(e).pipe(to((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return HM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}valueChanges(e={}){return aS(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Lr.iC)}get(e){return(0,qt.D)(this.query.get(e)).pipe(Lr.iC)}add(e){return this.ref.add(e)}doc(e){return new qM(this.ref.doc(e),this.afs)}}class qM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=ZM(r,t);return new zM(o,u,this.afs)}snapshotChanges(){return function xO(n,e){return jM(n,e).pipe(Rd(void 0),Fg(),(0,wt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,wt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,qt.D)(this.ref.get(e)).pipe(Lr.iC)}}class OO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?JD(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),no(t=>t.length>0),Lr.iC):JD(this.query,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}auditTrail(e){return this.stateChanges(e).pipe(to((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=GM(e);return HM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Lr.iC)}valueChanges(e={}){return aS(this.query,this.afs.schedulers.outsideAngular).pipe((0,wt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Lr.iC)}get(e){return(0,qt.D)(this.query.get(e)).pipe(Lr.iC)}}const WM=new g.OlP("angularfire2.enableFirestorePersistence"),KM=new g.OlP("angularfire2.firestore.persistenceSettings"),PO=new g.OlP("angularfire2.firestore.settings"),kO=new g.OlP("angularfire2.firestore.use-emulator");function ZM(n,e=(t=>t)){return{query:e(n),ref:n}}let YM=(()=>{class n{constructor(t,r,o,u,l,m,w,C,A,N,j,Q,oe,xe,Ue,jt,tn){this.schedulers=w;const Rt=(0,$o.on)(t,m,r),Ht=A;N&&BM(Rt,m,j,oe,xe,Ue,Q,jt),[this.firestore,this.persistenceEnabled$]=(0,$o.cc)(`${Rt.name}.firestore`,"AngularFirestore",Rt.name,()=>{const Bt=m.runOutsideAngular(()=>Rt.firestore());if(u&&Bt.settings(u),Ht&&Bt.useEmulator(...Ht),o&&!Ja(l)){const Wt=()=>{try{return(0,qt.D)(Bt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(yi){return typeof console<"u"&&console.warn(yi),gt(!1)}};return[Bt,m.runOutsideAngular(Wt)]}return[Bt,gt(!1)]},[u,Ht,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=ZM(o,r),m=this.schedulers.ngZone.run(()=>u);return new zM(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new OO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new qM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($o.Dh),g.LFG($o.xv,8),g.LFG(WM,8),g.LFG(PO,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Lr.HU),g.LFG(KM,8),g.LFG(kO,8),g.LFG($M,8),g.LFG(PM,8),g.LFG(kM,8),g.LFG(FM,8),g.LFG(LM,8),g.LFG(VM,8),g.LFG(UM,8),g.LFG(sS,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),FO=(()=>{class n{constructor(){SO.Z.registerVersion("angularfire",Lr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:WM,useValue:!0},{provide:KM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[YM]}),n})();class Qa extends jh.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var VO=P(9672);function QM(...n){const e=(0,$i.yG)(n),t=(0,$i.jO)(n),{args:r,keys:o}=Bi(n);if(0===r.length)return(0,qt.D)([],e);const u=new Jr.y(function UO(n,e,t=Rf.y){return r=>{XM(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let w=0;w<o;w++)XM(e,()=>{const C=(0,qt.D)(n[w],e);let A=!1;C.subscribe((0,Pn.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>M(o,l):Rf.y));return t?u.pipe(b(t)):u}function XM(n,e,t){n?(0,VO.f)(t,n,e):e()}function JM(n){return new Jr.y(e=>{(0,Da.Xf)(n()).subscribe(e)})}var BO=P(9635);function M0(n,e){const t=(0,UT.m)(n)?n:()=>n,r=o=>o.error(t());return new Jr.y(e?o=>e.schedule(r,0,o):r)}var ex=P(727);function cS(){return(0,Ti.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class tx extends Jr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Ti.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ex.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ex.w0.EMPTY)}return e}refCount(){return cS()(this)}}var vs=P(5577);function zp(n,e){return(0,UT.m)(e)?(0,vs.z)(n,e,1):(0,vs.z)(n,1)}var Qi=P(8505);function Gh(n){return(0,Ti.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Pn.x)(t,void 0,void 0,l=>{u=(0,Da.Xf)(n(l,Gh(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function lS(n){return n<=0?()=>Hh.E:(0,Ti.e)((e,t)=>{let r=[];e.subscribe((0,Pn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function nx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?no((o,u)=>n(o,u,r)):Rf.y,lS(1),t?zD(e):cM(()=>new GD))}function dS(n){return(0,Ti.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",x0=Symbol("RouteTitle");class HO{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function fy(n){return new HO(n)}function GO(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function lc(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!rx(n[o],e[o]))return!1;return!0}function rx(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function ix(n){return Array.prototype.concat.apply([],n)}function sx(n){return n.length>0?n[n.length-1]:null}function xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function zh(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,qt.D)(Promise.resolve(n)):gt(n)}const eC=!1,qO={exact:function ux(n,e,t){if(!Wp(n.segments,e.segments)||!tC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!ux(n.children[r],e.children[r],t))return!1;return!0},subset:cx},ox={exact:function WO(n,e){return lc(n,e)},subset:function KO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rx(n[t],e[t]))},ignored:()=>!0};function ax(n,e,t){return qO[t.paths](n.root,e.root,t.matrixParams)&&ox[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function cx(n,e,t){return lx(n,e,e.segments,t)}function lx(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Wp(o,t)||e.hasChildren()||!tC(o,t,r))}if(n.segments.length===t.length){if(!Wp(n.segments,t)||!tC(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!cx(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Wp(n.segments,o)&&tC(n.segments,o,r)&&n.children[zt])&&lx(n.children[zt],e,u,r)}}function tC(n,e,t){return e.every((r,o)=>ox[t](n[o].parameters,r.parameters))}class qp{constructor(e=new en([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fy(this.queryParams)),this._queryParamMap}toString(){return QO.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,xi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nC(this)}}class R0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=fy(this.parameters)),this._parameterMap}toString(){return fx(this)}}function Wp(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let N0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new hS},providedIn:"root"}),n})();class hS{parse(e){const t=new oP(e);return new qp(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${O0(e.root,!0)}`,r=function eP(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${rC(t)}=${rC(o)}`).join("&"):`${rC(t)}=${rC(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function XO(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const QO=new hS;function nC(n){return n.segments.map(e=>fx(e)).join("/")}function O0(n,e){if(!n.hasChildren())return nC(n);if(e){const t=n.children[zt]?O0(n.children[zt],!1):"",r=[];return xi(n.children,(o,u)=>{u!==zt&&r.push(`${u}:${O0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function YO(n,e){let t=[];return xi(n.children,(r,o)=>{o===zt&&(t=t.concat(e(r,o)))}),xi(n.children,(r,o)=>{o!==zt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===zt?[O0(n.children[zt],!1)]:[`${o}:${O0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${nC(n)}/${t[0]}`:`${nC(n)}/(${t.join("//")})`}}function dx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rC(n){return dx(n).replace(/%3B/gi,";")}function fS(n){return dx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iC(n){return decodeURIComponent(n)}function hx(n){return iC(n.replace(/\+/g,"%20"))}function fx(n){return`${fS(n.path)}${function JO(n){return Object.keys(n).map(e=>`;${fS(e)}=${fS(n[e])}`).join("")}(n.parameters)}`}const tP=/^[^\/()?;=#]+/;function sC(n){const e=n.match(tP);return e?e[0]:""}const nP=/^[^=?&#]+/,iP=/^[^&#]+/;class oP{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new en(e,t)),r}parseSegment(){const e=sC(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,eC);return this.capture(e),new R0(iC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sC(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=sC(this.remaining);o&&(r=o,this.capture(r))}e[iC(t)]=iC(r)}parseQueryParam(e){const t=function rP(n){const e=n.match(nP);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function sP(n){const e=n.match(iP);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=hx(t),u=hx(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sC(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,eC);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=zt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[zt]:new en([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,eC)}}function pS(n){return n.segments.length>0?new en([],{[zt]:n}):n}function oC(n){const e={};for(const r of Object.keys(n.children)){const u=oC(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function aP(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}function Kp(n){return n instanceof qp}function lP(n,e,t,r,o){if(0===t.length)return py(e.root,e.root,e.root,r,o);const u=function mx(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new gx(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return xi(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new gx(t,e,r)}(t);return u.toRoot()?py(e.root,e.root,new en([],{}),r,o):function l(w){const C=function hP(n,e,t,r){if(n.isAbsolute)return new gy(e.root,!0,0);if(-1===r)return new gy(t,t===e.root,0);return function yx(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new gy(r,!1,o-u)}(t,r+(P0(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=C.processChildren?my(C.segmentGroup,C.index,u.commands):mS(C.segmentGroup,C.index,u.commands);return py(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function P0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function k0(n){return"object"==typeof n&&null!=n&&n.outlets}function py(n,e,t,r,o){let l,u={};r&&xi(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:px(n,e,t);const m=pS(oC(l));return new qp(m,u,o)}function px(n,e,t){const r={};return xi(n.children,(o,u)=>{r[u]=o===e?t:px(o,e,t)}),new en(n.segments,r)}class gx{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&P0(r[0]))throw new g.vHH(4003,!1);const o=r.find(k0);if(o&&o!==sx(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gy{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function mS(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return my(n,e,t);const r=function pP(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(k0(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!_x(w,C,l))return u;r+=2}else{if(!_x(w,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new en(n.segments.slice(0,r.pathIndex),{});return u.children[zt]=new en(n.segments.slice(r.pathIndex),n.children),my(u,0,o)}return r.match&&0===o.length?new en(n.segments,{}):r.match&&!n.hasChildren()?yS(n,e,t):r.match?my(n,0,o):yS(n,e,t)}function my(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function fP(n){return k0(n[0])?n[0].outlets:{[zt]:n}}(t),o={};return!r[zt]&&n.children[zt]&&1===n.numberOfChildren&&0===n.children[zt].segments.length?my(n.children[zt],e,t):(xi(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=mS(n.children[l],e,u))}),xi(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new en(n.segments,o))}}function yS(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(k0(u)){const w=gP(u.outlets);return new en(r,w)}if(0===o&&P0(t[0])){r.push(new R0(n.segments[e].path,vx(t[0]))),o++;continue}const l=k0(u)?u.outlets[zt]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&P0(m)?(r.push(new R0(l,vx(m))),o+=2):(r.push(new R0(l,{})),o++)}return new en(r,{})}function gP(n){const e={};return xi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=yS(new en([],{}),0,t))}),e}function vx(n){const e={};return xi(n,(t,r)=>e[r]=`${t}`),e}function _x(n,e,t){return n==t.path&&lc(e,t.parameters)}const F0="imperative";class dc{constructor(e,t){this.id=e,this.url=t}}class vS extends dc{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zp extends dc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class aC extends dc{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wx extends dc{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class Ex extends dc{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class mP extends dc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yP extends dc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vP extends dc{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class _P extends dc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wP extends dc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EP{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class IP{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class DP{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CP{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bP{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TP{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ix{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let AP=(()=>{class n{createUrlTree(t,r,o,u,l,m){return lP(t||r.root,o,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),MP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(e){return AP.\u0275fac(e)},providedIn:"root"}),n})();class Dx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=_S(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=_S(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=wS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return wS(e,this._root).map(t=>t.value)}}function _S(n,e){if(n===e.value)return e;for(const t of e.children){const r=_S(n,t);if(r)return r}return null}function wS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=wS(n,t);if(r.length)return r.unshift(e),r}return[]}class Ul{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function yy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Cx extends Dx{constructor(e,t){super(e),this.snapshot=t,ES(this,e)}toString(){return this.snapshot.toString()}}function bx(n,e){const t=function xP(n,e){const l=new uC([],{},{},"",{},zt,e,null,n.root,-1,{});return new Sx("",new Ul(l,[]))}(n,e),r=new Qa([new R0("",{})]),o=new Qa({}),u=new Qa({}),l=new Qa({}),m=new Qa(""),w=new vy(r,o,l,m,u,zt,e,t.root);return w.snapshot=t.root,new Cx(new Ul(w,[]),t)}class vy{constructor(e,t,r,o,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,wt.U)(C=>C[x0]))??gt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,wt.U)(e=>fy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,wt.U)(e=>fy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tx(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function RP(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uC{get title(){return this.data?.[x0]}constructor(e,t,r,o,u,l,m,w,C,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sx extends Dx{constructor(e,t){super(t),this.url=e,ES(this,t)}toString(){return Ax(this._root)}}function ES(n,e){e.value._routerState=n,e.children.forEach(t=>ES(n,t))}function Ax(n){const e=n.children.length>0?` { ${n.children.map(Ax).join(", ")} } `:"";return`${n.value}${e}`}function IS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,lc(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),lc(e.params,t.params)||n.params.next(t.params),function zO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!lc(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),lc(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function DS(n,e){const t=lc(n.params,e.params)&&function ZO(n,e){return Wp(n,e)&&n.every((t,r)=>lc(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||DS(n.parent,e.parent))}function L0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function OP(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return L0(n,r,o);return L0(n,r)})}(n,e,t);return new Ul(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>L0(n,m)),l}}const r=function PP(n){return new vy(new Qa(n.url),new Qa(n.params),new Qa(n.queryParams),new Qa(n.fragment),new Qa(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>L0(n,u));return new Ul(r,o)}}const CS="ngNavigationCancelingError";function Mx(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Kp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=xx(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function xx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[CS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Rx(n){return Nx(n)&&Kp(n.url)}function Nx(n){return n&&n[CS]}class kP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new V0,this.attachRef=null}}let V0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kP,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cC=!1;let Ox=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=zt,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(V0),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,cC);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,cC);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,cC);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,cC);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new FP(t,m,o.injector);if(r&&function LP(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(l);this.activated=o.createComponent(C,o.length,w)}else this.activated=o.createComponent(l,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),n})();class FP{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===vy?this.route:e===V0?this.childContexts:this.parent.get(e,t)}}let bS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[Ox],encapsulation:2}),n})();function Px(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function SS(n){const e=n.children&&n.children.map(SS),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=bS),t}function ea(n){return n.outlet||zt}function kx(n,e){const t=n.filter(r=>ea(r)===e);return t.push(...n.filter(r=>ea(r)!==e)),t}function U0(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jP{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),IS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=yy(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),xi(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=yy(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=yy(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=yy(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new TP(u.value.snapshot))}),e.children.length&&this.forwardEvent(new CP(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(IS(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),IS(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=U0(o.snapshot),w=m?.get(g._Vd)??null;l.attachRef=null,l.route=o,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class Fx{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class lC{constructor(e,t){this.component=e,this.route=t}}function HP(n,e,t){const r=n._root;return B0(r,e?e._root:null,t,[r.value])}function _y(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function B0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=yy(e);return n.children.forEach(l=>{(function zP(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function qP(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Wp(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Wp(n.url,e.url)||!lc(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!DS(n,e)||!lc(n.queryParams,e.queryParams);default:return!DS(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Fx(r)):(u.data=l.data,u._resolvedData=l._resolvedData),B0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new lC(m.outlet.component,l))}else l&&$0(e,m,o),o.canActivateChecks.push(new Fx(r)),B0(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),xi(u,(l,m)=>$0(l,t.getContext(m),o)),o}function $0(n,e,t){const r=yy(n),o=n.value;xi(r,(u,l)=>{$0(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new lC(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function j0(n){return"function"==typeof n}function AS(n){return n instanceof GD||"EmptyError"===n?.name}const dC=Symbol("INITIAL_VALUE");function wy(){return mi(n=>QM(n.map(e=>e.pipe(T0(1),Rd(dC)))).pipe((0,wt.U)(e=>{for(const t of e)if(!0!==t){if(t===dC)return dC;if(!1===t||t instanceof qp)return t}return!0}),no(e=>e!==dC),T0(1)))}function Lx(n){return(0,BO.z)((0,Qi.b)(e=>{if(Kp(e))throw Mx(0,e)}),(0,wt.U)(e=>!0===e))}const MS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Vx(n,e,t,r,o){const u=xS(n,e,t);return u.matched?function ck(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?gt(o.map(l=>{const m=_y(l,n);return zh(function XP(n){return n&&j0(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(wy(),Lx()):gt(!0)}(r=Px(e,r),e,t).pipe((0,wt.U)(l=>!0===l?u:{...MS})):gt(u)}function xS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...MS}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||GO)(t,n,e);if(!o)return{...MS};const u={};xi(o.posParams,(m,w)=>{u[w]=m.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function hC(n,e,t,r){if(t.length>0&&function hk(n,e,t){return t.some(r=>fC(n,e,r)&&ea(r)!==zt)}(n,t,r)){const u=new en(e,function dk(n,e,t,r){const o={};o[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ea(u)!==zt){const l=new en([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[ea(u)]=l}return o}(n,e,r,new en(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function fk(n,e,t){return t.some(r=>fC(n,e,r))}(n,t,r)){const u=new en(n.segments,function lk(n,e,t,r,o){const u={};for(const l of r)if(fC(n,t,l)&&!o[ea(l)]){const m=new en([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[ea(l)]=m}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new en(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function fC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ux(n,e,t,r){return!!(ea(n)===r||r!==zt&&fC(e,t,n))&&("**"===n.path||xS(e,n,t).matched)}function Bx(n,e,t){return 0===e.length&&!n.children[t]}const pC=!1;class gC{constructor(e){this.segmentGroup=e||null}}class $x{constructor(e){this.urlTree=e}}function H0(n){return M0(new gC(n))}function jx(n){return M0(new $x(n))}class yk{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=hC(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,wt.U)(u=>this.createUrlTree(oC(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gh(u=>{if(u instanceof $x)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof gC?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,wt.U)(o=>this.createUrlTree(oC(o),e.queryParams,e.fragment))).pipe(Gh(o=>{throw o instanceof gC?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,pC)}createUrlTree(e,t,r){const o=pS(e);return new qp(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,wt.U)(u=>new en([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,qt.D)(o).pipe(zp(u=>{const l=r.children[u],m=kx(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,wt.U)(w=>({segment:w,outlet:u})))}),to((u,l)=>(u[l.outlet]=l.segment,u),{}),nx())}expandSegment(e,t,r,o,u,l){return(0,qt.D)(r).pipe(zp(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,l).pipe(Gh(C=>{if(C instanceof gC)return gt(null);throw C}))),Vl(m=>!!m),Gh((m,w)=>{if(AS(m))return Bx(t,o,u)?gt(new en([],{})):H0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,l,m){return Ux(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):H0(t):H0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jx(u):this.lineralizeSegments(r,u).pipe((0,vs.z)(l=>{const m=new en(l,{});return this.expandSegment(e,m,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:A}=xS(t,o,u);if(!m)return H0(t);const N=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?jx(N):this.lineralizeSegments(o,N).pipe((0,vs.z)(j=>this.expandSegment(e,t,r,j.concat(C),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=Px(r,e),r.loadChildren?(r._loadedRoutes?gt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,wt.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new en(o,{})))):gt(new en(o,{}))):Vx(t,r,o,e).pipe(mi(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,vs.z)(A=>{const N=A.injector??e,j=A.routes,{segmentGroup:Q,slicedSegments:oe}=hC(t,m,w,j),xe=new en(Q.segments,Q.children);if(0===oe.length&&xe.hasChildren())return this.expandChildren(N,j,xe).pipe((0,wt.U)(Rt=>new en(m,Rt)));if(0===j.length&&0===oe.length)return gt(new en(m,{}));const Ue=ea(r)===u;return this.expandSegment(N,xe,j,oe,Ue?zt:u,!0).pipe((0,wt.U)(tn=>new en(m.concat(tn.segments),tn.children)))})):H0(t)))}getChildConfig(e,t,r){return t.children?gt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?gt({routes:t._loadedRoutes,injector:t._loadedInjector}):function uk(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?gt(!0):gt(o.map(l=>{const m=_y(l,n);return zh(function KP(n){return n&&j0(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(wy(),Lx())}(e,t,r).pipe((0,vs.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,Qi.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function gk(n){return M0(xx(pC,3))}())):gt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return gt(r);if(o.numberOfChildren>1||!o.children[zt])return M0(new g.vHH(4e3,pC));o=o.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new qp(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return xi(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return xi(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,o)}),new en(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,pC);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class _k{}class Ik{constructor(e,t,r,o,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=hC(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,wt.U)(t=>{if(null===t)return null;const r=new uC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Ul(r,t),u=new Sx(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Tx(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,qt.D)(Object.keys(r.children)).pipe(zp(o=>{const u=r.children[o],l=kx(t,o);return this.processSegmentGroup(e,l,u,o)}),to((o,u)=>o&&u?(o.push(...u),o):null),function $O(n,e=!1){return(0,Ti.e)((t,r)=>{let o=0;t.subscribe((0,Pn.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),zD(null),nx(),(0,wt.U)(o=>{if(null===o)return null;const u=Gx(o);return function Dk(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,qt.D)(t).pipe(zp(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),Vl(l=>!!l),Gh(l=>{if(AS(l))return Bx(r,o,u)?gt([]):gt(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Ux(t,r,o,u))return gt(null);let l;if("**"===t.path){const m=o.length>0?sx(o).parameters:{},w=qx(r)+o.length;l=gt({snapshot:new uC(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Wx(t),ea(t),t.component??t._loadedComponent??null,t,zx(r),w,Kx(t)),consumedSegments:[],remainingSegments:[]})}else l=Vx(r,t,o,e).pipe((0,wt.U)(({matched:m,consumedSegments:w,remainingSegments:C,parameters:A})=>{if(!m)return null;const N=qx(r)+w.length;return{snapshot:new uC(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Wx(t),ea(t),t.component??t._loadedComponent??null,t,zx(r),N,Kx(t)),consumedSegments:w,remainingSegments:C}}));return l.pipe(mi(m=>{if(null===m)return gt(null);const{snapshot:w,consumedSegments:C,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,j=function Ck(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:Q,slicedSegments:oe}=hC(r,C,A,j.filter(Ue=>void 0===Ue.redirectTo));if(0===oe.length&&Q.hasChildren())return this.processChildren(N,j,Q).pipe((0,wt.U)(Ue=>null===Ue?null:[new Ul(w,Ue)]));if(0===j.length&&0===oe.length)return gt([new Ul(w,[])]);const xe=ea(t)===u;return this.processSegment(N,j,Q,oe,xe?zt:u).pipe((0,wt.U)(Ue=>null===Ue?null:[new Ul(w,Ue)]))}))}}function bk(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Gx(n){const e=[],t=new Set;for(const r of n){if(!bk(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Gx(r.children);e.push(new Ul(r.value,o))}return e.filter(r=>!t.has(r))}function zx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qx(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Wx(n){return n.data||{}}function Kx(n){return n.resolve||{}}function Zx(n){return"string"==typeof n.title||null===n.title}function RS(n){return mi(e=>{const t=n(e);return t?(0,qt.D)(t).pipe((0,wt.U)(()=>e)):gt(e)})}const Ey=new g.OlP("ROUTES");let NS=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return gt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=zh(t.loadComponent()).pipe((0,wt.U)(Qx),(0,Qi.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),dS(()=>{this.componentLoaders.delete(t)})),o=new tx(r,()=>new jh.x).pipe(cS());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return gt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,wt.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,A=!1;Array.isArray(m)?C=m:(w=m.create(t).injector,C=ix(w.get(Ey,[],g.XFs.Self|g.XFs.Optional)));return{routes:C.map(SS),injector:w}}),dS(()=>{this.childrenLoaders.delete(r)})),l=new tx(u,()=>new jh.x).pipe(cS());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return zh(t()).pipe((0,wt.U)(Qx),(0,vs.z)(o=>o instanceof g.YKP||Array.isArray(o)?gt(o):(0,qt.D)(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qx(n){return function Pk(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let yC=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new jh.x,this.configLoader=(0,g.f3M)(NS),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(N0),this.rootContexts=(0,g.f3M)(V0),this.navigationId=0,this.afterPreactivation=()=>gt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new IP(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new EP(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Qa({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:F0,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(no(r=>0!==r.id),(0,wt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),mi(r=>{let o=!1,u=!1;return gt(r).pipe((0,Qi.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),mi(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new wx(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Hh.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Xx(l.source)&&(t.browserUrlTree=l.extractedUrl),gt(l).pipe(mi(A=>{const N=this.transitions?.getValue();return this.events.next(new vS(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?Hh.E:Promise.resolve(A)}),function vk(n,e,t,r){return mi(o=>function mk(n,e,t,r,o){return new yk(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,wt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Qi.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function Sk(n,e,t,r,o){return(0,vs.z)(u=>function Ek(n,e,t,r,o,u,l="emptyOnly"){return new Ik(n,e,t,r,o,l,u).recognize().pipe(mi(m=>null===m?function wk(n){return new Jr.y(e=>e.error(n))}(new _k):gt(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,wt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Qi.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const j=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(j,A)}t.browserUrlTree=A.urlAfterRedirects}const N=new mP(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:N,source:j,restoredState:Q,extras:oe}=l,xe=new vS(A,this.urlSerializer.serialize(N),j,Q);this.events.next(xe);const Ue=bx(N,this.rootComponentType).snapshot;return gt(r={...l,targetSnapshot:Ue,urlAfterRedirects:N,extras:{...oe,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new wx(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Hh.E}}),(0,Qi.b)(l=>{const m=new yP(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,wt.U)(l=>r={...l,guards:HP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function ek(n,e){return(0,vs.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?gt({...t,guardsResult:!0}):function tk(n,e,t,r){return(0,qt.D)(n).pipe((0,vs.z)(o=>function ak(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?gt(u.map(m=>{const w=U0(e)??o,C=_y(m,w);return zh(function QP(n){return n&&j0(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(Vl())})).pipe(wy()):gt(!0)}(o.component,o.route,t,e,r)),Vl(o=>!0!==o,!0))}(l,r,o,n).pipe((0,vs.z)(m=>m&&function WP(n){return"boolean"==typeof n}(m)?function nk(n,e,t,r){return(0,qt.D)(e).pipe(zp(o=>xf(function ik(n,e){return null!==n&&e&&e(new DP(n)),gt(!0)}(o.route.parent,r),function rk(n,e){return null!==n&&e&&e(new bP(n)),gt(!0)}(o.route,r),function ok(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function GP(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>JM(()=>gt(l.guards.map(w=>{const C=U0(l.node)??t,A=_y(w,C);return zh(function YP(n){return n&&j0(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(Vl())})).pipe(wy())));return gt(u).pipe(wy())}(n,o.path,t),function sk(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return gt(!0);const o=r.map(u=>JM(()=>{const l=U0(e)??t,m=_y(u,l);return zh(function ZP(n){return n&&j0(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Vl())}));return gt(o).pipe(wy())}(n,o.route,t))),Vl(o=>!0!==o,!0))}(r,u,n,e):gt(m)),(0,wt.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Qi.b)(l=>{if(r.guardsResult=l.guardsResult,Kp(l.guardsResult))throw Mx(0,l.guardsResult);const m=new vP(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),no(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),RS(l=>{if(l.guards.canActivateChecks.length)return gt(l).pipe((0,Qi.b)(m=>{const w=new _P(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),mi(m=>{let w=!1;return gt(m).pipe(function Ak(n,e){return(0,vs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return gt(t);let u=0;return(0,qt.D)(o).pipe(zp(l=>function Mk(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!Zx(o)&&(u[x0]=o.title),function xk(n,e,t,r){const o=function Rk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return gt({});const u={};return(0,qt.D)(o).pipe((0,vs.z)(l=>function Nk(n,e,t,r){const o=U0(e)??r,u=_y(n,o);return zh(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Vl(),(0,Qi.b)(m=>{u[l]=m}))),lS(1),function jO(n){return(0,wt.U)(()=>n)}(u),Gh(l=>AS(l)?Hh.E:M0(l)))}(u,n,e,r).pipe((0,wt.U)(l=>(n._resolvedData=l,n.data=Tx(n,t).resolve,o&&Zx(o)&&(n.data[x0]=o.title),null)))}(l.route,r,n,e)),(0,Qi.b)(()=>u++),lS(1),(0,vs.z)(l=>u===o.length?gt(t):Hh.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Qi.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,Qi.b)(m=>{const w=new wP(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),RS(l=>{const m=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Qi.b)(A=>{w.component=A}),(0,wt.U)(()=>{})));for(const A of w.children)C.push(...m(A));return C};return QM(m(l.targetSnapshot.root)).pipe(zD(),T0(1))}),RS(()=>this.afterPreactivation()),(0,wt.U)(l=>{const m=function NP(n,e,t){const r=L0(n,e._root,t?t._root:void 0);return new Cx(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,Qi.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,wt.U)(r=>(new jP(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,Qi.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Zp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),dS(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Gh(l=>{if(u=!0,Nx(l)){Rx(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new aC(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Rx(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),C={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||Xx(r.source)};t.scheduleNavigation(w,F0,null,C,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new Ex(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Hh.E}))}))}cancelNavigationTransition(t,r,o){const u=new aC(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Xx(n){return n!==F0}let Jx=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[x0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(kk)},providedIn:"root"}),n})(),kk=(()=>{class n extends Jx{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG($c))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Vk)},providedIn:"root"}),n})();class Lk{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Vk=(()=>{class n extends Lk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vC=new g.OlP("",{providedIn:"root",factory:()=>({})});let Bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)($k)},providedIn:"root"}),n})(),$k=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jk(n){throw n}function Hk(n,e,t){return e.parse("/")}const Gk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(vC,{optional:!0})||{},this.errorHandler=this.options.errorHandler||jk,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Hk,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(Bk),this.routeReuseStrategy=(0,g.f3M)(Fk),this.urlCreationStrategy=(0,g.f3M)(MP),this.titleStrategy=(0,g.f3M)(Jx),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ix((0,g.f3M)(Ey,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(yC),this.urlSerializer=(0,g.f3M)(N0),this.location=(0,g.f3M)(Pe),this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new qp,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bx(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),F0,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const w={...o};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(SS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,A,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Kp(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,F0,null,r)}navigate(t,r={skipLocationChange:!1}){return function qk(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...Gk}:!1===r?{...zk}:r,Kp(t))return ax(this.currentUrlTree,t,o);const u=this.parseUrl(t);return ax(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,C,A;return l?(m=l.resolve,w=l.reject,C=l.promise):C=new Promise((N,j)=>{m=N,w=j}),A="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tR{}let Zk=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(no(t=>t instanceof Zp),zp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,qt.D)(o).pipe((0,al.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):gt(null);const u=o.pipe((0,vs.z)(l=>null===l?gt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,qt.D)([u,l]).pipe((0,al.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(yo),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(tR),g.LFG(NS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const PS=new g.OlP("");let nR=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof vS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ix&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ix(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Yp(n,e){return{\u0275kind:n,\u0275providers:e}}function iR(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(yo),o=n.get(sR);1===n.get(FS)&&r.initialNavigation(),n.get(oR,null,g.XFs.Optional)?.setUpPreloading(),n.get(PS,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const sR=new g.OlP("",{factory:()=>new jh.x}),FS=new g.OlP("",{providedIn:"root",factory:()=>1});const oR=new g.OlP("");function e1(n){return Yp(0,[{provide:oR,useExisting:Zk},{provide:tR,useExisting:n}])}const aR=new g.OlP("ROUTER_FORROOT_GUARD"),t1=[Pe,{provide:N0,useClass:hS},yo,V0,{provide:vy,useFactory:function rR(n){return n.routerState.root},deps:[yo]},NS,[]];function n1(){return new g.PXZ("Router",yo)}let uR=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[t1,[],{provide:Ey,multi:!0,useValue:t},{provide:aR,useFactory:o1,deps:[[yo,new g.FiY,new g.tp0]]},{provide:vC,useValue:r||{}},r?.useHash?{provide:it,useClass:Ce}:{provide:it,useClass:De},{provide:PS,useFactory:()=>{const n=(0,g.f3M)(Do),e=(0,g.f3M)(g.R0b),t=(0,g.f3M)(vC),r=(0,g.f3M)(yC),o=(0,g.f3M)(N0);return t.scrollOffset&&n.setOffset(t.scrollOffset),new nR(o,r,n,e,t)}},r?.preloadingStrategy?e1(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:n1},r?.initialNavigation?a1(r):[],[{provide:cR,useFactory:iR},{provide:g.tb,multi:!0,useExisting:cR}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ey,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(aR,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[bS]}),n})();function o1(n){return"guarded"}function a1(n){return["disabled"===n.initialNavigation?Yp(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(yo);return()=>{e.setUpLocationChangeListener()}}},{provide:FS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Yp(2,[{provide:FS,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(se,Promise.resolve());return()=>t.then(()=>new Promise(o=>{const u=e.get(yo),l=e.get(sR);(function r(o){e.get(yo).events.pipe(no(l=>l instanceof Zp||l instanceof aC||l instanceof Ex),(0,wt.U)(l=>l instanceof Zp||l instanceof aC&&(0===l.code||1===l.code)&&null),no(l=>null!==l),T0(1)).subscribe(()=>{o()})})(()=>{o(!0)}),e.get(yC).afterPreactivation=()=>(o(!0),l.closed?gt(void 0):l),u.initialNavigation()}))}}]).\u0275providers:[]]}const cR=new g.OlP("");class lR{constructor(e,t,r,o){this.nombre=e,this.link=t,this.categorias=r,this.favorita=!1}}class qh{constructor(e){this.db=e,this.colection="/urls",this.listaUrls=[],this.listaUrlsFireBase=[],this.listaUrls=JSON.parse(localStorage.getItem("listadoUrls")||"[]"),this.urlsFirebase=e.collection(this.colection)}anadirUrls(e){return this.listaUrls.unshift(e),this.guardarUrls(),this.urlsFirebase.add({...e})}obtenerUrls(){return this.listaUrls}favoritaUrl(e){let t=this.listaUrls.findIndex(r=>r.link===e.link);e.favorita=!e.favorita,e.favorita?(this.listaUrls.unshift(e),this.listaUrls.splice(t+1,1)):(this.listaUrls.push(e),this.listaUrls.splice(t,1)),this.guardarUrls()}eliminarUrl(e){let t=this.listaUrls.findIndex(r=>r.link===e);this.listaUrls.splice(t,1),this.guardarUrls()}guardarUrls(){localStorage.setItem("listadoUrls",JSON.stringify(this.listaUrls))}}function c1(n,e){1&n&&(g.TgZ(0,"small",20),g._uU(1,"Debe ser una url valida"),g.qZA())}function l1(n,e){1&n&&(g.TgZ(0,"small",20),g._uU(1,"M\xednimo 3 caracteres"),g.qZA())}qh.\u0275fac=function(e){return new(e||qh)(g.LFG(YM))},qh.\u0275prov=g.Yz7({token:qh,factory:qh.\u0275fac,providedIn:"root"});class z0{constructor(e,t){this.urlsService=e,this.fb=t,this.crearFormulario()}crearFormulario(){this.formularioAnadir=this.fb.group({link:["",[bi.required,bi.minLength(5),bi.pattern(/^[A-Za-z][A-Za-z\d.+-]*:\/*(?:\w+(?::\w+)?@)?[^\s/]+(?::\d+)?(?:\/[\w#!:.?+=&%@\-/]*)?$/)]],nombre:["",[bi.required,bi.minLength(3)]]})}get linkNoValido(){return this.formularioAnadir.get("link")?.invalid&&this.formularioAnadir.get("link")?.touched}get nombreNoValido(){return this.formularioAnadir.get("nombre")?.invalid&&this.formularioAnadir.get("nombre")?.touched}anadirUrl(e,t,r,o,u){if(this.formularioAnadir.get("link")?.invalid||this.formularioAnadir.get("nombre")?.invalid||""==t.value||""==e.value)console.log("Datos erroneos");else{var l=[];r.checked&&l.unshift("Deporte"),o.checked&&l.unshift("Cocina"),u.checked&&l.unshift("Juegos"),this.urlsService.anadirUrls(new lR(t.value,e.value,l,!1)),console.log(new lR(t.value,e.value,l,!1)),t.value="",e.value="",r.checked=!1,o.checked=!1,u.checked=!1}}}z0.\u0275fac=function(e){return new(e||z0)(g.Y36(qh),g.Y36($S))},z0.\u0275cmp=g.Xpm({type:z0,selectors:[["app-formulario"]],decls:27,vars:7,consts:[[3,"formGroup","ngSubmit"],[1,"input-group","m-4","container"],[1,"col","col-8","justify-content-center"],["type","text","placeholder","Introduce el link","formControlName","link","id","link",1,"form-control","row","row-6"],["link",""],["class","text-danger",4,"ngIf"],["type","text","placeholder","Introduce un nombre","formControlName","nombre","id","nombre",1,"form-control","row","row-6"],["nombre",""],[1,"col","col-3","justify-content-end"],[1,"row","row-2"],["type","checkbox","id","deportesCategoria",1,"col-2"],["deportesCategoria",""],["for","deportesCategoria",1,"col-10"],["type","checkbox","id","cocinaCategoria",1,"col-2"],["cocinaCategoria",""],["for","cocinaCategoria",1,"col-10"],["type","checkbox","id","juegosCategoria",1,"col-2"],["juegosCategoria",""],["for","juegosCategoria",1,"col-10"],["type","submit","id","basic-addon2",1,"input-group-text","col-1"],[1,"text-danger"]],template:function(e,t){if(1&e){const r=g.EpF();g.TgZ(0,"form",0),g.NdJ("ngSubmit",function(){g.CHM(r);const u=g.MAs(4),l=g.MAs(7),m=g.MAs(12),w=g.MAs(17),C=g.MAs(22);return g.KtG(t.anadirUrl(u,l,m,w,C))}),g.TgZ(1,"div",1)(2,"div",2),g._UZ(3,"input",3,4),g.YNc(5,c1,2,0,"small",5),g._UZ(6,"input",6,7),g.YNc(8,l1,2,0,"small",5),g.qZA(),g.TgZ(9,"div",8)(10,"div",9),g._UZ(11,"input",10,11),g.TgZ(13,"label",12),g._uU(14," Deportes"),g.qZA()(),g.TgZ(15,"div",9),g._UZ(16,"input",13,14),g.TgZ(18,"label",15),g._uU(19," Cocina"),g.qZA()(),g.TgZ(20,"div",9),g._UZ(21,"input",16,17),g.TgZ(23,"label",18),g._uU(24," Juegos"),g.qZA()()(),g.TgZ(25,"button",19),g._uU(26,"A\xf1adir"),g.qZA()()()}2&e&&(g.Q6J("formGroup",t.formularioAnadir),g.xp6(3),g.ekj("is-invalid",t.linkNoValido),g.xp6(2),g.Q6J("ngIf",t.linkNoValido),g.xp6(1),g.ekj("is-invalid",t.nombreNoValido),g.xp6(2),g.Q6J("ngIf",t.nombreNoValido))},dependencies:[ks,Ms,lr,yd,gg,S,ht],styles:[".col[_ngcontent-%COMP%]{padding:.4em}.row[_ngcontent-%COMP%]{margin:.5em}button[_ngcontent-%COMP%]{background-color:#fbd145;display:flex;justify-content:center}"]});class LS{constructor(e){this.nombreCategoria=e}}class Qp{constructor(){this.listaCategorias=[new LS("Cocina"),new LS("Deporte"),new LS("Juegos")]}obtenerCategorias(){return this.listaCategorias}}Qp.\u0275fac=function(e){return new(e||Qp)},Qp.\u0275prov=g.Yz7({token:Qp,factory:Qp.\u0275fac,providedIn:"root"});const d1=function(n){return{favorita:n}};class q0{constructor(e){this.urlsService=e,this.urlFavorita=new g.vpe,this.urlEliminada=new g.vpe}ngOnInit(){}goToUrl(e){window.open(e)}favoritaUrl(e){this.urlFavorita.emit(e)}eliminarUrl(e){this.urlEliminada.emit(e)}}q0.\u0275fac=function(e){return new(e||q0)(g.Y36(qh))},q0.\u0275cmp=g.Xpm({type:q0,selectors:[["app-url"]],inputs:{url:"url"},outputs:{urlFavorita:"urlFavorita",urlEliminada:"urlEliminada"},decls:10,vars:5,consts:[[1,"row"],["id","nombreUrl",1,"col-6",3,"click"],["href","(url.link)",3,"ngClass"],[1,"col-4"],[1,"col-1",3,"click"],[1,"bi","bi-star"],[1,"bi","bi-trash"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1),g.NdJ("click",function(){return t.goToUrl(t.url.link)}),g.TgZ(2,"a",2),g._uU(3),g.qZA()(),g.TgZ(4,"div",3),g._uU(5),g.qZA(),g.TgZ(6,"div",4),g.NdJ("click",function(){return t.favoritaUrl(t.url)}),g._UZ(7,"i",5),g.qZA(),g.TgZ(8,"div",4),g.NdJ("click",function(){return t.eliminarUrl(t.url.link)}),g._UZ(9,"i",6),g.qZA()()),2&e&&(g.xp6(2),g.Q6J("ngClass",g.VKq(3,d1,t.url.favorita)),g.xp6(1),g.Oqu(t.url.nombre),g.xp6(2),g.Oqu(t.url.categorias))},dependencies:[Nt],styles:[".favorita[_ngcontent-%COMP%]{color:#e1bf00;font-weight:700}.bi-star[_ngcontent-%COMP%]{color:#e1bf00}"]});class W0{constructor(e){this.categoriasService=e,this.categoriaFiltro=new g.vpe,this.categoriaSeleccionada=new g.vpe}ngOnInit(){}filtrarUrl(e){this.categoriaSeleccionada.emit(e.nombreCategoria),this.categoriaFiltro.emit(this.categoria)}}function h1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"app-categorias",9),g.NdJ("categoriaFiltro",function(o){g.CHM(t);const u=g.oxw();return g.KtG(u.filtrarUrl(o))}),g.qZA()}if(2&n){const t=e.$implicit,r=g.oxw();g.Q6J("categoria",t)("selectedCategoria",r.selectedCategoria)}}function f1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"app-url",10),g.NdJ("urlFavorita",function(o){g.CHM(t);const u=g.oxw();return g.KtG(u.favoritaUrl(o))})("urlEliminada",function(o){g.CHM(t);const u=g.oxw();return g.KtG(u.eliminarUrl(o))}),g.qZA()}2&n&&g.Q6J("url",e.$implicit)}W0.\u0275fac=function(e){return new(e||W0)(g.Y36(Qp))},W0.\u0275cmp=g.Xpm({type:W0,selectors:[["app-categorias"]],inputs:{categoria:"categoria",selectedCategoria:"selectedCategoria"},outputs:{categoriaFiltro:"categoriaFiltro",categoriaSeleccionada:"categoriaSeleccionada"},decls:3,vars:3,consts:[[1,"nav-item"],[1,"nav-link",3,"click"]],template:function(e,t){1&e&&(g.TgZ(0,"li",0)(1,"a",1),g.NdJ("click",function(){return t.filtrarUrl(t.categoria)}),g._uU(2),g.qZA()()),2&e&&(g.xp6(1),g.ekj("active",t.selectedCategoria===t.categoria.nombreCategoria),g.xp6(1),g.Oqu(t.categoria.nombreCategoria))}});class K0{constructor(e,t){this.urlsService=e,this.categoriasService=t,this.listaUrls=[],this.listaTodasUrls=[],this.listaCategorias=[],this.listaUrls=this.urlsService.obtenerUrls(),this.listaCategorias=this.categoriasService.obtenerCategorias(),this.selectedCategoria="Todas"}ngOnInit(){}favoritaUrl(e){this.urlsService.favoritaUrl(e)}eliminarUrl(e){this.urlsService.eliminarUrl(e)}mostrarTodas(){this.selectedCategoria="Todas",this.listaUrls=this.urlsService.obtenerUrls()}filtrarUrl(e){this.selectedCategoria=e.nombreCategoria,this.listaTodasUrls=this.urlsService.obtenerUrls(),this.listaUrls=[],this.listaUrls=this.listaTodasUrls.filter(t=>t.categorias.includes(e.nombreCategoria))}}K0.\u0275fac=function(e){return new(e||K0)(g.Y36(qh),g.Y36(Qp))},K0.\u0275cmp=g.Xpm({type:K0,selectors:[["app-listado-urls"]],decls:10,vars:4,consts:[[1,"card","text-center"],[1,"card-header"],[1,"nav","nav-tabs","card-header-tabs"],[1,"nav-item"],["aria-current","true","id","navTodas",1,"nav-link",3,"click"],[3,"categoria","selectedCategoria","categoriaFiltro",4,"ngFor","ngForOf"],[1,"card-body"],[1,"list-group"],["class","list-group-item",3,"url","urlFavorita","urlEliminada",4,"ngFor","ngForOf"],[3,"categoria","selectedCategoria","categoriaFiltro"],[1,"list-group-item",3,"url","urlFavorita","urlEliminada"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),g.NdJ("click",function(){return t.mostrarTodas()}),g._uU(5,"Todas"),g.qZA()(),g.YNc(6,h1,1,2,"app-categorias",5),g.qZA()(),g.TgZ(7,"div",6)(8,"ul",7),g.YNc(9,f1,1,1,"app-url",8),g.qZA()()()),2&e&&(g.xp6(4),g.ekj("active","Todas"===t.selectedCategoria),g.xp6(2),g.Q6J("ngForOf",t.listaCategorias),g.xp6(3),g.Q6J("ngForOf",t.listaUrls))},dependencies:[wi,q0,W0]});class Dy{constructor(){}ngOnInit(){}}Dy.\u0275fac=function(e){return new(e||Dy)},Dy.\u0275cmp=g.Xpm({type:Dy,selectors:[["app-principal"]],decls:3,vars:0,consts:[[1,"container"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g._UZ(1,"app-formulario")(2,"app-listado-urls"),g.qZA())},dependencies:[z0,K0]});const dR=(0,uM.d)(n=>function(t){n(this),this.name="NotFoundError",this.message=t}),p1=[{path:"",component:Dy},{path:"404",component:dR},{path:"**",component:dR}];class Cy{}Cy.\u0275fac=function(e){return new(e||Cy)},Cy.\u0275mod=g.oAB({type:Cy}),Cy.\u0275inj=g.cJS({imports:[uR.forRoot(p1),uR]});class Z0{constructor(){this.title="todoApp"}}Z0.\u0275fac=function(e){return new(e||Z0)},Z0.\u0275cmp=g.Xpm({type:Z0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"app-principal")},dependencies:[Dy]});class by{}by.\u0275fac=function(e){return new(e||by)},by.\u0275mod=g.oAB({type:by,bootstrap:[Z0]}),by.\u0275inj=g.cJS({imports:[rd,Cy,$o.hO.initializeApp({apiKey:"AIzaSyDke_SjqbAYEkBHntunwkIG_Ft0RrWsnQE",authDomain:"registrourls.firebaseapp.com",projectId:"registrourls",storageBucket:"registrourls.appspot.com",messagingSenderId:"211379374653",appId:"1:211379374653:web:8c987a5f158ffb962ff854"}),FO,cw,lw]}),ig().bootstrapModule(by).catch(n=>console.error(n))},9751:(lt,be,P)=>{P.d(be,{y:()=>ue});var g=P(2961),K=P(727),O=P(8822),J=P(9635),ee=P(2416),te=P(576),le=P(2806);let ue=(()=>{class q{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const He=new q;return He.source=this,He.operator=Ie,He}subscribe(Ie,He,it){const he=function $(q){return q&&q instanceof g.Lv||function B(q){return q&&(0,te.m)(q.next)&&(0,te.m)(q.error)&&(0,te.m)(q.complete)}(q)&&(0,K.Nn)(q)}(Ie)?Ie:new g.Hp(Ie,He,it);return(0,le.x)(()=>{const{operator:De,source:Ce}=this;he.add(De?De.call(he,Ce):Ce?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(He){Ie.error(He)}}forEach(Ie,He){return new(He=se(He))((it,he)=>{const De=new g.Hp({next:Ce=>{try{Ie(Ce)}catch(Pe){he(Pe),De.unsubscribe()}},error:he,complete:it});this.subscribe(De)})}_subscribe(Ie){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Ie)}[O.L](){return this}pipe(...Ie){return(0,J.U)(Ie)(this)}toPromise(Ie){return new(Ie=se(Ie))((He,it)=>{let he;this.subscribe(De=>he=De,De=>it(De),()=>He(he))})}}return q.create=Be=>new q(Be),q})();function se(q){var Be;return null!==(Be=q??ee.v.Promise)&&void 0!==Be?Be:Promise}},7579:(lt,be,P)=>{P.d(be,{x:()=>le});var g=P(9751),K=P(727);const J=(0,P(3888).d)(se=>function(){se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=P(8737),te=P(2806);let le=(()=>{class se extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const q=new ue(this,this);return q.operator=$,q}_throwIfClosed(){if(this.closed)throw new J}next($){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next($)}})}error($){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:q}=this;for(;q.length;)q.shift().error($)}})}complete(){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:q,isStopped:Be,observers:Ie}=this;return q||Be?K.Lc:(this.currentObservers=null,Ie.push($),new K.w0(()=>{this.currentObservers=null,(0,ee.P)(Ie,$)}))}_checkFinalizedStatuses($){const{hasError:q,thrownError:Be,isStopped:Ie}=this;q?$.error(Be):Ie&&$.complete()}asObservable(){const $=new g.y;return $.source=this,$}}return se.create=(B,$)=>new ue(B,$),se})();class ue extends le{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===q||q.call($,B)}error(B){var $,q;null===(q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===q||q.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,q;return null!==(q=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==q?q:K.Lc}}},2961:(lt,be,P)=>{P.d(be,{Hp:()=>it,Lv:()=>q});var g=P(576),K=P(727),O=P(2416),J=P(7849);function ee(){}const te=se("C",void 0,void 0);function se(Ee,ve,Te){return{kind:Ee,value:ve,error:Te}}var B=P(3410),$=P(2806);class q extends K.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,K.Nn)(ve)&&ve.add(this)):this.destination=Pe}static create(ve,Te,Fe){return new it(ve,Te,Fe)}next(ve){this.isStopped?Ce(function ue(Ee){return se("N",Ee,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ce(function le(Ee){return se("E",void 0,Ee)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ce(te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Be=Function.prototype.bind;function Ie(Ee,ve){return Be.call(Ee,ve)}class He{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Te}=this;if(Te.next)try{Te.next(ve)}catch(Fe){he(Fe)}}error(ve){const{partialObserver:Te}=this;if(Te.error)try{Te.error(ve)}catch(Fe){he(Fe)}else he(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Te){he(Te)}}}class it extends q{constructor(ve,Te,Fe){let Re;if(super(),(0,g.m)(ve)||!ve)Re={next:ve??void 0,error:Te??void 0,complete:Fe??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),Re={next:ve.next&&Ie(ve.next,V),error:ve.error&&Ie(ve.error,V),complete:ve.complete&&Ie(ve.complete,V)}):Re=ve}this.destination=new He(Re)}}function he(Ee){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ee):(0,J.h)(Ee)}function Ce(Ee,ve){const{onStoppedNotification:Te}=O.v;Te&&B.z.setTimeout(()=>Te(Ee,ve))}const Pe={closed:!0,next:ee,error:function De(Ee){throw Ee},complete:ee}},727:(lt,be,P)=>{P.d(be,{Lc:()=>te,w0:()=>ee,Nn:()=>le});var g=P(576);const O=(0,P(3888).d)(se=>function($){se(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((q,Be)=>`${Be+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var J=P(8737);class ee{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ie of $)Ie.remove(this);else $.remove(this);const{initialTeardown:q}=this;if((0,g.m)(q))try{q()}catch(Ie){B=Ie instanceof O?Ie.errors:[Ie]}const{_finalizers:Be}=this;if(Be){this._finalizers=null;for(const Ie of Be)try{ue(Ie)}catch(He){B=B??[],He instanceof O?B=[...B,...He.errors]:B.push(He)}}if(B)throw new O(B)}}add(B){var $;if(B&&B!==this)if(this.closed)ue(B);else{if(B instanceof ee){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,J.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,J.P)($,B),B instanceof ee&&B._removeParent(this)}}ee.EMPTY=(()=>{const se=new ee;return se.closed=!0,se})();const te=ee.EMPTY;function le(se){return se instanceof ee||se&&"closed"in se&&(0,g.m)(se.remove)&&(0,g.m)(se.add)&&(0,g.m)(se.unsubscribe)}function ue(se){(0,g.m)(se)?se():se.unsubscribe()}},2416:(lt,be,P)=>{P.d(be,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,be,P)=>{P.d(be,{E:()=>K});const K=new(P(9751).y)(ee=>ee.complete())},8996:(lt,be,P)=>{P.d(be,{D:()=>ve});var g=P(8421),K=P(5363),O=P(9468),te=P(9751),ue=P(2202),se=P(576),B=P(9672);function q(Te,Fe){if(!Te)throw new Error("Iterable cannot be null");return new te.y(Re=>{(0,B.f)(Re,Fe,()=>{const V=Te[Symbol.asyncIterator]();(0,B.f)(Re,Fe,()=>{V.next().then(me=>{me.done?Re.complete():Re.next(me.value)})},0,!0)})})}var Be=P(3670),Ie=P(8239),He=P(1144),it=P(6495),he=P(2206),De=P(4532),Ce=P(3260);function ve(Te,Fe){return Fe?function Ee(Te,Fe){if(null!=Te){if((0,Be.c)(Te))return function J(Te,Fe){return(0,g.Xf)(Te).pipe((0,O.R)(Fe),(0,K.Q)(Fe))}(Te,Fe);if((0,He.z)(Te))return function le(Te,Fe){return new te.y(Re=>{let V=0;return Fe.schedule(function(){V===Te.length?Re.complete():(Re.next(Te[V++]),Re.closed||this.schedule())})})}(Te,Fe);if((0,Ie.t)(Te))return function ee(Te,Fe){return(0,g.Xf)(Te).pipe((0,O.R)(Fe),(0,K.Q)(Fe))}(Te,Fe);if((0,he.D)(Te))return q(Te,Fe);if((0,it.T)(Te))return function $(Te,Fe){return new te.y(Re=>{let V;return(0,B.f)(Re,Fe,()=>{V=Te[ue.h](),(0,B.f)(Re,Fe,()=>{let me,Le;try{({value:me,done:Le}=V.next())}catch(qe){return void Re.error(qe)}Le?Re.complete():Re.next(me)},0,!0)}),()=>(0,se.m)(V?.return)&&V.return()})}(Te,Fe);if((0,Ce.L)(Te))return function Pe(Te,Fe){return q((0,Ce.Q)(Te),Fe)}(Te,Fe)}throw(0,De.z)(Te)}(Te,Fe):(0,g.Xf)(Te)}},8421:(lt,be,P)=>{P.d(be,{Xf:()=>Be});var g=P(655),K=P(1144),O=P(8239),J=P(9751),ee=P(3670),te=P(2206),le=P(4532),ue=P(6495),se=P(3260),B=P(576),$=P(7849),q=P(8822);function Be(Ee){if(Ee instanceof J.y)return Ee;if(null!=Ee){if((0,ee.c)(Ee))return function Ie(Ee){return new J.y(ve=>{const Te=Ee[q.L]();if((0,B.m)(Te.subscribe))return Te.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ee);if((0,K.z)(Ee))return function He(Ee){return new J.y(ve=>{for(let Te=0;Te<Ee.length&&!ve.closed;Te++)ve.next(Ee[Te]);ve.complete()})}(Ee);if((0,O.t)(Ee))return function it(Ee){return new J.y(ve=>{Ee.then(Te=>{ve.closed||(ve.next(Te),ve.complete())},Te=>ve.error(Te)).then(null,$.h)})}(Ee);if((0,te.D)(Ee))return De(Ee);if((0,ue.T)(Ee))return function he(Ee){return new J.y(ve=>{for(const Te of Ee)if(ve.next(Te),ve.closed)return;ve.complete()})}(Ee);if((0,se.L)(Ee))return function Ce(Ee){return De((0,se.Q)(Ee))}(Ee)}throw(0,le.z)(Ee)}function De(Ee){return new J.y(ve=>{(function Pe(Ee,ve){var Te,Fe,Re,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Te=(0,g.KL)(Ee);!(Fe=yield Te.next()).done;)if(ve.next(Fe.value),ve.closed)return}catch(me){Re={error:me}}finally{try{Fe&&!Fe.done&&(V=Te.return)&&(yield V.call(Te))}finally{if(Re)throw Re.error}}ve.complete()})})(Ee,ve).catch(Te=>ve.error(Te))})}},6451:(lt,be,P)=>{P.d(be,{T:()=>te});var g=P(8189),K=P(8421),O=P(515),J=P(7669),ee=P(8996);function te(...le){const ue=(0,J.yG)(le),se=(0,J._6)(le,1/0),B=le;return B.length?1===B.length?(0,K.Xf)(B[0]):(0,g.J)(se)((0,ee.D)(B,ue)):O.E}},5403:(lt,be,P)=>{P.d(be,{x:()=>K});var g=P(2961);function K(J,ee,te,le,ue){return new O(J,ee,te,le,ue)}class O extends g.Lv{constructor(ee,te,le,ue,se,B){super(ee),this.onFinalize=se,this.shouldUnsubscribe=B,this._next=te?function($){try{te($)}catch(q){ee.error(q)}}:super._next,this._error=ue?function($){try{ue($)}catch(q){ee.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){ee.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:te}=this;super.unsubscribe(),!te&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(lt,be,P)=>{P.d(be,{U:()=>O});var g=P(4482),K=P(5403);function O(J,ee){return(0,g.e)((te,le)=>{let ue=0;te.subscribe((0,K.x)(le,se=>{le.next(J.call(ee,se,ue++))}))})}},8189:(lt,be,P)=>{P.d(be,{J:()=>O});var g=P(5577),K=P(4671);function O(J=1/0){return(0,g.z)(K.y,J)}},5577:(lt,be,P)=>{P.d(be,{z:()=>ue});var g=P(4004),K=P(8421),O=P(4482),J=P(9672),ee=P(5403),le=P(576);function ue(se,B,$=1/0){return(0,le.m)(B)?ue((q,Be)=>(0,g.U)((Ie,He)=>B(q,Ie,Be,He))((0,K.Xf)(se(q,Be))),$):("number"==typeof B&&($=B),(0,O.e)((q,Be)=>function te(se,B,$,q,Be,Ie,He,it){const he=[];let De=0,Ce=0,Pe=!1;const Ee=()=>{Pe&&!he.length&&!De&&B.complete()},ve=Fe=>De<q?Te(Fe):he.push(Fe),Te=Fe=>{Ie&&B.next(Fe),De++;let Re=!1;(0,K.Xf)($(Fe,Ce++)).subscribe((0,ee.x)(B,V=>{Be?.(V),Ie?ve(V):B.next(V)},()=>{Re=!0},void 0,()=>{if(Re)try{for(De--;he.length&&De<q;){const V=he.shift();He?(0,J.f)(B,He,()=>Te(V)):Te(V)}Ee()}catch(V){B.error(V)}}))};return se.subscribe((0,ee.x)(B,ve,()=>{Pe=!0,Ee()})),()=>{it?.()}}(q,Be,se,$)))}},5363:(lt,be,P)=>{P.d(be,{Q:()=>J});var g=P(9672),K=P(4482),O=P(5403);function J(ee,te=0){return(0,K.e)((le,ue)=>{le.subscribe((0,O.x)(ue,se=>(0,g.f)(ue,ee,()=>ue.next(se),te),()=>(0,g.f)(ue,ee,()=>ue.complete(),te),se=>(0,g.f)(ue,ee,()=>ue.error(se),te)))})}},3099:(lt,be,P)=>{P.d(be,{B:()=>ee});var g=P(8421),K=P(7579),O=P(2961),J=P(4482);function ee(le={}){const{connector:ue=(()=>new K.x),resetOnError:se=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=le;return q=>{let Be,Ie,He,it=0,he=!1,De=!1;const Ce=()=>{Ie?.unsubscribe(),Ie=void 0},Pe=()=>{Ce(),Be=He=void 0,he=De=!1},Ee=()=>{const ve=Be;Pe(),ve?.unsubscribe()};return(0,J.e)((ve,Te)=>{it++,!De&&!he&&Ce();const Fe=He=He??ue();Te.add(()=>{it--,0===it&&!De&&!he&&(Ie=te(Ee,$))}),Fe.subscribe(Te),!Be&&it>0&&(Be=new O.Hp({next:Re=>Fe.next(Re),error:Re=>{De=!0,Ce(),Ie=te(Pe,se,Re),Fe.error(Re)},complete:()=>{he=!0,Ce(),Ie=te(Pe,B),Fe.complete()}}),(0,g.Xf)(ve).subscribe(Be))})(q)}}function te(le,ue,...se){if(!0===ue)return void le();if(!1===ue)return;const B=new O.Hp({next:()=>{B.unsubscribe(),le()}});return(0,g.Xf)(ue(...se)).subscribe(B)}},9468:(lt,be,P)=>{P.d(be,{R:()=>K});var g=P(4482);function K(O,J=0){return(0,g.e)((ee,te)=>{te.add(O.schedule(()=>ee.subscribe(te),J))})}},8505:(lt,be,P)=>{P.d(be,{b:()=>ee});var g=P(576),K=P(4482),O=P(5403),J=P(4671);function ee(te,le,ue){const se=(0,g.m)(te)||le||ue?{next:te,error:le,complete:ue}:te;return se?(0,K.e)((B,$)=>{var q;null===(q=se.subscribe)||void 0===q||q.call(se);let Be=!0;B.subscribe((0,O.x)($,Ie=>{var He;null===(He=se.next)||void 0===He||He.call(se,Ie),$.next(Ie)},()=>{var Ie;Be=!1,null===(Ie=se.complete)||void 0===Ie||Ie.call(se),$.complete()},Ie=>{var He;Be=!1,null===(He=se.error)||void 0===He||He.call(se,Ie),$.error(Ie)},()=>{var Ie,He;Be&&(null===(Ie=se.unsubscribe)||void 0===Ie||Ie.call(se)),null===(He=se.finalize)||void 0===He||He.call(se)}))}):J.y}},4408:(lt,be,P)=>{P.d(be,{o:()=>ee});var g=P(727);class K extends g.w0{constructor(le,ue){super()}schedule(le,ue=0){return this}}const O={setInterval(te,le,...ue){const{delegate:se}=O;return se?.setInterval?se.setInterval(te,le,...ue):setInterval(te,le,...ue)},clearInterval(te){const{delegate:le}=O;return(le?.clearInterval||clearInterval)(te)},delegate:void 0};var J=P(8737);class ee extends K{constructor(le,ue){super(le,ue),this.scheduler=le,this.work=ue,this.pending=!1}schedule(le,ue=0){var se;if(this.closed)return this;this.state=le;const B=this.id,$=this.scheduler;return null!=B&&(this.id=this.recycleAsyncId($,B,ue)),this.pending=!0,this.delay=ue,this.id=null!==(se=this.id)&&void 0!==se?se:this.requestAsyncId($,this.id,ue),this}requestAsyncId(le,ue,se=0){return O.setInterval(le.flush.bind(le,this),se)}recycleAsyncId(le,ue,se=0){if(null!=se&&this.delay===se&&!1===this.pending)return ue;null!=ue&&O.clearInterval(ue)}execute(le,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const se=this._execute(le,ue);if(se)return se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ue){let B,se=!1;try{this.work(le)}catch($){se=!0,B=$||new Error("Scheduled action threw falsy error")}if(se)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:ue}=this,{actions:se}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.P)(se,this),null!=le&&(this.id=this.recycleAsyncId(ue,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,be,P)=>{P.d(be,{v:()=>O});var g=P(6063);class K{constructor(ee,te=K.now){this.schedulerActionCtor=ee,this.now=te}schedule(ee,te=0,le){return new this.schedulerActionCtor(this,ee).schedule(le,te)}}K.now=g.l.now;class O extends K{constructor(ee,te=K.now){super(ee,te),this.actions=[],this._active=!1}flush(ee){const{actions:te}=this;if(this._active)return void te.push(ee);let le;this._active=!0;do{if(le=ee.execute(ee.state,ee.delay))break}while(ee=te.shift());if(this._active=!1,le){for(;ee=te.shift();)ee.unsubscribe();throw le}}}},4986:(lt,be,P)=>{P.d(be,{z:()=>O});var g=P(4408);const O=new(P(7565).v)(g.o)},6063:(lt,be,P)=>{P.d(be,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(lt,be,P)=>{P.d(be,{z:()=>g});const g={setTimeout(K,O,...J){const{delegate:ee}=g;return ee?.setTimeout?ee.setTimeout(K,O,...J):setTimeout(K,O,...J)},clearTimeout(K){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(lt,be,P)=>{P.d(be,{h:()=>K});const K=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,be,P)=>{P.d(be,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,be,P)=>{P.d(be,{_6:()=>te,jO:()=>J,yG:()=>ee});var g=P(576);function O(le){return le[le.length-1]}function J(le){return(0,g.m)(O(le))?le.pop():void 0}function ee(le){return function K(le){return le&&(0,g.m)(le.schedule)}(O(le))?le.pop():void 0}function te(le,ue){return"number"==typeof O(le)?le.pop():ue}},8737:(lt,be,P)=>{function g(K,O){if(K){const J=K.indexOf(O);0<=J&&K.splice(J,1)}}P.d(be,{P:()=>g})},3888:(lt,be,P)=>{function g(K){const J=K(ee=>{Error.call(ee),ee.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}P.d(be,{d:()=>g})},2806:(lt,be,P)=>{P.d(be,{O:()=>J,x:()=>O});var g=P(2416);let K=null;function O(ee){if(g.v.useDeprecatedSynchronousErrorHandling){const te=!K;if(te&&(K={errorThrown:!1,error:null}),ee(),te){const{errorThrown:le,error:ue}=K;if(K=null,le)throw ue}}else ee()}function J(ee){g.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=ee)}},9672:(lt,be,P)=>{function g(K,O,J,ee=0,te=!1){const le=O.schedule(function(){J(),te?K.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(K.add(le),!te)return le}P.d(be,{f:()=>g})},4671:(lt,be,P)=>{function g(K){return K}P.d(be,{y:()=>g})},1144:(lt,be,P)=>{P.d(be,{z:()=>g});const g=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(lt,be,P)=>{P.d(be,{D:()=>K});var g=P(576);function K(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(lt,be,P)=>{function g(K){return"function"==typeof K}P.d(be,{m:()=>g})},3670:(lt,be,P)=>{P.d(be,{c:()=>O});var g=P(8822),K=P(576);function O(J){return(0,K.m)(J[g.L])}},6495:(lt,be,P)=>{P.d(be,{T:()=>O});var g=P(2202),K=P(576);function O(J){return(0,K.m)(J?.[g.h])}},8239:(lt,be,P)=>{P.d(be,{t:()=>K});var g=P(576);function K(O){return(0,g.m)(O?.then)}},3260:(lt,be,P)=>{P.d(be,{L:()=>J,Q:()=>O});var g=P(655),K=P(576);function O(ee){return(0,g.FC)(this,arguments,function*(){const le=ee.getReader();try{for(;;){const{value:ue,done:se}=yield(0,g.qq)(le.read());if(se)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ue)}}finally{le.releaseLock()}})}function J(ee){return(0,K.m)(ee?.getReader)}},4482:(lt,be,P)=>{P.d(be,{A:()=>K,e:()=>O});var g=P(576);function K(J){return(0,g.m)(J?.lift)}function O(J){return ee=>{if(K(ee))return ee.lift(function(te){try{return J(te,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,be,P)=>{P.d(be,{U:()=>O,z:()=>K});var g=P(4671);function K(...J){return O(J)}function O(J){return 0===J.length?g.y:1===J.length?J[0]:function(te){return J.reduce((le,ue)=>ue(le),te)}}},7849:(lt,be,P)=>{P.d(be,{h:()=>O});var g=P(2416),K=P(3410);function O(J){K.z.setTimeout(()=>{const{onUnhandledError:ee}=g.v;if(!ee)throw J;ee(J)})}},4532:(lt,be,P)=>{function g(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(be,{z:()=>g})},655:(lt,be,P)=>{function J(re,ce){var ye={};for(var Ae in re)Object.prototype.hasOwnProperty.call(re,Ae)&&ce.indexOf(Ae)<0&&(ye[Ae]=re[Ae]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(Ae=Object.getOwnPropertySymbols(re);Oe<Ae.length;Oe++)ce.indexOf(Ae[Oe])<0&&Object.prototype.propertyIsEnumerable.call(re,Ae[Oe])&&(ye[Ae[Oe]]=re[Ae[Oe]])}return ye}function q(re,ce,ye,Ae){return new(ye||(ye=Promise))(function($e,Ze){function We(Qt){try{yt(Ae.next(Qt))}catch(Xe){Ze(Xe)}}function rn(Qt){try{yt(Ae.throw(Qt))}catch(Xe){Ze(Xe)}}function yt(Qt){Qt.done?$e(Qt.value):function Oe($e){return $e instanceof ye?$e:new ye(function(Ze){Ze($e)})}(Qt.value).then(We,rn)}yt((Ae=Ae.apply(re,ce||[])).next())})}function Ee(re){return this instanceof Ee?(this.v=re,this):new Ee(re)}function ve(re,ce,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,Ae=ye.apply(re,ce||[]),$e=[];return Oe={},Ze("next"),Ze("throw"),Ze("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function Ze(At){Ae[At]&&(Oe[At]=function(Vn){return new Promise(function(ln,wn){$e.push([At,Vn,ln,wn])>1||We(At,Vn)})})}function We(At,Vn){try{!function rn(At){At.value instanceof Ee?Promise.resolve(At.value.v).then(yt,Qt):Xe($e[0][2],At)}(Ae[At](Vn))}catch(ln){Xe($e[0][3],ln)}}function yt(At){We("next",At)}function Qt(At){We("throw",At)}function Xe(At,Vn){At(Vn),$e.shift(),$e.length&&We($e[0][0],$e[0][1])}}function Fe(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,ce=re[Symbol.asyncIterator];return ce?ce.call(re):(re=function it(re){var ce="function"==typeof Symbol&&Symbol.iterator,ye=ce&&re[ce],Ae=0;if(ye)return ye.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Ae>=re.length&&(re=void 0),{value:re&&re[Ae++],done:!re}}};throw new TypeError(ce?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ye={},Ae("next"),Ae("throw"),Ae("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function Ae($e){ye[$e]=re[$e]&&function(Ze){return new Promise(function(We,rn){!function Oe($e,Ze,We,rn){Promise.resolve(rn).then(function(yt){$e({value:yt,done:We})},Ze)}(We,rn,(Ze=re[$e](Ze)).done,Ze.value)})}}}P.d(be,{FC:()=>ve,KL:()=>Fe,_T:()=>J,mG:()=>q,qq:()=>Ee})},4650:(lt,be,P)=>{P.d(be,{$8M:()=>id,$WT:()=>$n,$Z:()=>gv,AFp:()=>Ml,AaK:()=>ue,CHM:()=>Tc,CRH:()=>A_,CZH:()=>Qm,CqO:()=>Fv,D6c:()=>f0,EJc:()=>jI,EpF:()=>cE,F4k:()=>lE,FYo:()=>pw,FiY:()=>Mu,GfV:()=>ni,Gpc:()=>$,JOm:()=>li,KtG:()=>Wl,LFG:()=>je,Lbi:()=>BI,Lck:()=>m_,MAs:()=>mm,MMx:()=>y_,NdJ:()=>Lv,OlP:()=>un,Oqu:()=>Em,P3R:()=>AC,PXZ:()=>Za,Q6J:()=>tt,QGY:()=>kv,Qsj:()=>gw,R0b:()=>ps,RDi:()=>Ms,Rgc:()=>Sl,SBq:()=>sr,Sil:()=>H_,Suo:()=>jm,TTD:()=>eu,TgZ:()=>Ge,VKq:()=>oI,X6Q:()=>uT,XFs:()=>dt,Xpm:()=>na,Xts:()=>uw,Y36:()=>Go,YKP:()=>g_,YNc:()=>tr,Yjl:()=>ia,Yz7:()=>Xe,Z0I:()=>wn,ZZ4:()=>l0,_Bn:()=>km,_UZ:()=>Se,_Vd:()=>Nf,_c5:()=>h0,_uU:()=>ch,aQg:()=>Fp,c2e:()=>nT,cJS:()=>Vn,cg1:()=>up,dDg:()=>sT,dqk:()=>Mt,eFA:()=>ry,ekj:()=>yl,eoX:()=>Ph,f3M:()=>Je,g9A:()=>U_,h0i:()=>Sh,hGG:()=>hT,iGM:()=>T_,ifc:()=>vt,ip1:()=>V_,jDz:()=>Ga,kL8:()=>fh,lG2:()=>ra,lqb:()=>de,lri:()=>ty,n5z:()=>Uc,oAB:()=>bn,oxw:()=>Uv,q4F:()=>yw,qLn:()=>qi,qOj:()=>dm,qZA:()=>ie,rWj:()=>YI,sBO:()=>t0,s_b:()=>_p,soG:()=>Ap,tb:()=>B_,tp0:()=>b,uIk:()=>Jd,vHH:()=>he,vpe:()=>Yi,wAp:()=>It,xp6:()=>ov,z2F:()=>Rp,zSh:()=>Ky,zs3:()=>Ho});var g=P(7579),K=P(727),O=P(9751),J=P(6451),ee=P(3099);function te(i){for(let s in i)if(i[s]===te)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ue(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ue).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function se(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=te({__forward_ref__:te});function $(i){return i.__forward_ref__=$,i.toString=function(){return ue(this())},i}function q(i){return Be(i)?i():i}function Be(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===$}function Ie(i){return i&&!!i.\u0275providers}const it="https://g.co/ng/security#xss";class he extends Error{constructor(s,a){super(function De(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function Ce(i){return"string"==typeof i?i:null==i?"":String(i)}function Fe(i,s){throw new he(-201,!1)}function Ze(i,s){null==i&&function We(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Xe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Vn(i){return{providers:i.providers||[],imports:i.imports||[]}}function ln(i){return In(i,Gr)||In(i,En)}function wn(i){return null!==ln(i)}function In(i,s){return i.hasOwnProperty(s)?i[s]:null}function si(i){return i&&(i.hasOwnProperty(_s)||i.hasOwnProperty(zr))?i[_s]:null}const Gr=te({\u0275prov:te}),_s=te({\u0275inj:te}),En=te({ngInjectableDef:te}),zr=te({ngInjectorDef:te});var dt=(()=>((dt=dt||{})[dt.Default=0]="Default",dt[dt.Host=1]="Host",dt[dt.Self=2]="Self",dt[dt.SkipSelf=4]="SkipSelf",dt[dt.Optional=8]="Optional",dt))();let ws;function Dn(i){const s=ws;return ws=i,s}function fr(i,s,a){const c=ln(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&dt.Optional?null:void 0!==s?s:void Fe(ue(i))}const Mt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),gn={},Un="__NG_DI_FLAG__",Mr="ngTempTokenPath",ta=/\n/gm,Xi="__source";let Kt;function xr(i){const s=Kt;return Kt=i,s}function Ri(i,s=dt.Default){if(void 0===Kt)throw new he(-203,!1);return null===Kt?fr(i,void 0,s):Kt.get(i,s&dt.Optional?null:void 0,s)}function je(i,s=dt.Default){return(function vi(){return ws}()||Ri)(q(i),s)}function Je(i,s=dt.Default){return je(i,Et(s))}function Et(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function xt(i){const s=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new he(900,!1);let d,f=dt.Default;for(let v=0;v<c.length;v++){const E=c[v],I=gr(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}s.push(je(d,f))}else s.push(je(c))}return s}function Lt(i,s){return i[Un]=s,i.prototype[Un]=s,i}function gr(i){return i[Un]}function G(i){return{toString:i}.toString()}var pe=(()=>((pe=pe||{})[pe.OnPush=0]="OnPush",pe[pe.Default=1]="Default",pe))(),vt=(()=>{return(i=vt||(vt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",vt;var i})();const Xt={},_t=[],Cn=te({\u0275cmp:te}),Bn=te({\u0275dir:te}),Gt=te({\u0275pipe:te}),_i=te({\u0275mod:te}),Zn=te({\u0275fac:te}),Ps=te({__NG_ELEMENT_ID__:te});let Kh=0;function na(i){return G(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===pe.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||_t,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||vt.Emulated,id:"c"+Kh++,styles:i.styles||_t,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=i.dependencies,v=i.features;return d.inputs=fc(i.inputs,c),d.outputs=fc(i.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(hc).filter(Bl):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Nn).filter(Bl):null,d})}function hc(i){return Zt(i)||Yn(i)}function Bl(i){return null!==i}function bn(i){return G(()=>({type:i.type,bootstrap:i.bootstrap||_t,declarations:i.declarations||_t,imports:i.imports||_t,exports:i.exports||_t,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function fc(i,s){if(null==i)return Xt;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}const ra=na;function ia(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Zt(i){return i[Cn]||null}function Yn(i){return i[Bn]||null}function Nn(i){return i[Gt]||null}function $n(i){const s=Zt(i)||Yn(i)||Nn(i);return null!==s&&s.standalone}function mr(i,s){const a=i[_i]||null;if(!a&&!0===s)throw new Error(`Type ${ue(i)} does not have '\u0275mod' property.`);return a}function qr(i){return Array.isArray(i)&&"object"==typeof i[1]}function Di(i){return Array.isArray(i)&&!0===i[1]}function sa(i){return 0!=(4&i.flags)}function Ci(i){return i.componentOffset>-1}function mc(i){return 1==(1&i.flags)}function Wr(i){return null!==i.template}function oa(i){return 0!=(256&i[2])}function Us(i,s){return i.hasOwnProperty(Zn)?i[Zn]:null}class Bs{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function eu(){return Do}function Do(i){return i.type.prototype.ngOnChanges&&(i.setInput=Co),tu}function tu(){const i=ua(this),s=i?.current;if(s){const a=i.previous;if(a===Xt)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function Co(i,s,a,c){const d=this.declaredInputs[a],f=ua(i)||function zl(i,s){return i[$s]=s}(i,{previous:Xt,current:null}),v=f.current||(f.current={}),E=f.previous,I=E[d];v[d]=new Bs(I&&I.currentValue,s,E===Xt),i[c]=s}eu.ngInherit=!0;const $s="__ngSimpleChanges__";function ua(i){return i[$s]||null}function On(i){for(;Array.isArray(i);)i=i[0];return i}function js(i,s){return On(s[i])}function Hn(i,s){return On(s[i.index])}function So(i,s){return i.data[s]}function nr(i,s){const a=s[i];return qr(a)?a:a[0]}function Ao(i){return 64==(64&i[2])}function ns(i,s){return null==s?null:i[s]}function da(i){i[18]=0}function ha(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Tt={lFrame:Ty(null),bindingsEnabled:!0};function ou(){return Tt.bindingsEnabled}function fe(){return Tt.lFrame.lView}function Yt(){return Tt.lFrame.tView}function Tc(i){return Tt.lFrame.contextLView=i,i[8]}function Wl(i){return Tt.lFrame.contextLView=null,i}function ur(){let i=fa();for(;null!==i&&64===i.type;)i=i.parent;return i}function fa(){return Tt.lFrame.currentTNode}function Zr(i,s){const a=Tt.lFrame;a.currentTNode=i,a.isParent=s}function uu(){return Tt.lFrame.isParent}function Gs(){return Tt.lFrame.bindingIndex++}function Yl(i,s){const a=Tt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Mc(s)}function Mc(i){Tt.lFrame.currentDirectiveIndex=i}function Ql(){return Tt.lFrame.currentQueryIndex}function xc(i){Tt.lFrame.currentQueryIndex=i}function Xl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function ef(i,s,a){if(a&dt.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&dt.Host||(d=Xl(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const c=Tt.lFrame=tf();return c.currentTNode=s,c.lView=i,!0}function du(i){const s=tf(),a=i[1];Tt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function tf(){const i=Tt.lFrame,s=null===i?null:i.child;return null===s?Ty(i):s}function Ty(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function eg(){const i=Tt.lFrame;return Tt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Rc=eg;function tg(){const i=eg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Pr(){return Tt.lFrame.selectedIndex}function Mo(i){Tt.lFrame.selectedIndex=i}function yn(){const i=Tt.lFrame;return So(i.tView,i.selectedIndex)}function ga(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:x}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function zs(i,s,a){qs(i,s,3,a)}function hu(i,s,a,c){(3&i[2])===a&&qs(i,s,a,c)}function ki(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function qs(i,s,a,c){const f=c??-1,v=s.length-1;let E=0;for(let I=void 0!==c?65535&i[18]:0;I<v;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=c&&E>=c)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(rf(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function rf(i,s,a,c){const d=a[c]<0,f=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class ma{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Sn(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],v=a[c++],E=a[c++];i.setAttribute(s,v,E,f)}else{const f=d,v=a[++c];Ro(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),c++}}return c}function Cs(i){return 3===i||4===i||6===i}function Ro(i){return 64===i.charCodeAt(0)}function ss(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||No(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function No(i,s,a,c,d){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function kc(i){return-1!==i}function ya(i){return 32767&i}function gu(i,s){let a=function pu(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let bs=!0;function va(i){const s=bs;return bs=i,s}let _a=0;const Xr={};function Zs(i,s){const a=yu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Ys(c.data,i),Ys(s,null),Ys(c.blueprint,null));const d=vu(i,s),f=i.injectorIndex;if(kc(d)){const v=ya(d),E=gu(d,s),I=E[1].data;for(let T=0;T<8;T++)s[f+T]=E[v+T]|I[v+T]}return s[f+8]=d,f}function Ys(i,s){i.push(0,0,0,0,0,0,0,0,s)}function yu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function vu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=rd(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function _u(i,s,a){!function mu(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Ps)&&(c=a[Ps]),null==c&&(c=a[Ps]=_a++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Qs(i,s,a){if(a&dt.Optional||void 0!==i)return i;Fe()}function wu(i,s,a,c){if(a&dt.Optional&&void 0===c&&(c=null),!(a&(dt.Self|dt.Host))){const d=i[9],f=Dn(void 0);try{return d?d.get(s,c,a&dt.Optional):fr(s,c,a&dt.Optional)}finally{Dn(f)}}return Qs(c,0,a)}function Eu(i,s,a,c=dt.Default,d){if(null!==i){if(1024&s[2]){const v=function Bc(i,s,a,c,d){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=os(f,v,a,c|dt.Self,Xr);if(E!==Xr)return E;let I=f.parent;if(!I){const T=v[21];if(T){const x=T.get(a,Xr,c);if(x!==Xr)return x}I=rd(v),v=v[15]}f=I}return d}(i,s,a,c,Xr);if(v!==Xr)return v}const f=os(i,s,a,c,Xr);if(f!==Xr)return f}return wu(s,a,c,d)}function os(i,s,a,c,d){const f=function Lc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Ps)?i[Ps]:void 0;return"number"==typeof s?s>=0?255&s:ig:s}(a);if("function"==typeof f){if(!ef(s,i,c))return c&dt.Host?Qs(d,0,c):wu(s,a,c,d);try{const v=f(c);if(null!=v||c&dt.Optional)return v;Fe()}finally{Rc()}}else if("number"==typeof f){let v=null,E=yu(i,s),I=-1,T=c&dt.Host?s[16][6]:null;for((-1===E||c&dt.SkipSelf)&&(I=-1===E?vu(i,s):s[E+8],-1!==I&&Li(c,!1)?(v=s[1],E=ya(I),s=gu(I,s)):E=-1);-1!==E;){const x=s[1];if(Vc(f,E,x.data)){const k=Fc(E,s,a,v,c,T);if(k!==Xr)return k}I=s[E+8],-1!==I&&Li(c,s[1].data[E+8]===T)&&Vc(f,E,s)?(v=x,E=ya(I),s=gu(I,s)):E=-1}}return d}function Fc(i,s,a,c,d,f){const v=s[1],E=v.data[i+8],x=ko(E,v,a,null==c?Ci(E)&&bs:c!=v&&0!=(3&E.type),d&dt.Host&&f===E);return null!==x?Fi(s,v,x,E):Xr}function ko(i,s,a,c,d){const f=i.providerIndexes,v=s.data,E=1048575&f,I=i.directiveStart,x=f>>20,H=d?E+x:i.directiveEnd;for(let Z=c?E:E+x;Z<H;Z++){const ge=v[Z];if(Z<I&&a===ge||Z>=I&&ge.type===a)return Z}if(d){const Z=v[I];if(Z&&Wr(Z)&&Z.type===a)return I}return null}function Fi(i,s,a,c){let d=i[a];const f=s.data;if(function Qr(i){return i instanceof ma}(d)){const v=d;v.resolving&&function Ee(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Pe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ce(i)}(f[a]));const E=va(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Dn(v.injectImpl):null;ef(i,c,dt.Default);try{d=i[a]=v.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function rg(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const v=Do(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Dn(I),va(E),v.resolving=!1,Rc()}}return d}function Vc(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Li(i,s){return!(i&dt.Self||i&dt.Host&&s)}class ui{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Eu(this._tNode,this._lView,s,Et(c),a)}}function ig(){return new ui(ur(),fe())}function Uc(i){return G(()=>{const s=i.prototype.constructor,a=s[Zn]||Iu(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[Zn]||Iu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Iu(i){return Be(i)?()=>{const s=Iu(q(i));return s&&s()}:Us(i)}function rd(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function id(i){return function nd(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(Cs(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(ur(),i)}const Du="__parameters__";function Ea(i,s,a){return G(()=>{const c=function sd(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const v=new d(...f);return E.annotation=v,E;function E(I,T,x){const k=I.hasOwnProperty(Du)?I[Du]:Object.defineProperty(I,Du,{value:[]})[Du];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class un{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xe({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ui(i,s){i.forEach(a=>Array.isArray(a)?Ui(a,s):s(a))}function Tu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ia(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function _r(i,s,a){let c=qt(i,s);return c>=0?i[1|c]=a:(c=~c,function uf(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Au(i,s){const a=qt(i,s);if(a>=0)return i[1|a]}function qt(i,s){return function dd(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),v=i[f<<a];if(s===v)return f<<a;v>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const Mu=Lt(Ea("Optional"),8),b=Lt(Ea("SkipSelf"),4);var li=(()=>((li=li||{})[li.Important=1]="Important",li[li.DashCase=2]="DashCase",li))();const ji=new Map;let fg=0;const yf="__ngContext__";function ei(i,s){qr(s)?(i[yf]=s[20],function J0(i){ji.set(i[20],i)}(s)):i[yf]=s}function ba(i,s){return undefined(i,s)}function Hi(i){const s=i[3];return Di(s)?s[3]:s}function Zc(i){return vg(i[13])}function Yc(i){return vg(i[4])}function vg(i){for(;null!==i&&!Di(i);)i=i[4];return i}function Js(i,s,a,c,d){if(null!=c){let f,v=!1;Di(c)?f=c:qr(c)&&(v=!0,c=c[0]);const E=On(c);0===i&&null!==a?null==d?Ma(s,a,E):Aa(s,a,E,d||null,!0):1===i&&null!==a?Aa(s,a,E,d||null,!0):2===i?function Ra(i,s,a){const c=Df(i,s);c&&function If(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=f&&function rl(i,s,a,c,d){const f=a[7];f!==On(a)&&Js(s,i,c,f,d);for(let E=10;E<a.length;E++){const I=a[E];Na(I[1],I,i,s,c,f)}}(s,i,f,a,d)}}function eo(i,s,a){return i.createElement(s,a)}function Vo(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,ha(d,-1)),a.splice(c,1)}function Sa(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&Vo(d,c),s>0&&(i[a-1][4]=c[4]);const f=Ia(i,10+s);!function ew(i,s){Na(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const v=f[19];null!==v&&v.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Jc(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Na(i,s,a,3,null,null),function _g(i){let s=i[13];if(!s)return Ru(i[1],i);for(;s;){let a=null;if(qr(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)qr(s)&&Ru(s[1],s),s=s[3];null===s&&(s=i),qr(s)&&Ru(s[1],s),a=s&&s[4]}s=a}}(s)}}function Ru(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Ef(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof ma)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const E=d[f[v]],I=f[v+1];try{I.call(E)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function wg(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),f+=2}else{const v=c[d=a[f+1]];a[f].call(v)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&Di(s[3])){a!==s[3]&&Vo(a,s);const c=s[19];null!==c&&c.detachView(i)}!function gg(i){ji.delete(i[20])}(s)}}function el(i,s,a){return function Eg(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===vt.None||f===vt.Emulated)return null}return Hn(c,a)}}(i,s.parent,a)}function Aa(i,s,a,c,d){i.insertBefore(s,a,c,d)}function Ma(i,s,a){i.appendChild(s,a)}function Ig(i,s,a,c,d){null!==c?Aa(i,s,a,c,d):Ma(i,s,a)}function Df(i,s){return i.parentNode(s)}let Td,Pu,Cf=function Dg(i,s,a){return 40&i.type?Hn(i,a):null};function tl(i,s,a,c){const d=el(i,c,s),f=s[11],E=function Dd(i,s,a){return Cf(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)Ig(f,d,a[I],E,!1);else Ig(f,d,a,E,!1)}function Uo(i,s){if(null!==s){const a=s.type;if(3&a)return Hn(s,i);if(4&a)return di(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Uo(i,c);{const d=i[s.index];return Di(d)?di(-1,d):On(d)}}if(32&a)return ba(s,i)()||On(i[s.index]);{const c=Cg(i,s);return null!==c?Array.isArray(c)?c[0]:Uo(Hi(i[16]),c):Uo(i,s.next)}}return null}function Cg(i,s){return null!==s?i[16][6].projection[s.projection]:null}function di(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return Uo(c,d)}return s[7]}function Bo(i,s,a,c,d,f,v){for(;null!=a;){const E=c[a.index],I=a.type;if(v&&0===s&&(E&&ei(On(E),c),a.flags|=2),32!=(32&a.flags))if(8&I)Bo(i,s,a.child,c,d,f,!1),Js(s,i,d,E,f);else if(32&I){const T=ba(a,c);let x;for(;x=T();)Js(s,i,d,x,f);Js(s,i,d,E,f)}else 16&I?nl(i,s,c,a,d,f):Js(s,i,d,E,f);a=v?a.projectionNext:a.next}}function Na(i,s,a,c,d,f){Bo(a,c,i.firstChild,s,d,f,!1)}function nl(i,s,a,c,d,f){const v=a[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Js(s,i,d,I[T],f);else Bo(i,s,I,v[3],d,f,!0)}function As(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function bg(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&Sn(i,s,c),null!==d&&As(i,s,d),null!==f&&function jy(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function Ms(i){Td=i}function Mg(i){return function Sd(){if(void 0===Pu&&(Pu=null,Mt.trustedTypes))try{Pu=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Pu}()?.createScriptURL(i)||i}class Sf{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${it})`}}function _(i){return i instanceof Sf?i.changingThisBreaksApplicationSecurity:i}function S(i,s){const a=function R(i){return i instanceof Sf&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${it})`)}return a===s}const Md=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var ir=(()=>((ir=ir||{})[ir.NONE=0]="NONE",ir[ir.HTML=1]="HTML",ir[ir.STYLE=2]="STYLE",ir[ir.SCRIPT=3]="SCRIPT",ir[ir.URL=4]="URL",ir[ir.RESOURCE_URL=5]="RESOURCE_URL",ir))();function TC(i){const s=kg();return s?s.sanitize(ir.URL,i)||"":S(i,"URL")?_(i):function sl(i){return(i=String(i)).match(Md)?i:"unsafe:"+i}(Ce(i))}function SC(i){const s=kg();if(s)return Mg(s.sanitize(ir.RESOURCE_URL,i)||"");if(S(i,"ResourceURL"))return Mg(_(i));throw new he(904,!1)}function AC(i,s,a){return function BS(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?SC:TC}(s,a)(i)}function kg(){const i=fe();return i&&i[12]}const uw=new un("ENVIRONMENT_INITIALIZER"),xC=new un("INJECTOR",-1),cw=new un("INJECTOR_DEF_TYPES");class lw{get(s,a=gn){if(a===gn){const c=new Error(`NullInjectorError: No provider for ${ue(s)}!`);throw c.name="NullInjectorError",c}return a}}function RC(...i){return{\u0275providers:gt(0,i),\u0275fromNgModule:!0}}function gt(i,...s){const a=[],c=new Set;let d;return Ui(s,f=>{const v=f;al(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&Lr(d,a),a}function Lr(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];xf(d,f=>{s.push(f)})}}function al(i,s,a,c){if(!(i=q(i)))return!1;let d=null,f=si(i);const v=!f&&Zt(i);if(f||v){if(v&&!v.standalone)return!1;d=i}else{const I=i.ngModule;if(f=si(I),!f)return!1;d=I}const E=c.has(d);if(v){if(E)return!1;if(c.add(d),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of I)al(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let T;c.add(d);try{Ui(f.imports,x=>{al(x,s,a,c)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&Lr(T,s)}if(!E){const T=Us(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:_t},{provide:cw,useValue:d,multi:!0},{provide:uw,useValue:()=>je(d),multi:!0})}const I=f.providers;null==I||E||xf(I,x=>{s.push(x)})}}return d!==i&&void 0!==i.providers}function xf(i,s){for(let a of i)Ie(a)&&(a=a.\u0275providers),Array.isArray(a)?xf(a,s):s(a)}const Ti=te({provide:String,useValue:te});function Rd(i){return null!==i&&"object"==typeof i&&Ti in i}function to(i){return"function"==typeof i}const Ky=new un("Set Injector scope."),Lg={},no={};let hw;function Vg(){return void 0===hw&&(hw=new lw),hw}class de{}class ku extends de{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Od(s,v=>this.processProvider(v)),this.records.set(xC,zi(void 0,this)),d.has("environment")&&this.records.set(de,zi(void 0,this));const f=this.records.get(Ky);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(cw.multi,_t,dt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=xr(this),c=Dn(void 0);try{return s()}finally{xr(a),Dn(c)}}get(s,a=gn,c=dt.Default){this.assertNotDestroyed(),c=Et(c);const d=xr(this),f=Dn(void 0);try{if(!(c&dt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function Ut(i){return"function"==typeof i||"object"==typeof i&&i instanceof un}(s)&&ln(s);E=I&&this.injectableDefInScope(I)?zi(Nd(s),Lg):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&dt.Self?Vg():this.parent).get(s,a=c&dt.Optional&&a===gn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Mr]=v[Mr]||[]).unshift(ue(s)),d)throw v;return function U(i,s,a,c){const d=i[Mr];throw s[Xi]&&d.unshift(s[Xi]),i.message=function L(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ue(s);if(Array.isArray(s))d=s.map(ue).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];f.push(v+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(ta,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Mr]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{Dn(f),xr(d)}}resolveInjectorInitializers(){const s=xr(this),a=Dn(void 0);try{const c=this.get(uw.multi,_t,dt.Self);for(const d of c)d()}finally{xr(s),Dn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ue(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(s){let a=to(s=q(s))?s:q(s&&s.provide);const c=function cn(i){return Rd(i)?zi(void 0,i.useValue):zi(fw(i),Lg)}(s);if(to(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=zi(void 0,Lg,!0),d.factory=()=>xt(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===Lg&&(a.value=no,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Zy(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=q(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Nd(i){const s=ln(i),a=null!==s?s.factory:Us(i);if(null!==a)return a;if(i instanceof un)throw new he(204,!1);if(i instanceof Function)return function Fu(i){const s=i.length;if(s>0)throw function Fo(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new he(204,!1);const a=function ii(i){const s=i&&(i[Gr]||i[En]);if(s){const a=function Rs(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new he(204,!1)}function fw(i,s,a){let c;if(to(i)){const d=q(i);return Us(d)||Nd(d)}if(Rd(i))c=()=>q(i.useValue);else if(function dw(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...xt(i.deps||[]));else if(function Fg(i){return!(!i||!i.useExisting)}(i))c=()=>je(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function ft(i){return!!i.deps}(i))return Us(d)||Nd(d);c=()=>new d(...xt(i.deps))}return c}function zi(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Od(i,s){for(const a of i)Array.isArray(a)?Od(a,s):a&&Ie(a)?Od(a.\u0275providers,s):s(a)}class Ug{}class Pd{}class OC{resolveComponentFactory(s){throw function NC(i){const s=Error(`No component factory found for ${ue(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Nf=(()=>{class i{}return i.NULL=new OC,i})();function hi(){return Pa(ur(),fe())}function Pa(i,s){return new sr(Hn(i,s))}let sr=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=hi,i})();function Lu(i){return i instanceof sr?i.nativeElement:i}class pw{}let gw=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Yy(){const i=fe(),a=nr(ur().index,i);return(qr(a)?a:i)[11]}(),i})(),mw=(()=>{class i{}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:()=>null}),i})();class ni{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const yw=new ni("15.1.5"),kd={};function Fd(i){return i.ngOriginalError}class qi{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Fd(s);for(;a&&Fd(a);)a=Fd(a);return a||null}}function jo(i){return i instanceof Function?i():i}function Hg(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const tv="ng-template";function FC(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Hg(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Ud(i){return 4===i.type&&i.value!==tv}function LC(i,s,a){return s===(4!==i.type||a?i.value:tv)}function Of(i,s,a){let c=4;const d=i.attrs||[],f=function Dw(i){for(let s=0;s<i.length;s++)if(Cs(i[s]))return s;return i.length}(d);let v=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!LC(i,I,a)||""===I&&1===s.length){if(ro(c))return!1;v=!0}}else{const T=8&c?I:s[++E];if(8&c&&null!==i.attrs){if(!FC(i.attrs,T,a)){if(ro(c))return!1;v=!0}continue}const k=VC(8&c?"class":I,d,Ud(i),a);if(-1===k){if(ro(c))return!1;v=!0;continue}if(""!==T){let H;H=k>f?"":d[k+1].toLowerCase();const Z=8&c?H:null;if(Z&&-1!==Hg(Z,T,0)||2&c&&T!==H){if(ro(c))return!1;v=!0}}}}else{if(!v&&!ro(c)&&!ro(I))return!1;if(v&&ro(I))continue;v=!1,c=I|1&c}}return ro(c)||v}function ro(i){return 0==(1&i)}function VC(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const v=s[d];if(v===i)return d;if(3===v||6===v)f=!0;else{if(1===v||2===v){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=f?1:2}return-1}return function Cw(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function Pf(i,s,a=!1){for(let c=0;c<s.length;c++)if(Of(i,s[c],a))return!0;return!1}function kf(i,s){return i?":not("+s.trim()+")":s}function rv(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const E=i[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!ro(v)&&(s+=kf(f,d),d=""),c=v,f=f||!ro(c);a++}return""!==d&&(s+=kf(f,d)),s}const kt={};function ov(i){av(Yt(),fe(),Pr()+i,!1)}function av(i,s,a,c){if(!c)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&zs(s,f,a)}else{const f=i.preOrderHooks;null!==f&&hu(s,f,0,a)}Mo(a)}function Er(i,s=null,a=null,c){const d=Vr(i,s,a,c);return d.resolveInjectorInitializers(),d}function Vr(i,s=null,a=null,c,d=new Set){const f=[a||_t,RC(i)];return c=c||("object"==typeof i?void 0:ue(i)),new ku(f,s||Vg(),c||null,d)}let Ho=(()=>{class i{static create(a,c){if(Array.isArray(a))return Er({name:""},c,a,"");{const d=a.name??"";return Er({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=gn,i.NULL=new lw,i.\u0275prov=Xe({token:i,providedIn:"any",factory:()=>je(xC)}),i.__NG_ELEMENT_ID__=-1,i})();function Go(i,s=dt.Default){const a=fe();return null===a?je(i,s):Eu(ur(),a,q(i),s)}function gv(){throw new Error("invalid")}function mv(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const v=i.data[f];xc(a[c]),v.contentQueries(2,s[f],f)}}}function Vf(i,s,a,c,d,f,v,E,I,T,x){const k=s.blueprint.slice();return k[0]=d,k[2]=76|c,(null!==x||i&&1024&i[2])&&(k[2]|=1024),da(k),k[3]=k[15]=i,k[8]=a,k[10]=v||i&&i[10],k[11]=E||i&&i[11],k[12]=I||i&&i[12]||null,k[9]=T||i&&i[9]||null,k[6]=f,k[20]=function pg(){return fg++}(),k[21]=x,k[16]=2==s.type?i[16]:k,k}function Vu(i,s,a,c,d){let f=i.data[s];if(null===f)f=function Qg(i,s,a,c,d){const f=fa(),v=uu(),I=i.data[s]=function Hw(i,s,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(v?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,c,d),function Zl(){return Tt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const v=function au(){const i=Tt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return Zr(f,!0),f}function Hd(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function cl(i,s,a){du(s);try{const c=i.viewQuery;null!==c&&im(1,c,a);const d=i.template;null!==d&&Xg(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&mv(i,s),i.staticViewQueries&&im(2,i.viewQuery,a);const f=i.components;null!==f&&function Yg(i,s){for(let a=0;a<s.length;a++)Qw(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,tg()}}function Gd(i,s,a,c){const d=s[2];if(128!=(128&d)){du(s);try{da(s),function Ds(i){return Tt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Xg(i,s,a,2,c);const v=3==(3&d);if(v){const T=i.preOrderCheckHooks;null!==T&&zs(s,T,null)}else{const T=i.preOrderHooks;null!==T&&hu(s,T,0,null),ki(s,0)}if(function qC(i){for(let s=Zc(i);null!==s;s=Yc(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c];512&d[2]||ha(d[3],1),d[2]|=512}}}(s),function zC(i){for(let s=Zc(i);null!==s;s=Yc(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];Ao(c)&&Gd(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&mv(i,s),v){const T=i.contentCheckHooks;null!==T&&zs(s,T)}else{const T=i.contentHooks;null!==T&&hu(s,T,1),ki(s,1)}!function Si(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Mo(~d);else{const f=d,v=a[++c],E=a[++c];Yl(v,f),E(2,s[f])}}}finally{Mo(-1)}}(i,s);const E=i.components;null!==E&&function Lf(i,s){for(let a=0;a<s.length;a++)zf(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&im(2,I,c),v){const T=i.viewCheckHooks;null!==T&&zs(s,T)}else{const T=i.viewHooks;null!==T&&hu(s,T,2),ki(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,ha(s[3],-1))}finally{tg()}}}function Xg(i,s,a,c,d){const f=Pr(),v=2&c;try{Mo(-1),v&&s.length>22&&av(i,s,22,!1),a(c,d)}finally{Mo(f)}}function Uf(i,s,a){if(sa(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}function zd(i,s,a){ou()&&(function qw(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;Ci(a)&&function Gf(i,s,a){const c=Hn(s,i),d=yv(a),f=i[10],v=qf(i,Vf(i,d,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=v}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Zs(a,s),ei(c,s);const v=a.initialInputs;for(let E=d;E<f;E++){const I=i.data[E],T=Fi(s,i,E,a);ei(T,s),null!==v&&Zw(0,E-d,T,I,0,v),Wr(I)&&(nr(a.index,s)[8]=Fi(s,i,E,a))}}(i,s,a,Hn(a,s)),64==(64&a.flags)&&Ww(i,s,a))}function ll(i,s,a=Hn){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],E=-1===v?a(s,i):i[v];i[d++]=E}}}function yv(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=vv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function vv(i,s,a,c,d,f,v,E,I,T){const x=22+c,k=x+d,H=function _v(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:kt);return a}(x,k),Z="function"==typeof T?T():T;return H[1]={type:i,blueprint:H,template:a,queries:null,viewQuery:E,declTNode:s,data:H.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Z,incompleteFirstPass:!1}}function em(i,s,a,c){const d=Dv(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Cv(i).push(c,d.length-1))}function wv(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?Ev(a,s,d,f):c.hasOwnProperty(d)&&Ev(a,s,c[d],f)}return a}function Ev(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function $f(i,s){const a=nr(s,i);16&a[2]||(a[2]|=32)}function Hf(i,s,a,c){let d=!1;if(ou()){const f=null===c?null:{"":-1},v=function ka(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const v=a[f];if(Pf(s,v.selectors,!1))if(c||(c=[]),Wr(v))if(null!==v.findHostDirectiveDefs){const E=[];d=d||new Map,v.findHostDirectiveDefs(v,E,d),c.unshift(...E,v),Wd(i,s,E.length)}else c.unshift(v),Wd(i,s,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let E,I;null===v?E=I=null:[E,I]=v,null!==E&&(d=!0,Gw(i,s,a,E,f,I)),f&&function tm(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new he(-301,!1);c.push(s[d],f)}}}(a,c,f)}return a.mergedAttrs=ss(a.mergedAttrs,a.attrs),d}function Gw(i,s,a,c,d,f){for(let T=0;T<c.length;T++)_u(Zs(a,s),i,c[T].type);!function kn(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const x=c[T];x.providersResolver&&x.providersResolver(x)}let v=!1,E=!1,I=Hd(i,s,c.length,null);for(let T=0;T<c.length;T++){const x=c[T];a.mergedAttrs=ss(a.mergedAttrs,x.hostAttrs),nm(i,a,s,I,x),Kw(I,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const k=x.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!E&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),I++}!function jC(i,s,a){const d=s.directiveEnd,f=i.data,v=s.attrs,E=[];let I=null,T=null;for(let x=s.directiveStart;x<d;x++){const k=f[x],H=a?a.get(k):null,ge=H?H.outputs:null;I=wv(k.inputs,x,I,H?H.inputs:null),T=wv(k.outputs,x,T,ge);const ke=null===I||null===v||Ud(s)?null:GC(I,x,v);E.push(ke)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=8),I.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=I,s.outputs=T}(i,a,f)}function Ww(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,v=function Ac(){return Tt.lFrame.currentDirectiveIndex}();try{Mo(f);for(let E=c;E<d;E++){const I=i.data[E],T=s[E];Mc(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&dl(I,T)}}finally{Mo(-1),Mc(v)}}function dl(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Wd(i,s,a){s.componentOffset=a,(i.components||(i.components=[])).push(s.index)}function Kw(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;Wr(s)&&(a[""]=i)}}function nm(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=Us(d.type)),v=new ma(f,Wr(d),Go);i.blueprint[c]=v,a[c]=v,function HC(i,s,a,c,d){const f=d.hostBindings;if(f){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const E=~s.index;(function zw(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=E&&v.push(E),v.push(a,c,f)}}(i,s,c,Hd(i,a,d.hostVars,kt),d)}function Ki(i,s,a,c,d,f){const v=Hn(i,s);!function Iv(i,s,a,c,d,f,v){if(null==f)i.removeAttribute(s,d,a);else{const E=null==v?Ce(f):v(f,c||"",d);i.setAttribute(s,d,E,a)}}(s[11],v,f,i.value,a,c,d)}function Zw(i,s,a,c,d,f){const v=f[s];if(null!==v){const E=c.setInput;for(let I=0;I<v.length;){const T=v[I++],x=v[I++],k=v[I++];null!==E?c.setInput(a,k,T,x):a[x]=k}}}function GC(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const v=i[f];for(let E=0;E<v.length;E+=2)if(v[E]===s){c.push(f,v[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function Yw(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function zf(i,s){const a=nr(s,i);if(Ao(a)){const c=a[1];48&a[2]?Gd(c,a,c.template,a[8]):a[5]>0&&zo(a)}}function zo(i){for(let c=Zc(i);null!==c;c=Yc(c))for(let d=10;d<c.length;d++){const f=c[d];if(Ao(f))if(512&f[2]){const v=f[1];Gd(v,f,v.template,f[8])}else f[5]>0&&zo(f)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=nr(a[c],i);Ao(d)&&d[5]>0&&zo(d)}}function Qw(i,s){const a=nr(s,i),c=a[1];(function Xw(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),cl(c,a,a[8])}function qf(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Uu(i){for(;i;){i[2]|=32;const s=Hi(i);if(oa(i)&&!s)return i;i=s}return null}function rm(i,s,a,c=!0){const d=s[10];d.begin&&d.begin();try{Gd(i,s,i.template,a)}catch(v){throw c&&om(s,v),v}finally{d.end&&d.end()}}function im(i,s,a){xc(0),s(i,a)}function Dv(i){return i[7]||(i[7]=[])}function Cv(i){return i.cleanup||(i.cleanup=[])}function om(i,s){const a=i[9],c=a?a.get(qi,null):null;c&&c.handleError(s)}function am(i,s,a,c,d){for(let f=0;f<a.length;){const v=a[f++],E=a[f++],I=s[v],T=i.data[v];null!==T.setInput?T.setInput(I,d,c,E):I[E]=d}}function Kd(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?f=E:1==f?d=se(d,E):2==f&&(c=se(c,E+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function um(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(On(f)),Di(f))for(let E=10;E<f.length;E++){const I=f[E],T=I[1].firstChild;null!==T&&um(I[1],I,T,c)}const v=a.type;if(8&v)um(i,s,a.child,c);else if(32&v){const E=ba(a,s);let I;for(;I=E();)c.push(I)}else if(16&v){const E=Cg(s,a);if(Array.isArray(E))c.push(...E);else{const I=Hi(s[16]);um(I[1],I,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class Wf{get rootNodes(){const s=this._lView,a=s[1];return um(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Di(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(Sa(s,c),Ia(a,c))}this._attachedToViewContainer=!1}Jc(this._lView[1],this._lView)}onDestroy(s){em(this._lView[1],this._lView,null,s)}markForCheck(){Uu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Id(i,s){Na(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=s}}class WC extends Wf{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;rm(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Kf extends Nf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Zt(s);return new Yd(a,this.ngModule)}}function Zd(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class bv{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=Et(c);const d=this.injector.get(s,kd,c);return d!==kd||a===kd?d:this.parentInjector.get(s,a,c)}}class Yd extends Pd{get inputs(){return Zd(this.componentDef.inputs)}get outputs(){return Zd(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function iv(i){return i.map(rv).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof de?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new bv(s,f):s,E=v.get(pw,null);if(null===E)throw new he(407,!1);const I=v.get(mw,null),T=E.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",k=c?function Jg(i,s,a){return i.selectRootElement(s,a===vt.ShadowDom)}(T,c,this.componentDef.encapsulation):eo(T,x,function cm(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(x)),H=this.componentDef.onPush?288:272,Z=vv(0,null,null,1,0,null,null,null,null,null),ge=Vf(null,Z,null,H,null,null,E,T,I,v,null);let ke,Ke;du(ge);try{const rt=this.componentDef;let bt,Me=null;rt.findHostDirectiveDefs?(bt=[],Me=new Map,rt.findHostDirectiveDefs(rt,bt,Me),bt.push(rt)):bt=[rt];const Ot=function KC(i,s){const a=i[1];return i[22]=s,Vu(a,22,2,"#host",null)}(ge,k),An=function er(i,s,a,c,d,f,v,E){const I=d[1];!function Jw(i,s,a,c){for(const d of i)s.mergedAttrs=ss(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(Kd(s,s.mergedAttrs,!0),null!==a&&bg(c,a,s))}(c,i,s,v);const T=f.createRenderer(s,a),x=Vf(d,yv(a),null,a.onPush?32:16,d[i.index],i,f,T,E||null,null,null);return I.firstCreatePass&&Wd(I,i,c.length-1),qf(d,x),d[i.index]=x}(Ot,k,rt,bt,ge,E,T);Ke=So(Z,22),k&&function YC(i,s,a,c){if(c)Sn(i,a,["ng-version",yw.full]);else{const{attrs:d,classes:f}=function sv(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!ro(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Sn(i,a,d),f&&f.length>0&&As(i,a,f.join(" "))}}(T,rt,k,c),void 0!==a&&function QC(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Ke,this.ngContentSelectors,a),ke=function ZC(i,s,a,c,d,f){const v=ur(),E=d[1],I=Hn(v,d);Gw(E,d,v,a,null,c);for(let x=0;x<a.length;x++)ei(Fi(d,E,v.directiveStart+x,v),d);Ww(E,d,v),I&&ei(I,d);const T=Fi(d,E,v.directiveStart+v.componentOffset,v);if(i[8]=d[8]=T,null!==f)for(const x of f)x(T,s);return Uf(E,v,i),T}(An,rt,bt,Me,ge,[eE]),cl(Z,ge,null)}finally{tg()}return new Zf(this.componentType,ke,Pa(Ke,ge),ge,Ke)}}class Zf extends Ug{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new WC(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const f=this._rootLView;am(f[1],f,d,s,a),$f(f,this._tNode.index)}}get injector(){return new ui(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function eE(){const i=ur();ga(fe()[1],i)}function dm(i){let s=function Tv(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(Wr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new he(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=fm(i.inputs),v.declaredInputs=fm(i.declaredInputs),v.outputs=fm(i.outputs);const E=d.hostBindings;E&&nE(i,E);const I=d.viewQuery,T=d.contentQueries;if(I&&Fa(i,I),T&&tE(i,T),le(i.inputs,d.inputs),le(i.declaredInputs,d.declaredInputs),le(i.outputs,d.outputs),Wr(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let v=0;v<f.length;v++){const E=f[v];E&&E.ngInherit&&E(i),E===dm&&(a=!1)}}s=Object.getPrototypeOf(s)}!function hm(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=ss(d.hostAttrs,a=ss(a,d.hostAttrs))}}(c)}function fm(i){return i===Xt?{}:i===_t?[]:i}function Fa(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function tE(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function nE(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}let Bu=null;function $u(){if(!Bu){const i=Mt.Symbol;if(i&&i.iterator)Bu=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Bu=c)}}}return Bu}function Qd(i){return!!Xd(i)&&(Array.isArray(i)||!(i instanceof Map)&&$u()in i)}function Xd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ri(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Jd(i,s,a,c){const d=fe();return ri(d,Gs(),s)&&(Yt(),Ki(yn(),d,i,s,a,c)),Jd}function tr(i,s,a,c,d,f,v,E){const I=fe(),T=Yt(),x=i+22,k=T.firstCreatePass?function Ne(i,s,a,c,d,f,v,E,I){const T=s.consts,x=Vu(s,i,4,v||null,ns(T,E));Hf(s,a,x,ns(T,I)),ga(s,x);const k=x.tViews=vv(2,x,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,T,I,s,a,c,d,f,v):T.data[x];Zr(k,!1);const H=I[11].createComment("");tl(T,I,H,k),ei(H,I),qf(I,I[x]=Yw(H,I,H,k)),mc(k)&&zd(T,I,k),null!=v&&ll(I,k,E)}function mm(i){return function Hs(i,s){return i[s]}(function Kl(){return Tt.lFrame.contextLView}(),22+i)}function tt(i,s,a){const c=fe();return ri(c,Gs(),s)&&function Wi(i,s,a,c,d,f,v,E){const I=Hn(s,a);let x,T=s.inputs;!E&&null!=T&&(x=T[c])?(am(i,a,x,c,d),Ci(s)&&$f(a,s.index)):3&s.type&&(c=function Bf(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,s.value||"",c):d,f.setProperty(I,c,d))}(Yt(),yn(),c,i,s,c[11],a,!1),tt}function ut(i,s,a,c,d){const v=d?"class":"style";am(i,a,s.inputs[v],v,c)}function Ge(i,s,a,c){const d=fe(),f=Yt(),v=22+i,E=d[11],I=d[v]=eo(E,s,function ng(){return Tt.lFrame.currentNamespace}()),T=f.firstCreatePass?function eb(i,s,a,c,d,f,v){const E=s.consts,T=Vu(s,i,2,d,ns(E,f));return Hf(s,a,T,ns(E,v)),null!==T.attrs&&Kd(T,T.attrs,!1),null!==T.mergedAttrs&&Kd(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(v,f,d,0,s,a,c):f.data[v];return Zr(T,!0),bg(E,I,T),32!=(32&T.flags)&&tl(f,d,I,T),0===function su(){return Tt.lFrame.elementDepthCount}()&&ei(I,d),function Dc(){Tt.lFrame.elementDepthCount++}(),mc(T)&&(zd(f,d,T),Uf(f,T,d)),null!==c&&ll(d,T),Ge}function ie(){let i=ur();uu()?function cu(){Tt.lFrame.isParent=!1}():(i=i.parent,Zr(i,!1));const s=i;!function Cc(){Tt.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(ga(a,i),sa(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function td(i){return 0!=(8&i.flags)}(s)&&ut(a,s,fe(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function fu(i){return 0!=(16&i.flags)}(s)&&ut(a,s,fe(),s.stylesWithoutHost,!1),ie}function Se(i,s,a,c){return Ge(i,s,a,c),ie(),Se}function cE(){return fe()}function kv(i){return!!i&&"function"==typeof i.then}function lE(i){return!!i&&"function"==typeof i.subscribe}const Fv=lE;function Lv(i,s,a,c){const d=fe(),f=Yt(),v=ur();return function Vv(i,s,a,c,d,f,v){const E=mc(c),T=i.firstCreatePass&&Cv(i),x=s[8],k=Dv(s);let H=!0;if(3&c.type||v){const ke=Hn(c,s),Ke=v?v(ke):ke,rt=k.length,bt=v?Ot=>v(On(Ot[c.index])):c.index;let Me=null;if(!v&&E&&(Me=function nb(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const v=d[f];if(v===a&&d[f+1]===c){const E=s[7],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof v&&(f+=2)}return null}(i,s,d,c.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=f,Me.__ngLastListenerFn__=f,H=!1;else{f=ml(c,s,x,f,!1);const Ot=a.listen(Ke,d,f);k.push(f,Ot),T&&T.push(d,bt,rt,rt+1)}}else f=ml(c,s,x,f,!1);const Z=c.outputs;let ge;if(H&&null!==Z&&(ge=Z[d])){const ke=ge.length;if(ke)for(let Ke=0;Ke<ke;Ke+=2){const An=s[ge[Ke]][ge[Ke+1]].subscribe(f),ar=k.length;k.push(f,An),T&&T.push(d,c.index,ar,-(ar+1))}}}(f,d,d[11],v,i,s,c),Lv}function Ft(i,s,a,c){try{return!1!==a(c)}catch(d){return om(i,d),!1}}function ml(i,s,a,c,d){return function f(v){if(v===Function)return c;Uu(i.componentOffset>-1?nr(i.index,s):s);let I=Ft(s,0,c,v),T=f.__ngNextListenerFn__;for(;T;)I=Ft(s,0,T,v)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Uv(i=1){return function Sy(i){return(Tt.lFrame.contextLView=function Jl(i,s){for(;i>0;)s=s[15],i--;return s}(i,Tt.lFrame.contextLView))[8]}(i)}function zu(i,s){return i<<17|s<<2}function Va(i){return i>>17&32767}function rp(i){return 2|i}function qu(i){return(131068&i)>>2}function _m(i,s){return-131069&i|s<<2}function ip(i){return 1|i}function ih(i,s,a,c,d){const f=i[a+1],v=null===s;let E=c?Va(f):qu(f),I=!1;for(;0!==E&&(!1===I||v);){const x=i[E+1];Ku(i[E],s)&&(I=!0,i[E+1]=c?ip(x):rp(x)),E=c?Va(x):qu(x)}I&&(i[a+1]=c?rp(f):ip(f))}function Ku(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&qt(i,s)>=0}function yl(i,s){return function co(i,s,a,c){const d=fe(),f=Yt(),v=function Pi(i){const s=Tt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Xu(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[Pr()],v=function zn(i,s){return s>=i.expandoStartIndex}(i,a);(function wm(i,s){return 0!=(i.flags&(s?8:16))})(f,c)&&null===s&&!v&&(s=!1),s=function Hv(i,s,a,c){const d=function rs(i){const s=Tt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=lo(a=oh(null,i,s,a,c),s.attrs,c),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==d)if(a=oh(d,i,s,a,c),null===f){let I=function vE(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==qu(c))return i[Va(c)]}(i,s,c);void 0!==I&&Array.isArray(I)&&(I=oh(null,i,s,I[1],c),I=lo(I,s.attrs,c),function sp(i,s,a,c){i[Va(a?s.classBindings:s.styleBindings)]=c}(i,s,c,I))}else f=function Ju(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=lo(c,i[f].hostAttrs,a);return lo(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function ao(i,s,a,c,d,f){let v=f?s.classBindings:s.styleBindings,E=Va(v),I=qu(v);i[c]=a;let x,T=!1;if(Array.isArray(a)?(x=a[1],(null===x||qt(a,x)>0)&&(T=!0)):x=a,d)if(0!==I){const H=Va(i[E+1]);i[c+1]=zu(H,E),0!==H&&(i[H+1]=_m(i[H+1],c)),i[E+1]=function ds(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=zu(E,0),0!==E&&(i[E+1]=_m(i[E+1],c)),E=c;else i[c+1]=zu(I,0),0===E?E=c:i[I+1]=_m(i[I+1],c),I=c;T&&(i[c+1]=rp(i[c+1])),ih(i,x,c,!0),ih(i,x,c,!1),function rb(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&qt(f,s)>=0&&(a[c+1]=ip(a[c+1]))}(s,x,i,c,f),v=zu(E,I),f?s.classBindings=v:s.styleBindings=v}(d,f,s,a,v,c)}}(f,i,v,c),s!==kt&&ri(d,v,s)&&function Gv(i,s,a,c,d,f,v,E){if(!(3&s.type))return;const I=i.data,T=I[E+1],x=function Wu(i){return 1==(1&i)}(T)?vl(I,s,a,d,qu(T),v):void 0;uh(x)||(uh(f)||function fE(i){return 2==(2&i)}(T)&&(f=vl(I,null,a,d,E,v)),function $y(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:li.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=li.Important),i.setStyle(a,c,d,f))}}(c,v,js(Pr(),a),d,f))}(f,f.data[Pr()],d,d[11],i,d[v+1]=function _l(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ue(_(i)))),i}(s,a),c,v)}(i,s,null,!0),yl}function oh(i,s,a,c,d){let f=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(f=s[E],c=lo(c,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function lo(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),_r(i,v,!!a||s[++f]))}return void 0===i?null:i}function vl(i,s,a,c,d,f){const v=null===s;let E;for(;d>0;){const I=i[d],T=Array.isArray(I),x=T?I[1]:I,k=null===x;let H=a[d+1];H===kt&&(H=k?_t:void 0);let Z=k?Au(H,c):x===c?H:void 0;if(T&&!uh(Z)&&(Z=Au(I,c)),uh(Z)&&(E=Z,v))return E;const ge=i[d+1];d=v?Va(ge):qu(ge)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=Au(I,c))}return E}function uh(i){return void 0!==i}function ch(i,s=""){const a=fe(),c=Yt(),d=i+22,f=c.firstCreatePass?Vu(c,d,1,s,null):c.data[d],v=a[d]=function Ed(i,s){return i.createText(s)}(a[11],s);tl(c,a,v,f),Zr(f,!1)}function Em(i){return Im("",i,""),Em}function Im(i,s,a){const c=fe(),d=function hl(i,s,a,c){return ri(i,Gs(),a)?s+Ce(a)+c:kt}(c,i,s,a);return d!==kt&&function qo(i,s,a){const c=js(s,i);!function wf(i,s,a){i.setValue(s,a)}(i[11],c,a)}(c,Pr(),d),Im}const dr=void 0;var NE=["en",[["a","p"],["AM","PM"],dr],[["AM","PM"],dr,dr],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dr,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dr,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dr,"{1} 'at' {0}",dr],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jr(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let hn={};function up(i){const s=function OE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=cp(s);if(a)return a;const c=s.split("-")[0];if(a=cp(c),a)return a;if("en"===c)return NE;throw new he(701,!1)}function fh(i){return up(i)[It.PluralCase]}function cp(i){return i in hn||(hn[i]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[i]),hn[i]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const ho="en-US";let fi=ho;function Om(i,s,a,c,d){if(i=q(i),Array.isArray(i))for(let f=0;f<i.length;f++)Om(i[f],s,a,c,d);else{const f=Yt(),v=fe();let E=to(i)?i:q(i.provide),I=fw(i);const T=ur(),x=1048575&T.providerIndexes,k=T.directiveStart,H=T.providerIndexes>>20;if(to(i)||!i.multi){const Z=new ma(I,d,Go),ge=Pm(E,s,d?x:x+H,k);-1===ge?(_u(Zs(T,v),f,E),bl(f,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Z),v.push(Z)):(a[ge]=Z,v[ge]=Z)}else{const Z=Pm(E,s,x+H,k),ge=Pm(E,s,x,x+H),Ke=ge>=0&&a[ge];if(d&&!Ke||!d&&!(Z>=0&&a[Z])){_u(Zs(T,v),f,E);const rt=function pp(i,s,a,c,d){const f=new ma(i,a,Go);return f.multi=[],f.index=s,f.componentProviders=0,f_(f,d,c&&!a),f}(d?bb:eI,a.length,d,c,I);!d&&Ke&&(a[ge].providerFactory=rt),bl(f,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(rt),v.push(rt)}else bl(f,i,Z>-1?Z:ge,f_(a[d?ge:Z],I,!d&&c));!d&&c&&Ke&&a[ge].componentProviders++}}}function bl(i,s,a,c){const d=to(s),f=function Rf(i){return!!i.useClass}(s);if(d||f){const I=(f?q(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,I]):T[x+1].push(c,I)}else T.push(a,I)}}}function f_(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function Pm(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function eI(i,s,a,c){return p_(this.multi,[])}function bb(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Fi(a,a[1],this.providerFactory.index,c);f=E.slice(0,v),p_(d,f);for(let I=v;I<E.length;I++)f.push(E[I])}else f=[],p_(d,f);return f}function p_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function km(i,s=[]){return a=>{a.providersResolver=(c,d)=>function h_(i,s,a){const c=Yt();if(c.firstCreatePass){const d=Wr(i);Om(a,c.data,c.blueprint,d,!0),Om(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Sh{}class g_{}function m_(i,s){return new tI(i,s??null)}class tI extends Sh{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Kf(this);const c=mr(s);this._bootstrapComponents=jo(c.bootstrap),this._r3Injector=Vr(s,a,[{provide:Sh,useValue:this},{provide:Nf,useValue:this.componentFactoryResolver}],ue(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Fm extends g_{constructor(s){super(),this.moduleType=s}create(s){return new tI(this.moduleType,s)}}class Sb extends Sh{constructor(s,a,c){super(),this.componentFactoryResolver=new Kf(this),this.instance=null;const d=new ku([...s,{provide:Sh,useValue:this},{provide:Nf,useValue:this.componentFactoryResolver}],a||Vg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function y_(i,s,a=null){return new Sb(i,s,a).injector}let Ab=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=gt(0,a.type),d=c.length>0?y_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Xe({token:i,providedIn:"environment",factory:()=>new i(je(de))}),i})();function Ga(i){i.getStandaloneInjector=s=>s.get(Ab).getOrCreateStandaloneInjector(i)}function oI(i,s,a,c){return function w_(i,s,a,c,d,f){const v=s+a;return ri(i,v,d)?function io(i,s,a){return i[s]=a}(i,v+1,f?c.call(f,d):c(d)):function mp(i,s){const a=i[s];return a===kt?void 0:a}(i,v+1)}(fe(),function Qn(){const i=Tt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),i,s,a,c)}function za(i){return s=>{setTimeout(i,void 0,s)}}const Yi=class Tl extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),v=c;if(s&&"object"==typeof s){const I=s;d=I.next?.bind(I),f=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(f=za(f),d&&(d=za(d)),v&&(v=za(v)));const E=super.subscribe({next:d,error:f,complete:v});return s instanceof K.w0&&s.add(E),E}};function hI(){return this._results[$u()]()}class yp{get changes(){return this._changes||(this._changes=new Yi)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=$u(),c=yp.prototype;c[a]||(c[a]=hI)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function kr(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function ld(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Sl=(()=>{class i{}return i.__NG_ELEMENT_ID__=Gb,i})();const fI=Sl,pI=class extends fI{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=Vf(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(c)),cl(c,d,s),new Wf(d)}};function Gb(){return vp(ur(),fe())}function vp(i,s){return 4&i.type?new pI(s,i,Pa(i,s)):null}let _p=(()=>{class i{}return i.__NG_ELEMENT_ID__=Um,i})();function Um(){return mI(ur(),fe())}const wp=_p,ic=class extends wp{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Pa(this._hostTNode,this._hostLView)}get injector(){return new ui(this._hostTNode,this._hostLView)}get parentInjector(){const s=vu(this._hostTNode,this._hostLView);if(kc(s)){const a=gu(s,this._hostLView),c=ya(s);return new ui(a[1].data[c+8],a)}return new ui(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=gI(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,d),v}createComponent(s,a,c,d,f){const v=s&&!function bu(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const k=a||{};E=k.index,c=k.injector,d=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const I=v?s:new Yd(Zt(s)),T=c||this.parentInjector;if(!f&&null==I.ngModule){const H=(v?T:this.parentInjector).get(de,null);H&&(f=H)}const x=I.create(T,d,void 0,f);return this.insert(x.hostView,E),x}insert(s,a){const c=s._lView,d=c[1];if(function ru(i){return Di(i[3])}(c)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=c[3],H=new ic(k,k[6],k[3]);H.detach(H.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function Ta(i,s,a,c){const d=10+c,f=a.length;c>0&&(a[d-1][4]=s),c<f-10?(s[4]=a[d],Tu(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function Xc(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=64}(d,c,v,f);const E=di(f,v),I=c[11],T=Df(I,v[7]);return null!==T&&function tw(i,s,a,c,d,f){c[0]=d,c[6]=s,Na(i,c,a,1,d,f)}(d,v[6],I,c,T,E),s.attachToViewContainerRef(),Tu(Bm(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=gI(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Sa(this._lContainer,a);c&&(Ia(Bm(this._lContainer),a),Jc(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=Sa(this._lContainer,a);return c&&null!=Ia(Bm(this._lContainer),a)?new Wf(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function gI(i){return i[8]}function Bm(i){return i[8]||(i[8]=[])}function mI(i,s){let a;const c=s[i.index];if(Di(c))a=c;else{let d;if(8&i.type)d=On(c);else{const f=s[11];d=f.createComment("");const v=Hn(i,s);Aa(f,Df(f,v),d,function By(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=Yw(c,s,d,i),qf(s,a)}return new ic(a,i,s)}class C_{constructor(s){this.queryList=s,this.matches=null}clone(){return new C_(this.queryList)}setDirty(){this.queryList.setDirty()}}class b_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);d.push(this.queries[v.indexInDeclarationView].clone())}return new b_(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==wI(s,a).matches&&this.queries[a].setDirty()}}class Ah{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class qa{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new qa(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Yo{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Yo(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,yI(a,f)),this.matchTNodeWithReadOption(s,a,ko(a,s,f,!1,!1))}else c===Sl?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ko(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===sr||d===_p||d===Sl&&4&a.type)this.addMatch(a.index,-2);else{const f=ko(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function yI(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function vI(i,s,a,c){return-1===a?function zb(i,s){return 11&i.type?Pa(i,s):4&i.type?vp(i,s):null}(s,i):-2===a?function qb(i,s,a){return a===sr?Pa(s,i):a===Sl?vp(s,i):a===_p?mI(s,i):void 0}(i,s,c):Fi(i,i[1],a,s)}function $m(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const f=i.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const T=v[I];E.push(T<0?null:vI(s,f[T],v[I+1],a.metadata.read))}d.matches=E}return d.matches}function Ep(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const v=$m(i,s,d,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)c.push(v[E/2]);else{const T=f[E+1],x=s[-I];for(let k=10;k<x.length;k++){const H=x[k];H[17]===H[3]&&Ep(H[1],H,T,c)}if(null!==x[9]){const k=x[9];for(let H=0;H<k.length;H++){const Z=k[H];Ep(Z[1],Z,T,c)}}}}}return c}function T_(i){const s=fe(),a=Yt(),c=Ql();xc(c+1);const d=wI(a,c);if(i.dirty&&function la(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Ep(a,s,c,[]):$m(a,s,d,c);i.reset(f,Lu),i.notifyOnChanges()}return!0}return!1}function jm(i,s,a,c){const d=Yt();if(d.firstCreatePass){const f=ur();(function Gm(i,s,a){null===i.queries&&(i.queries=new qa),i.queries.track(new Yo(s,a))})(d,new Ah(s,a,c),f.index),function zm(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function _I(i,s,a){const c=new yp(4==(4&a));em(i,s,c,c.destroy),null===s[19]&&(s[19]=new b_),s[19].queries.push(new C_(c))}(d,fe(),a)}function A_(){return function Hm(i,s){return i[19].queries[s].queryList}(fe(),Ql())}function wI(i,s){return i.queries.getByIndex(s)}function Sp(...i){}const V_=new un("Application Initializer");let Qm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Sp,this.reject=Sp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(kv(f))a.push(f);else if(Fv(f)){const v=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(je(V_,8))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ml=new un("AppId",{providedIn:"root",factory:function xl(){return`${Oh()}${Oh()}${Oh()}`}});function Oh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const U_=new un("Platform Initializer"),BI=new un("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),B_=new un("appBootstrapListener");let nT=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ap=new un("LocaleId",{providedIn:"root",factory:()=>Je(Ap,dt.Optional|dt.SkipSelf)||function $_(){return typeof $localize<"u"&&$localize.locale||ho}()}),jI=new un("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Jm{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let H_=(()=>{class i{compileModuleSync(a){return new Fm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=jo(mr(a).declarations).reduce((v,E)=>{const I=Zt(E);return I&&v.push(new Yd(I)),v},[]);return new Jm(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const rT=(()=>Promise.resolve(0))();function W_(i){typeof Zone>"u"?rT.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ps{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yi(!1),this.onMicrotaskEmpty=new Yi(!1),this.onStable=new Yi(!1),this.onError=new Yi(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function gi(){let i=Mt.requestAnimationFrame,s=Mt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function WI(i){const s=()=>{!function K_(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Mt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Z_(i),i.isCheckStableRunning=!0,Rl(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Z_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,v,E)=>{try{return KI(i),a.invokeTask(d,f,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),ZI(i)}},onInvoke:(a,c,d,f,v,E,I)=>{try{return KI(i),a.invoke(d,f,v,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),ZI(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Z_(i),Rl(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ps.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(ps.isInAngularZone())throw new he(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+d,s,ey,Sp,Sp);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const ey={};function Rl(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Z_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function KI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ZI(i){i._nesting--,Rl(i)}class iT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yi,this.onMicrotaskEmpty=new Yi,this.onStable=new Yi,this.onError=new Yi}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const ty=new un(""),YI=new un("");let oc,sT=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,oc||(function Y_(i){oc=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ps.assertNotInAngularZone(),W_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())W_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(je(ps),je(Ph),je(YI))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac}),i})(),Ph=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return oc?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Xo=null;const Mp=new un("AllowMultipleToken"),Nl=new un("PlatformDestroyListeners");class Za{constructor(s,a){this.name=s,this.token=a}}function ry(i,s,a=[]){const c=`Platform: ${s}`,d=new un(c);return(f=[])=>{let v=xp();if(!v||v.injector.get(Mp,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function JI(i){if(Xo&&!Xo.get(Mp,!1))throw new he(400,!1);Xo=i;const s=i.get(J_);(function ny(i){const s=i.get(U_,null);s&&s.forEach(a=>a())})(i)}(function iy(i=[],s){return Ho.create({name:s,providers:[{provide:Ky,useValue:"platform"},{provide:Nl,useValue:new Set([()=>Xo=null])},...i]})}(E,c))}return function aT(i){const s=xp();if(!s)throw new he(401,!1);return s}()}}function xp(){return Xo?.get(J_)??null}let J_=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function sy(i,s){let a;return a="noop"===i?new iT:("zone.js"===i?void 0:i)||new ps(s),a}(c?.ngZone,function Ol(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:ps,useValue:d}];return d.run(()=>{const v=Ho.create({providers:f,parent:this.injector,name:a.moduleType.name}),E=a.create(v),I=E.injector.get(qi,null);if(!I)throw new he(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:x=>{I.handleError(x)}});E.onDestroy(()=>{Np(this._modules,E),T.unsubscribe()})}),function eD(i,s,a){try{const c=a();return kv(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(I,d,()=>{const T=E.injector.get(Qm);return T.runInitializers(),T.donePromise.then(()=>(function Dm(i){Ze(i,"Expected localeId to be defined"),"string"==typeof i&&(fi=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Ap,ho)||ho),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=tD({},c);return function QI(i,s,a){const c=new Fm(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(Rp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new he(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(Nl,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(je(Ho))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function tD(i,s){return Array.isArray(s)?s.reduce(tD,i):{...i,...s}}let Rp=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{ps.assertNotInAngularZone(),W_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{ps.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,J.T)(f,v.pipe((0,ee.B)()))}bootstrap(a,c){const d=a instanceof Pd;if(!this._injector.get(Qm).done)throw!d&&$n(a),new he(405,false);let v;v=d?a:this._injector.get(Nf).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function Q_(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Sh),T=v.create(Ho.NULL,[],c||v.selector,E),x=T.location.nativeElement,k=T.injector.get(ty,null);return k?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),Np(this.components,T),k?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Np(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(B_,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Np(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new he(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(je(ps),je(de),je(qi))},i.\u0275prov=Xe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Np(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function uT(){return!1}let t0=(()=>{class i{}return i.__NG_ELEMENT_ID__=oD,i})();function oD(i){return function n0(i,s,a){if(Ci(i)&&!a){const c=nr(i.index,s);return new Wf(c,c)}return 47&i.type?new Wf(s[16],s):null}(ur(),fe(),16==(16&i))}class a0{constructor(){}supports(s){return Qd(s)}create(s){return new pD(s)}}const fD=(i,s)=>s;class pD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||fD}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<yD(c,d,f)?a:c,E=yD(v,d,f),I=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{f||(f=[]);const T=E-d,x=I-d;if(T!=x){for(let H=0;H<T;H++){const Z=H<f.length?f[H]:f[H]=0,ge=Z+H;x<=ge&&ge<T&&(f[H]=Z+1)}f[v.previousIndex]=x-T}}E!==I&&s(v,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Qd(s))throw new he(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],v=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,E),c=!0),a=a._next}else d=0,function iE(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[$u()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new gD(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new mD),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class gD{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class lT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class mD{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new lT,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yD(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class vD{constructor(){}supports(s){return s instanceof Map||Xd(s)}create(){return new u0}}class u0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Xd(s)))throw new he(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,v=d._next;return f&&(f._next=v),v&&(v._prev=f),d._next=null,d._prev=null,d}const c=new c0(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class c0{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ay(){return new l0([new a0])}let l0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||ay()),deps:[[i,new b,new Mu]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new he(901,!1)}}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:ay}),i})();function wD(){return new Fp([new vD])}let Fp=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||wD()),deps:[[i,new b,new Mu]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new he(901,!1)}}return i.\u0275prov=Xe({token:i,providedIn:"root",factory:wD}),i})();const h0=ry(null,"core",[]);let hT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(je(Rp))},i.\u0275mod=bn({type:i}),i.\u0275inj=Vn({}),i})();function f0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(lt,be,P)=>{P.d(be,{Z:()=>He});var g=P(2090),K=P(4859),O=P(9681),J=P(1877);class ee{constructor(he,De){this._delegate=he,this.firebase=De,(0,O._addComponent)(he,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,De=O._DEFAULT_ENTRY_NAME){var Ce;this._delegate.checkDestroyed();const Pe=this._delegate.container.getProvider(he);return!Pe.isInitialized()&&"EXPLICIT"===(null===(Ce=Pe.getComponent())||void 0===Ce?void 0:Ce.instantiationMode)&&Pe.initialize(),Pe.getImmediate({identifier:De})}_removeServiceInstance(he,De=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(De)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function se(){const it=function ue(it){const he={},De={__esModule:!0,initializeApp:function Ee(Re,V={}){const me=O.initializeApp(Re,V);if((0,g.r3)(he,me.name))return he[me.name];const Le=new it(me,De);return he[me.name]=Le,Le},app:Pe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Te(Re){const V=Re.name,me=V.replace("-compat","");if(O._registerComponent(Re)&&"PUBLIC"===Re.type){const Le=(qe=Pe())=>{if("function"!=typeof qe[me])throw le.create("invalid-app-argument",{appName:V});return qe[me]()};void 0!==Re.serviceProps&&(0,g.ZB)(Le,Re.serviceProps),De[me]=Le,it.prototype[me]=function(...qe){return this._getService.bind(this,V).apply(this,Re.multipleInstances?qe:[])}}return"PUBLIC"===Re.type?De[me]:null},removeApp:function Ce(Re){delete he[Re]},useAsService:function Fe(Re,V){return"serverAuth"===V?null:V},modularAPIs:O}};function Pe(Re){if(!(0,g.r3)(he,Re=Re||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:Re});return he[Re]}return De.default=De,Object.defineProperty(De,"apps",{get:function ve(){return Object.keys(he).map(Re=>he[Re])}}),Pe.App=it,De}(ee);return it.INTERNAL=Object.assign(Object.assign({},it.INTERNAL),{createFirebaseNamespace:se,extendNamespace:function he(De){(0,g.ZB)(it,De)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),it}(),$=new J.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const it=self.firebase.SDK_VERSION;it&&it.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=B;!function Ie(it){(0,O.registerVersion)("@firebase/app-compat","0.2.5",it)}()},9681:(lt,be,P)=>{P.r(be),P.d(be,{FirebaseError:()=>J.ZR,SDK_VERSION:()=>ii,_DEFAULT_ENTRY_NAME:()=>Oe,_addComponent:()=>rn,_addOrOverwriteComponent:()=>yt,_apps:()=>Ze,_clearComponents:()=>Vn,_components:()=>We,_getProvider:()=>Xe,_registerComponent:()=>Qt,_removeServiceInstance:()=>At,deleteApp:()=>_s,getApp:()=>si,getApps:()=>Gr,initializeApp:()=>Rs,onLog:()=>dt,registerVersion:()=>zr,setLogLevel:()=>ws});var g=P(5861),K=P(4859),O=P(1877),J=P(2090),ee=P(8766);class te{constructor(we){this.container=we}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function le(je){return"VERSION"===je.getComponent()?.type}(Je)){const Et=Je.getImmediate();return`${Et.library}/${Et.version}`}return null}).filter(Je=>Je).join(" ")}}const ue="@firebase/app",B=new O.Yd("@firebase/app"),Oe="[DEFAULT]",$e={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ze=new Map,We=new Map;function rn(je,we){try{je.container.addComponent(we)}catch(Je){B.debug(`Component ${we.name} failed to register with FirebaseApp ${je.name}`,Je)}}function yt(je,we){je.container.addOrOverwriteComponent(we)}function Qt(je){const we=je.name;if(We.has(we))return B.debug(`There were multiple attempts to register component ${we}.`),!1;We.set(we,je);for(const Je of Ze.values())rn(Je,je);return!0}function Xe(je,we){const Je=je.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),je.container.getProvider(we)}function At(je,we,Je=Oe){Xe(je,we).clearInstance(Je)}function Vn(){We.clear()}const wn=new J.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(we,Je,Et){this._isDeleted=!1,this._options=Object.assign({},we),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=Et,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(we){this.checkDestroyed(),this._automaticDataCollectionEnabled=we}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(we){this._isDeleted=we}checkDestroyed(){if(this.isDeleted)throw wn.create("app-deleted",{appName:this._name})}}const ii="9.18.0";function Rs(je,we={}){let Je=je;"object"!=typeof we&&(we={name:we});const Et=Object.assign({name:Oe,automaticDataCollectionEnabled:!1},we),xt=Et.name;if("string"!=typeof xt||!xt)throw wn.create("bad-app-name",{appName:String(xt)});if(Je||(Je=(0,J.aH)()),!Je)throw wn.create("no-options");const Lt=Ze.get(xt);if(Lt){if((0,J.vZ)(Je,Lt.options)&&(0,J.vZ)(Et,Lt.config))return Lt;throw wn.create("duplicate-app",{appName:xt})}const gr=new K.H0(xt);for(const L of We.values())gr.addComponent(L);const U=new In(Je,Et,gr);return Ze.set(xt,U),U}function si(je=Oe){const we=Ze.get(je);if(!we&&je===Oe)return Rs();if(!we)throw wn.create("no-app",{appName:je});return we}function Gr(){return Array.from(Ze.values())}function _s(je){return En.apply(this,arguments)}function En(){return(En=(0,g.Z)(function*(je){const we=je.name;Ze.has(we)&&(Ze.delete(we),yield Promise.all(je.container.getProviders().map(Je=>Je.delete())),je.isDeleted=!0)})).apply(this,arguments)}function zr(je,we,Je){var Et;let xt=null!==(Et=$e[je])&&void 0!==Et?Et:je;Je&&(xt+=`-${Je}`);const Lt=xt.match(/\s|\//),gr=we.match(/\s|\//);if(Lt||gr){const U=[`Unable to register library "${xt}" with version "${we}":`];return Lt&&U.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),Lt&&gr&&U.push("and"),gr&&U.push(`version name "${we}" contains illegal characters (whitespace or "/")`),void B.warn(U.join(" "))}Qt(new K.wA(`${xt}-version`,()=>({library:xt,version:we}),"VERSION"))}function dt(je,we){if(null!==je&&"function"!=typeof je)throw wn.create("invalid-log-argument");(0,O.Am)(je,we)}function ws(je){(0,O.Ub)(je)}const fr="firebase-heartbeat-store";let Ns=null;function Mt(){return Ns||(Ns=(0,ee.X3)("firebase-heartbeat-database",1,{upgrade:(je,we)=>{0===we&&je.createObjectStore(fr)}}).catch(je=>{throw wn.create("idb-open",{originalErrorMessage:je.message})})),Ns}function Dt(){return(Dt=(0,g.Z)(function*(je){try{return(yield Mt()).transaction(fr).objectStore(fr).get(Un(je))}catch(we){if(we instanceof J.ZR)B.warn(we.message);else{const Je=wn.create("idb-get",{originalErrorMessage:we?.message});B.warn(Je.message)}}})).apply(this,arguments)}function Os(je,we){return gn.apply(this,arguments)}function gn(){return(gn=(0,g.Z)(function*(je,we){try{const Et=(yield Mt()).transaction(fr,"readwrite");return yield Et.objectStore(fr).put(we,Un(je)),Et.done}catch(Je){if(Je instanceof J.ZR)B.warn(Je.message);else{const Et=wn.create("idb-set",{originalErrorMessage:Je?.message});B.warn(Et.message)}}})).apply(this,arguments)}function Un(je){return`${je.name}!${je.options.appId}`}class ta{constructor(we){this.container=we,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new Kt(Je),this._heartbeatsCachePromise=this._storage.read().then(Et=>(this._heartbeatsCache=Et,Et))}triggerHeartbeat(){var we=this;return(0,g.Z)(function*(){const Et=we.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=an();if(null===we._heartbeatsCache&&(we._heartbeatsCache=yield we._heartbeatsCachePromise),we._heartbeatsCache.lastSentHeartbeatDate!==xt&&!we._heartbeatsCache.heartbeats.some(Lt=>Lt.date===xt))return we._heartbeatsCache.heartbeats.push({date:xt,agent:Et}),we._heartbeatsCache.heartbeats=we._heartbeatsCache.heartbeats.filter(Lt=>{const gr=new Date(Lt.date).valueOf();return Date.now()-gr<=2592e6}),we._storage.overwrite(we._heartbeatsCache)})()}getHeartbeatsHeader(){var we=this;return(0,g.Z)(function*(){if(null===we._heartbeatsCache&&(yield we._heartbeatsCachePromise),null===we._heartbeatsCache||0===we._heartbeatsCache.heartbeats.length)return"";const Je=an(),{heartbeatsToSend:Et,unsentEntries:xt}=function Xi(je,we=1024){const Je=[];let Et=je.slice();for(const xt of je){const Lt=Je.find(gr=>gr.agent===xt.agent);if(Lt){if(Lt.dates.push(xt.date),xr(Je)>we){Lt.dates.pop();break}}else if(Je.push({agent:xt.agent,dates:[xt.date]}),xr(Je)>we){Je.pop();break}Et=Et.slice(1)}return{heartbeatsToSend:Je,unsentEntries:Et}}(we._heartbeatsCache.heartbeats),Lt=(0,J.L)(JSON.stringify({version:2,heartbeats:Et}));return we._heartbeatsCache.lastSentHeartbeatDate=Je,xt.length>0?(we._heartbeatsCache.heartbeats=xt,yield we._storage.overwrite(we._heartbeatsCache)):(we._heartbeatsCache.heartbeats=[],we._storage.overwrite(we._heartbeatsCache)),Lt})()}}function an(){return(new Date).toISOString().substring(0,10)}class Kt{constructor(we){this.app=we,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,J.hl)()&&(0,J.eu)().then(()=>!0).catch(()=>!1)})()}read(){var we=this;return(0,g.Z)(function*(){return(yield we._canUseIndexedDBPromise)&&(yield function pt(je){return Dt.apply(this,arguments)}(we.app))||{heartbeats:[]}})()}overwrite(we){var Je=this;return(0,g.Z)(function*(){var Et;if(yield Je._canUseIndexedDBPromise){const Lt=yield Je.read();return Os(Je.app,{lastSentHeartbeatDate:null!==(Et=we.lastSentHeartbeatDate)&&void 0!==Et?Et:Lt.lastSentHeartbeatDate,heartbeats:we.heartbeats})}})()}add(we){var Je=this;return(0,g.Z)(function*(){var Et;if(yield Je._canUseIndexedDBPromise){const Lt=yield Je.read();return Os(Je.app,{lastSentHeartbeatDate:null!==(Et=we.lastSentHeartbeatDate)&&void 0!==Et?Et:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...we.heartbeats]})}})()}}function xr(je){return(0,J.L)(JSON.stringify({version:2,heartbeats:je})).length}!function Ri(je){Qt(new K.wA("platform-logger",we=>new te(we),"PRIVATE")),Qt(new K.wA("heartbeat",we=>new ta(we),"PRIVATE")),zr(ue,"0.9.5",je),zr(ue,"0.9.5","esm2017"),zr("fire-js","")}("")},4859:(lt,be,P)=>{P.d(be,{H0:()=>ue,wA:()=>O});var g=P(5861),K=P(2090);class O{constructor(B,$,q){this.name=B,this.instanceFactory=$,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const J="[DEFAULT]";class ee{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const q=new K.BH;if(this.instancesDeferred.set($,q),this.isInitialized($)||this.shouldAutoInitialize())try{const Be=this.getOrInitializeService({instanceIdentifier:$});Be&&q.resolve(Be)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const q=this.normalizeInstanceIdentifier(B?.identifier),Be=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(Be)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Ie){if(Be)return null;throw Ie}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(se){return"EAGER"===se.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:J})}catch{}for(const[$,q]of this.instancesDeferred.entries()){const Be=this.normalizeInstanceIdentifier($);try{const Ie=this.getOrInitializeService({instanceIdentifier:Be});q.resolve(Ie)}catch{}}}}clearInstance(B=J){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,g.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...$.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=J){return this.instances.has(B)}getOptions(B=J){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Be=this.getOrInitializeService({instanceIdentifier:q,options:$});for(const[Ie,He]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Ie)&&He.resolve(Be);return Be}onInit(B,$){var q;const Be=this.normalizeInstanceIdentifier($),Ie=null!==(q=this.onInitCallbacks.get(Be))&&void 0!==q?q:new Set;Ie.add(B),this.onInitCallbacks.set(Be,Ie);const He=this.instances.get(Be);return He&&B(He,Be),()=>{Ie.delete(B)}}invokeOnInitCallbacks(B,$){const q=this.onInitCallbacks.get($);if(q)for(const Be of q)try{Be(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let q=this.instances.get(B);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(se=B,se===J?void 0:se),options:$}),this.instances.set(B,q),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,q)}catch{}var se;return q||null}normalizeInstanceIdentifier(B=J){return this.component?this.component.multipleInstances?B:J:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new ee(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,be,P)=>{P.d(be,{Am:()=>se,Ub:()=>ue,Yd:()=>le,in:()=>K});const g=[];var K=(()=>{return(B=K||(K={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",K;var B})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},J=K.INFO,ee={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},te=(B,$,...q)=>{if($<B.logLevel)return;const Be=(new Date).toISOString(),Ie=ee[$];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ie](`[${Be}]  ${B.name}:`,...q)};class le{constructor($){this.name=$,this._logLevel=J,this._logHandler=te,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in K))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...$),this._logHandler(this,K.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...$),this._logHandler(this,K.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,K.INFO,...$),this._logHandler(this,K.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,K.WARN,...$),this._logHandler(this,K.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...$),this._logHandler(this,K.ERROR,...$)}}function ue(B){g.forEach($=>{$.setLogLevel(B)})}function se(B,$){for(const q of g){let Be=null;$&&$.level&&(Be=O[$.level]),q.userLogHandler=null===B?null:(Ie,He,...it)=>{const he=it.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch{return null}}).filter(De=>De).join(" ");He>=(Be??Ie.logLevel)&&B({level:K[He].toLowerCase(),message:he,args:it,type:Ie.name})}}}},259:(lt,be,P)=>{P.d(be,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.18.0","app")},9260:(lt,be,P)=>{P.d(be,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.18.0","app-compat")},8971:(lt,be,P)=>{P.r(be);var g=P(5861),K=P(3942),O=P(2090),J=P(9681),ee=P(1877),te=P(655),le=P(4859);const He=function Be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},it=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ce=new ee.Yd("@firebase/auth");function Pe(y,...h){Ce.logLevel<=ee.in.ERROR&&Ce.error(`Auth (${J.SDK_VERSION}): ${y}`,...h)}function Ee(y,...h){throw Re(y,...h)}function ve(y,...h){return Re(y,...h)}function Te(y,h,p){const _=Object.assign(Object.assign({},it()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Fe(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&Ee(y,"argument-error"),Te(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return he.create(y,...h)}function V(y,h,...p){if(!y)throw Re(h,...p)}function me(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Pe(h),new Error(h)}function Le(y,h){y||me(h)}const qe=new Map;function ct(y){Le(y instanceof Function,"Expected a class definition");let h=qe.get(y);return h?(Le(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,qe.set(y,h),h)}function ce(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ye(){return"http:"===Ae()||"https:"===Ae()}function Ae(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ze{constructor(h,p){this.shortDelay=h,this.longDelay=p,Le(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Oe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ye()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function We(y,h){Le(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class rn{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new Ze(3e4,6e4);function Xe(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function At(y,h,p,_){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,g.Z)(function*(y,h,p,_,S={}){return ln(y,S,(0,g.Z)(function*(){let R={},z={};_&&("GET"===h?z=_:R={body:JSON.stringify(_)});const ae=(0,O.xO)(Object.assign({key:y.config.apiKey},z)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),rn.fetch()(Rs(y,y.config.apiHost,p,ae),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function ln(y,h,p){return wn.apply(this,arguments)}function wn(){return(wn=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},yt),h);try{const S=new si(y),R=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const z=yield R.json();if("needConfirmation"in z)throw Gr(y,"account-exists-with-different-credential",z);if(R.ok&&!("errorMessage"in z))return z;{const ae=R.ok?z.errorMessage:z.error.message,[Ve,et]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Gr(y,"credential-already-in-use",z);if("EMAIL_EXISTS"===Ve)throw Gr(y,"email-already-in-use",z);if("USER_DISABLED"===Ve)throw Gr(y,"user-disabled",z);const Ct=_[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Te(y,Ct,et);Ee(y,Ct)}}catch(S){if(S instanceof O.ZR)throw S;Ee(y,"internal-error",{message:String(S)})}})).apply(this,arguments)}function In(y,h,p,_){return ii.apply(this,arguments)}function ii(){return(ii=(0,g.Z)(function*(y,h,p,_,S={}){const R=yield At(y,h,p,_,S);return"mfaPendingCredential"in R&&Ee(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Rs(y,h,p,_){const S=`${h}${p}?${_}`;return y.config.emulator?We(y.config,S):`${y.config.apiScheme}://${S}`}class si{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gr(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const S=ve(y,h,_);return S.customData._tokenResponse=p,S}function En(){return(En=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function zr(y,h){return dt.apply(this,arguments)}function dt(){return(dt=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ws(y,h){return vi.apply(this,arguments)}function vi(){return(vi=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Dn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Mt(){return(Mt=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(h),S=Dt(_);V(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,z=R?.sign_in_provider;return{claims:S,token:_,authTime:Dn(pt(S.auth_time)),issuedAtTime:Dn(pt(S.iat)),expirationTime:Dn(pt(S.exp)),signInProvider:z||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function pt(y){return 1e3*Number(y)}function Dt(y){const[h,p,_]=y.split(".");if(void 0===h||void 0===p||void 0===_)return Pe("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(p);return S?JSON.parse(S):(Pe("Failed to decode base64 JWT payload"),null)}catch(S){return Pe("Caught error parsing JWT payload as JSON",S?.toString()),null}}function gn(y,h){return Un.apply(this,arguments)}function Un(){return(Un=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&Mr(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function Mr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class pr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class ta{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dn(this.lastLoginAt),this.creationTime=Dn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function an(y){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,g.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),S=yield gn(y,ws(p,{idToken:_}));V(S?.users.length,p,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const z=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?je(R.providerUserInfo):[],ae=Ri(y.providerData,z),Ct=!!y.isAnonymous&&!(y.email&&R.passwordHash||ae?.length),ht={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ae,metadata:new ta(R.createdAt,R.lastLoginAt),isAnonymous:Ct};Object.assign(y,ht)})).apply(this,arguments)}function xr(){return(xr=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield an(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function Ri(y,h){return[...y.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}function je(y){return y.map(h=>{var{providerId:p}=h,_=(0,te._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function Je(){return(Je=(0,g.Z)(function*(y,h){const p=yield ln(y,{},(0,g.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,z=Rs(y,S,"/v1/token",`key=${R}`),ae=yield y._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(z,{method:"POST",headers:ae,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Et{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Os(y){const h=Dt(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:z}=yield function we(y,h){return Je.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(S,R,Number(z))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:S,expirationTime:R}=p,z=new Et;return _&&(V("string"==typeof _,"internal-error",{appName:h}),z.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:h}),z.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:h}),z.expirationTime=R),z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Et,this.toJSON())}_performRefresh(){return me("not implemented")}}function xt(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Lt{constructor(h){var{uid:p,auth:_,stsTokenManager:S}=h,R=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new ta(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield gn(p,p.stsTokenManager.getToken(p.auth,h));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function Ns(y){return Mt.apply(this,arguments)}(this,h)}reload(){return function Kt(y){return xr.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new Lt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield an(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield gn(h,function _s(y,h){return En.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,S,R,z,ae,Ve,et,Ct;const ht=null!==(_=p.displayName)&&void 0!==_?_:void 0,rr=null!==(S=p.email)&&void 0!==S?S:void 0,Gi=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Ad=null!==(z=p.photoURL)&&void 0!==z?z:void 0,Md=null!==(ae=p.tenantId)&&void 0!==ae?ae:void 0,sl=null!==(Ve=p._redirectEventId)&&void 0!==Ve?Ve:void 0,xs=null!==(et=p.createdAt)&&void 0!==et?et:void 0,Oa=null!==(Ct=p.lastLoginAt)&&void 0!==Ct?Ct:void 0,{uid:xd,emailVerified:Rg,isAnonymous:ol,providerData:Ng,stsTokenManager:Og}=p;V(xd&&Og,h,"internal-error");const zy=Et.fromJSON(this.name,Og);V("string"==typeof xd,h,"internal-error"),xt(ht,h.name),xt(rr,h.name),V("boolean"==typeof Rg,h,"internal-error"),V("boolean"==typeof ol,h,"internal-error"),xt(Gi,h.name),xt(Ad,h.name),xt(Md,h.name),xt(sl,h.name),xt(xs,h.name),xt(Oa,h.name);const cs=new Lt({uid:xd,auth:h,email:rr,emailVerified:Rg,displayName:ht,isAnonymous:ol,photoURL:Ad,phoneNumber:Gi,tenantId:Md,stsTokenManager:zy,createdAt:xs,lastLoginAt:Oa});return Ng&&Array.isArray(Ng)&&(cs.providerData=Ng.map(Af=>Object.assign({},Af))),sl&&(cs._redirectEventId=sl),cs}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const S=new Et;S.updateFromServerResponse(p);const R=new Lt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield an(R),R})()}}const U=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var S=this;return(0,g.Z)(function*(){S.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=_.storage[p];return void 0===S?null:S})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function L(y,h,p){return`firebase:${y}:${h}:${p}`}class G{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=L(this.userKey,S.apiKey,R),this.fullPersistenceKey=L("persistence",S.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Lt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new G(ct(U),h,_);const S=(yield Promise.all(p.map(function(){var et=(0,g.Z)(function*(Ct){if(yield Ct._isAvailable())return Ct});return function(Ct){return et.apply(this,arguments)}}()))).filter(et=>et);let R=S[0]||ct(U);const z=L(_,h.config.apiKey,h.name);let ae=null;for(const et of p)try{const Ct=yield et._get(z);if(Ct){const ht=Lt._fromJSON(h,Ct);et!==R&&(ae=ht),R=et;break}}catch{}const Ve=S.filter(et=>et._shouldAllowMigration);return R._shouldAllowMigration&&Ve.length?(R=Ve[0],ae&&(yield R._set(z,ae.toJSON())),yield Promise.all(p.map(function(){var et=(0,g.Z)(function*(Ct){if(Ct!==R)try{yield Ct._remove(z)}catch{}});return function(Ct){return et.apply(this,arguments)}}())),new G(R,h,_)):new G(R,h,_)})()}}function pe(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Xt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(X(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Cn(h))return"Blackberry";if(Bn(h))return"Webos";if(st(h))return"Safari";if((h.includes("chrome/")||vt(h))&&!h.includes("edge/"))return"Chrome";if(_t(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function X(y=(0,O.z$)()){return/firefox\//i.test(y)}function st(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function vt(y=(0,O.z$)()){return/crios\//i.test(y)}function Xt(y=(0,O.z$)()){return/iemobile/i.test(y)}function _t(y=(0,O.z$)()){return/android/i.test(y)}function Cn(y=(0,O.z$)()){return/blackberry/i.test(y)}function Bn(y=(0,O.z$)()){return/webos/i.test(y)}function Gt(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Kh(y=(0,O.z$)()){return Gt(y)||_t(y)||Bn(y)||Cn(y)||/windows phone/i.test(y)||Xt(y)}function Xa(y,h=[]){let p;switch(y){case"Browser":p=pe((0,O.z$)());break;case"Worker":p=`${pe((0,O.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${J.SDK_VERSION}/${_}`}class hc{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((z,ae)=>{try{z(h(R))}catch(Ve){ae(Ve)}});_.onAbort=p,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const _=[];try{for(const S of p.queue)yield S(h),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const R of _)try{R()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Bl{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $l(this),this.idTokenSubscription=new $l(this),this.beforeStateQueue=new hc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=ct(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield G.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const S=yield p.assertedPersistence.getCurrentUser();let R=S,z=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const ae=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Ve=R?._redirectEventId,et=yield p.tryRedirectSignIn(h);(!ae||ae===Ve)&&et?.user&&(R=et.user,z=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(z)try{yield p.beforeStateQueue.runMiddleware(R)}catch(ae){R=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(ae))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield an(h)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function $e(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ct(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&ct(h)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield G.create(p,[ct(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,S){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),z=this._isInitialized?Promise.resolve():this._initializationPromise;return V(z,this,"internal-error"),z.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Xa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function bn(y){return(0,O.m9)(y)}class $l{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ra(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Zt(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Nn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return me("not implemented")}_getIdTokenResponse(h){return me("not implemented")}_linkToIdToken(h,p){return me("not implemented")}_getReauthenticationResolver(h){return me("not implemented")}}function $n(y,h){return mr.apply(this,arguments)}function mr(){return(mr=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:resetPassword",Xe(y,h))})).apply(this,arguments)}function oi(y,h){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Nt(y,h){return mn.apply(this,arguments)}function mn(){return(mn=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",Xe(y,h))})).apply(this,arguments)}function Ji(){return(Ji=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithPassword",Xe(y,h))})).apply(this,arguments)}function jn(y,h){return wi.apply(this,arguments)}function wi(){return(wi=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:sendOobCode",Xe(y,h))})).apply(this,arguments)}function Tn(y,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,g.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function ks(y,h){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,g.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function pc(y,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function gc(y,h){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,g.Z)(function*(y,h){return jn(y,h)})).apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithEmailLink",Xe(y,h))})).apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithEmailLink",Xe(y,h))})).apply(this,arguments)}class Is extends Nn{constructor(h,p,_,S=null){super("password",_),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new Is(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new Is(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Rr(y,h){return Ji.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function yr(y,h){return _o.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:Ee(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return oi(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Fs(y,h){return Ii.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:Ee(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function es(y,h){return dn.apply(this,arguments)}function dn(){return(dn=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithIdp",Xe(y,h))})).apply(this,arguments)}class ai extends Nn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ai(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):Ee("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=p,R=(0,te._T)(p,["providerId","signInMethod"]);if(!_||!S)return null;const z=new ai(_,S);return z.idToken=R.idToken||void 0,z.accessToken=R.accessToken||void 0,z.secret=R.secret,z.nonce=R.nonce,z.pendingToken=R.pendingToken||null,z}_getIdTokenResponse(h){return es(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,es(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,es(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function jl(y,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:sendVerificationCode",Xe(y,h))})).apply(this,arguments)}function Nr(){return(Nr=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",Xe(y,h))})).apply(this,arguments)}function Hl(){return(Hl=(0,g.Z)(function*(y,h){const p=yield In(y,"POST","/v1/accounts:signInWithPhoneNumber",Xe(y,h));if(p.temporaryProof)throw Gr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const qr={USER_NOT_FOUND:"user-not-found"};function sa(){return(sa=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",Xe(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),qr)})).apply(this,arguments)}class Ci extends Nn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new Ci({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new Ci({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Ls(y,h){return Nr.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function vr(y,h){return Hl.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Di(y,h){return sa.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}=h;return _||p||S||R?new Ci({verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class oa{constructor(h){var p,_,S,R,z,ae;const Ve=(0,O.zd)((0,O.pd)(h)),et=null!==(p=Ve.apiKey)&&void 0!==p?p:null,Ct=null!==(_=Ve.oobCode)&&void 0!==_?_:null,ht=function mc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ve.mode)&&void 0!==S?S:null);V(et&&Ct&&ht,"argument-error"),this.apiKey=et,this.operation=ht,this.code=Ct,this.continueUrl=null!==(R=Ve.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(z=Ve.languageCode)&&void 0!==z?z:null,this.tenantId=null!==(ae=Ve.tenantId)&&void 0!==ae?ae:null}static parseLink(h){const p=function Wr(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||y}(h);try{return new oa(p)}catch{return null}}}let yc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return Is._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const S=oa.parseLink(_);return V(S,"argument-error"),Is._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ts{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Eo extends ts{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class aa extends Eo{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),ai._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),ai._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return aa.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return aa.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:z,providerId:ae}=h;if(!_&&!S&&!p&&!R||!ae)return null;try{return new aa(ae)._credential({idToken:p,accessToken:_,nonce:z,pendingToken:R})}catch{return null}}}let vc=(()=>{class y extends Eo{constructor(){super("facebook.com")}static credential(p){return ai._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Yh=(()=>{class y extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return ai._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:S}=p;if(!_&&!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Qh=(()=>{class y extends Eo{constructor(){super("github.com")}static credential(p){return ai._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Io extends Nn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return es(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,es(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,es(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:R}=p;return _&&S&&R&&_===S?new Io(_,R):null}static _create(h,p){return new Io(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Oi extends ts{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Oi.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Oi.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=Io.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return Io._create(_,p)}catch{return null}}}let Jp=(()=>{class y extends Eo{constructor(){super("twitter.com")}static credential(p,_){return ai._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=p;if(!_||!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function _c(y,h){return wc.apply(this,arguments)}function wc(){return(wc=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signUp",Xe(y,h))})).apply(this,arguments)}class Or{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,S=!1){return(0,g.Z)(function*(){const R=yield Lt._fromIdTokenResponse(h,_,S),z=Ec(_);return new Or({user:R,providerId:z,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=Ec(_);return new Or({user:h,providerId:S,_tokenResponse:_,operationType:p})})()}}function Ec(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Xh(){return(Xh=(0,g.Z)(function*(y){var h;const p=bn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Or({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield _c(p,{returnSecureToken:!0}),S=yield Or._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class Ja extends O.ZR{constructor(h,p,_,S){var R;super(p.code,p.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,S){return new Ja(h,p,_,S)}}function Us(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Ja._fromErrorAndOperation(y,R,h,_):R})}function Bs(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Do(){return(Do=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield $s(!0,p,h);const{providerUserInfo:_}=yield zr(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=Bs(_||[]);return p.providerData=p.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function tu(y,h){return Co.apply(this,arguments)}function Co(){return(Co=(0,g.Z)(function*(y,h,p=!1){const _=yield gn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Or._forOperation(y,"link",_)})).apply(this,arguments)}function $s(y,h,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(y,h,p){yield an(h);const S=!1===y?"provider-already-linked":"no-such-provider";V(Bs(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function zl(y,h){return bo.apply(this,arguments)}function bo(){return(bo=(0,g.Z)(function*(y,h,p=!1){const{auth:_}=y,S="reauthenticate";try{const R=yield gn(y,Us(_,S,h,y),p);V(R.idToken,_,"internal-error");const z=Dt(R.idToken);V(z,_,"internal-error");const{sub:ae}=z;return V(y.uid===ae,_,"user-mismatch"),Or._forOperation(y,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&Ee(_,"user-mismatch"),R}})).apply(this,arguments)}function To(y,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(y,h,p=!1){const _="signIn",S=yield Us(y,_,h),R=yield Or._fromIdTokenResponse(y,_,S);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Mn(y,h){return nu.apply(this,arguments)}function nu(){return(nu=(0,g.Z)(function*(y,h){return To(bn(y),h)})).apply(this,arguments)}function On(y,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield $s(!1,p,h.providerId),tu(p,h)})).apply(this,arguments)}function js(y,h){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,g.Z)(function*(y,h){return zl((0,O.m9)(y),h)})).apply(this,arguments)}function Ic(y,h){return So.apply(this,arguments)}function So(){return(So=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithCustomToken",Xe(y,h))})).apply(this,arguments)}function nr(){return(nr=(0,g.Z)(function*(y,h){const p=bn(y),_=yield Ic(p,{token:h,returnSecureToken:!0}),S=yield Or._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class la{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Ao._fromServerResponse(h,p):Ee(h,"internal-error")}}class Ao extends la{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Ao(p)}}function ru(y,h,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function da(){return(da=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&ru(_,S,p),yield ks(_,S)})).apply(this,arguments)}function Tt(){return(Tt=(0,g.Z)(function*(y,h,p){yield $n((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ql(){return(ql=(0,g.Z)(function*(y,h){yield Nt((0,O.m9)(y),{oobCode:h})})).apply(this,arguments)}function su(y,h){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),_=yield $n(p,{oobCode:h}),S=_.requestType;switch(V(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=la._fromServerResponse(bn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function ou(){return(ou=(0,g.Z)(function*(y,h){const{data:p}=yield su((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(y,h,p){const _=bn(y),S=yield _c(_,{returnSecureToken:!0,email:h,password:p}),R=yield Or._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Tc(){return(Tc=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,_,"argument-error"),p&&ru(_,S,p),yield pc(_,S)})).apply(this,arguments)}function fa(){return(fa=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S=yc.credentialWithLink(h,p||ce());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Mn(_,S)})).apply(this,arguments)}function au(y,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:createAuthUri",Xe(y,h))})).apply(this,arguments)}function cu(){return(cu=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:ye()?ce():"http://localhost"},{signinMethods:S}=yield au((0,O.m9)(y),_);return S||[]})).apply(this,arguments)}function Sc(){return(Sc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ru(p.auth,S,h);const{email:R}=yield Tn(p.auth,S);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&ru(_.auth,R,p);const{email:z}=yield gc(_.auth,R);z!==y.email&&(yield y.reload())})).apply(this,arguments)}function Yr(y,h){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(y,h){return At(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Pi(){return(Pi=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},z=yield gn(_,Yr(_.auth,R));_.displayName=z.displayName||null,_.photoURL=z.photoUrl||null;const ae=_.providerData.find(({providerId:Ve})=>"password"===Ve);ae&&(ae.displayName=_.displayName,ae.photoURL=_.photoURL),yield _._updateTokensIfNecessary(z)})).apply(this,arguments)}function Yl(y,h,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,g.Z)(function*(y,h,p){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const z=yield gn(y,oi(_,R));yield y._updateTokensIfNecessary(z,!0)})).apply(this,arguments)}class rs{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class Ql extends rs{constructor(h,p,_,S){super(h,p,_),this.username=S}}class xc extends rs{constructor(h,p){super(h,"facebook.com",p)}}class Xl extends Ql{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class ef extends rs{constructor(h,p){super(h,"google.com",p)}}class du extends Ql{constructor(h,p,_){super(h,"twitter.com",p,_)}}function tf(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Mc(y){var h,p;if(!y)return null;const{providerId:_}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const z=null===(p=null===(h=Dt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(z)return new rs(R,"anonymous"!==z&&"custom"!==z?z:null)}if(!_)return null;switch(_){case"facebook.com":return new xc(R,S);case"github.com":return new Xl(R,S);case"google.com":return new ef(R,S);case"twitter.com":return new du(R,S,y.screenName||null);case"custom":case"anonymous":return new rs(R,null);default:return new rs(R,_,S)}}(p)}class xo{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new xo("enroll",h,p)}static _fromMfaPendingCredential(h){return new xo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return xo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return xo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Nc{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=bn(h),S=p.customData._serverResponse,R=(S.mfaInfo||[]).map(ae=>la._fromServerResponse(_,ae));V(S.mfaPendingCredential,_,"internal-error");const z=xo._fromMfaPendingCredential(S.mfaPendingCredential);return new Nc(z,R,function(){var ae=(0,g.Z)(function*(Ve){const et=yield Ve._process(_,z);delete S.mfaInfo,delete S.mfaPendingCredential;const Ct=Object.assign(Object.assign({},S),{idToken:et.idToken,refreshToken:et.refreshToken});switch(p.operationType){case"signIn":const ht=yield Or._fromIdTokenResponse(_,p.operationType,Ct);return yield _._updateCurrentUser(ht.user),ht;case"reauthenticate":return V(p.user,_,"internal-error"),Or._forOperation(p.user,p.operationType,Ct);default:Ee(_,"internal-error")}});return function(Ve){return ae.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function nf(y,h){return At(y,"POST","/v2/accounts/mfaEnrollment:start",Xe(y,h))}class ga{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>la._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new ga(h)}getSession(){var h=this;return(0,g.Z)(function*(){return xo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const S=h,R=yield _.getSession(),z=yield gn(_.user,S._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(z),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const _="string"==typeof h?h:h.uid,S=yield p.user.getIdToken();try{const R=yield gn(p.user,function rg(y,h){return At(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Xe(y,h))}(p.user.auth,{idToken:S,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:z})=>z!==_),yield p.user._updateTokensIfNecessary(R),yield p.user.reload()}catch(R){throw R}})()}}const zs=new WeakMap,ki="__sak";class qs{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(ki,"1"),this.storage.removeItem(ki),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Oc=(()=>{class y extends qs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function rf(){const y=(0,O.z$)();return st(y)||Gt(y)}()&&function na(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Kh(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&p(_,R,S)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((ae,Ve,et)=>{this.notifyListeners(ae,et)});const S=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(S);if(p.newValue!==ae)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!_)return}const R=()=>{const ae=this.storage.getItem(S);!_&&this.localCache[S]===ae||this.notifyListeners(S,ae)},z=this.storage.getItem(S);!function Ps(){return(0,O.w1)()&&10===document.documentMode}()||z===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var S=()=>super._set,R=this;return(0,g.Z)(function*(){yield S().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,S=this;return(0,g.Z)(function*(){const R=yield _().call(S,p);return S.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,S=this;return(0,g.Z)(function*(){yield _().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Ws=(()=>{class y extends qs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let fu=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const S=p,{eventId:R,eventType:z,data:ae}=S.data,Ve=_.handlersMap[z];if(!Ve?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:z});const et=Array.from(Ve).map(function(){var ht=(0,g.Z)(function*(rr){return rr(S.origin,ae)});return function(rr){return ht.apply(this,arguments)}}()),Ct=yield function td(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(et);S.ports[0].postMessage({status:"done",eventId:R,eventType:z,response:Ct})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ks(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class Pc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var S=this;return(0,g.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let z,ae;return new Promise((Ve,et)=>{const Ct=Ks("",20);R.port1.start();const ht=setTimeout(()=>{et(new Error("unsupported_event"))},_);ae={messageChannel:R,onMessage(rr){const Gi=rr;if(Gi.data.eventId===Ct)switch(Gi.data.status){case"ack":clearTimeout(ht),z=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(z),Ve(Gi.data.response);break;default:clearTimeout(ht),clearTimeout(z),et(new Error("invalid_response"))}}},S.handlers.add(ae),R.port1.addEventListener("message",ae.onMessage),S.target.postMessage({eventType:h,eventId:Ct,data:p},[R.port2])}).finally(()=>{ae&&S.removeMessageHandler(ae)})})()}}function Sn(){return window}function Ro(){return typeof Sn().WorkerGlobalScope<"u"&&"function"==typeof Sn().importScripts}function No(){return(No=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pu="firebaseLocalStorageDb",bs="firebaseLocalStorage",va="fbase_key";class Ts{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Oo(y,h){return y.transaction([bs],h?"readwrite":"readonly").objectStore(bs)}function _a(){const y=indexedDB.open(pu,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(bs,{keyPath:va})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(bs)?h(_):(_.close(),yield function Po(){const y=indexedDB.deleteDatabase(pu);return new Ts(y).toPromise()}(),h(yield _a()))}))})}function Xr(y,h,p){return mu.apply(this,arguments)}function mu(){return(mu=(0,g.Z)(function*(y,h,p){const _=Oo(y,!0).put({[va]:h,value:p});return new Ts(_).toPromise()})).apply(this,arguments)}function Ys(){return(Ys=(0,g.Z)(function*(y,h){const p=Oo(y,!1).get(h),_=yield new Ts(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function yu(y,h){const p=Oo(y,!0).delete(h);return new Ts(p).toPromise()}const Qs=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield _a()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Ro()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=fu._getInstance(function ya(){return Ro()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(S,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,S;if(p.activeServiceWorker=yield function ss(){return No.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Pc(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(S=R[0])&&void 0!==S&&S.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function kc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield _a();return yield Xr(p,ki,"1"),yield yu(p,ki),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(R=>Xr(R,p,_)),S.localCache[p]=_,S.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=yield _._withRetries(R=>function Zs(y,h){return Ys.apply(this,arguments)}(R,p));return _.localCache[p]=S,S})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(S=>yu(S,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries(z=>{const ae=Oo(z,!1).getAll();return new Ts(ae).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:z,value:ae}of _)R.add(z),JSON.stringify(p.localCache[z])!==JSON.stringify(ae)&&(p.notifyListeners(z,ae),S.push(z));for(const z of Object.keys(p.localCache))p.localCache[z]&&!R.has(z)&&(p.notifyListeners(z,null),S.push(z));return S})()}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function wu(y,h){return At(y,"POST","/v2/accounts/mfaSignIn:start",Xe(y,h))}function Fc(){return(Fc=(0,g.Z)(function*(y){return(yield At(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Fi(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=S=>{const R=ve("internal-error");R.customData=S,p(R)},_.type="text/javascript",_.charset="UTF-8",function ko(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Lc(y){return`__${y}${Math.floor(1e6*Math.random())}`}const ui=1e12;class ig{constructor(h){this.auth=h,this.counter=ui,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new Uc(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||ui;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||ui))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||ui))||void 0===_||_.execute(),""})()}}class Uc{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Iu(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bc=Lc("rcb"),rd=new Ze(3e4,6e4);class Ss{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Sn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function Du(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Sn().grecaptcha):new Promise((_,S)=>{const R=Sn().setTimeout(()=>{S(ve(h,"network-request-failed"))},rd.get());Sn()[Bc]=()=>{Sn().clearTimeout(R),delete Sn()[Bc];const ae=Sn().grecaptcha;if(!ae)return void S(ve(h,"internal-error"));const Ve=ae.render;ae.render=(et,Ct)=>{const ht=Ve(et,Ct);return this.counter++,ht},this.hostLanguage=p,_(ae)},Fi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Bc,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Sn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class wa{load(h){return(0,g.Z)(function*(){return new ig(h)})()}clearedOneInstance(){}}const $c="recaptcha",sd={theme:"light",type:"image"};class Ea{constructor(h,p=Object.assign({},sd),_){this.parameters=p,this.type=$c,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new wa:new Ss,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const z=ae=>{ae&&(h.tokenChangeListeners.delete(z),R(ae))};h.tokenChangeListeners.add(z),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=Sn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ye()&&!Ro(),h.auth,"internal-error"),yield function Ay(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function os(y){return Fc.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sf{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=Ci._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function Vi(){return(Vi=(0,g.Z)(function*(y,h,p){const _=bn(y),S=yield ud(_,h,(0,O.m9)(p));return new sf(S,R=>Mn(_,R))})).apply(this,arguments)}function od(){return(od=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);yield $s(!1,_,"phone");const S=yield ud(_.auth,h,(0,O.m9)(p));return new sf(S,R=>On(_,R))})).apply(this,arguments)}function jc(){return(jc=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S=yield ud(_.auth,h,(0,O.m9)(p));return new sf(S,R=>js(_,R))})).apply(this,arguments)}function ud(y,h,p){return af.apply(this,arguments)}function af(){return(af=(0,g.Z)(function*(y,h,p){var _;const S=yield p.verify();try{let R;if(V("string"==typeof S,y,"argument-error"),V(p.type===$c,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const z=R.session;if("phoneNumber"in R)return V("enroll"===z.type,y,"internal-error"),(yield nf(y,{idToken:z.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===z.type,y,"internal-error");const ae=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(ae,y,"missing-multi-factor-info"),(yield wu(y,{mfaPendingCredential:z.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:z}=yield jl(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return z}}finally{p._reset()}})).apply(this,arguments)}function cd(){return(cd=(0,g.Z)(function*(y,h){yield tu((0,O.m9)(y),h)})).apply(this,arguments)}let Gc=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=bn(p)}verifyPhoneNumber(p,_){return ud(this.auth,p,(0,O.m9)(_))}static credential(p,_){return Ci._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:S}=p;return _&&S?Ci._fromTokenResponse(_,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function vn(y,h){return h?ct(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Cu extends Nn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return es(h,this._buildIdpRequest())}_linkToIdToken(h,p){return es(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return es(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function bu(y){return To(y.auth,new Cu(y),y.bypassAuthState)}function ld(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),zl(p,new Cu(y),y.bypassAuthState)}function kr(y){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),tu(p,new Cu(y),y.bypassAuthState)})).apply(this,arguments)}class Tu{constructor(h,p,_,S,R=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:z,error:ae,type:Ve}=h;if(ae)return void p.reject(ae);const et={auth:p.auth,requestUri:_,sessionId:S,tenantId:z||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Ve)(et))}catch(Ct){p.reject(Ct)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return bu;case"linkViaPopup":case"linkViaRedirect":return kr;case"reauthViaPopup":case"reauthViaRedirect":return ld;default:Ee(this.auth,"internal-error")}}resolve(h){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Le(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ia=new Ze(2e3,1e4);function Su(){return(Su=(0,g.Z)(function*(y,h,p){const _=bn(y);Fe(y,h,ts);const S=vn(_,p);return new Au(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function uf(){return(uf=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Fe(_.auth,h,ts);const S=vn(_.auth,p);return new Au(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function _r(){return(_r=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Fe(_.auth,h,ts);const S=vn(_.auth,p);return new Au(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let Au=(()=>{class y extends Tu{constructor(p,_,S,R,z){super(p,_,R,z),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){Le(1===p.filter.length,"Popup operations only handle one event");const _=Ks();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,Ia.get())};p()}}return y.currentPopupAction=null,y})();const Jr=new Map;class dd extends Tu{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=Jr.get(p.auth._key());if(!_){try{const R=(yield function cf(y,h){return as.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}Jr.set(p.auth._key(),_)}return p.bypassAuthState||Jr.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function as(){return(as=(0,g.Z)(function*(y,h){const p=Pn(h),_=$i(y);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(p));return yield _._remove(p),S})).apply(this,arguments)}function zc(y,h){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,g.Z)(function*(y,h){return $i(y)._set(Pn(h),"true")})).apply(this,arguments)}function Da(y,h){Jr.set(y._key(),h)}function $i(y){return ct(y._redirectPersistence)}function Pn(y){return L("pendingRedirect",y.config.apiKey,y.name)}function D(){return(D=(0,g.Z)(function*(y,h,p){const _=bn(y);Fe(y,h,ts),yield _._initializationPromise;const S=vn(_,p);return yield zc(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Fe(_.auth,h,ts),yield _.auth._initializationPromise;const S=vn(_.auth,p);yield zc(S,_.auth);const R=yield St(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function _e(){return(_e=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Fe(_.auth,h,ts),yield _.auth._initializationPromise;const S=vn(_.auth,p);yield $s(!1,_,h.providerId),yield zc(S,_.auth);const R=yield St(_);return S._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(y,h){return yield bn(y)._initializationPromise,ot(y,h,!1)})).apply(this,arguments)}function ot(y,h){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,g.Z)(function*(y,h,p=!1){const _=bn(y),S=vn(_,h),z=yield new dd(_,S,p).execute();return z&&!p&&(delete z.user._redirectEventId,yield _._persistUserIfCurrent(z.user),yield _._setRedirectUser(null,h)),z})).apply(this,arguments)}function St(y){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(y){const h=Ks(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class ci{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Jn(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xn(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!xn(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xu(h))}saveEventToCache(h){this.cachedEventUids.add(xu(h)),this.lastProcessedEventTime=Date.now()}}function xu(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function xn({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function us(y){return bi.apply(this,arguments)}function bi(){return(bi=(0,g.Z)(function*(y,h={}){return At(y,"GET","/v1/projects",h)})).apply(this,arguments)}const lf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ag=/^https?/;function hf(){return(hf=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield us(y);for(const p of h)try{if(ff(p))return}catch{}Ee(y,"unauthorized-domain")})).apply(this,arguments)}function ff(y){const h=ce(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const z=new URL(y);return""===z.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&z.hostname===_}if(!ag.test(p))return!1;if(lf.test(y))return _===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const My=new Ze(3e4,6e4);function pf(){const y=Sn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Xs=null;function xy(y){return Xs=Xs||function ug(y){return new Promise((h,p)=>{var _,S,R;function z(){pf(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{pf(),p(ve(y,"network-request-failed"))},timeout:My.get()})}if(null!==(S=null===(_=Sn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Sn().gapi)||void 0===R||!R.load){const ae=Lc("iframefcb");return Sn()[ae]=()=>{gapi.load?z():p(ve(y,"network-request-failed"))},Fi(`https://apis.google.com/js/api.js?onload=${ae}`).catch(Ve=>p(Ve))}z()}}).catch(h=>{throw Xs=null,h})}(y),Xs}const Ry=new Ze(5e3,15e3),X0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Py(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?We(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:J.SDK_VERSION},S=Oy.get(y.config.apiHost);S&&(_.eid=S);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function fd(){return fd=(0,g.Z)(function*(y){const h=yield xy(y),p=Sn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:Py(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:X0,dontclear:!0},_=>new Promise(function(){var S=(0,g.Z)(function*(R,z){yield _.restyle({setHideOnLeave:!1});const ae=ve(y,"network-request-failed"),Ve=Sn().setTimeout(()=>{z(ae)},Ry.get());function et(){Sn().clearTimeout(Ve),R(_)}_.ping(et).then(et,()=>{z(ae)})});return function(R,z){return S.apply(this,arguments)}}()))}),fd.apply(this,arguments)}const pd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class li{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ji(y,h,p,_,S,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const z={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:J.SDK_VERSION,eventId:S};if(h instanceof ts){h.setDefaultLanguage(y.languageCode),z.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(z.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,et]of Object.entries(R||{}))z[Ve]=et}if(h instanceof Eo){const Ve=h.getScopes().filter(et=>""!==et);Ve.length>0&&(z.scopes=Ve.join(","))}y.tenantId&&(z.tid=y.tenantId);const ae=z;for(const Ve of Object.keys(ae))void 0===ae[Ve]&&delete ae[Ve];return`${function fg({config:y}){return y.emulator?We(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ae).slice(1)}`}const pg="webStorageSupport",yd=class J0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=ot,this._overrideRedirectResult=Da}_openPopup(h,p,_,S){var R=this;return(0,g.Z)(function*(){var z;Le(null===(z=R.eventManagers[h._key()])||void 0===z?void 0:z.manager,"_initialize() not called before _openPopup()");const ae=ji(h,p,_,ce(),S);return function lg(y,h,p,_=500,S=600){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),z=Math.max((window.screen.availWidth-_)/2,0).toString();let ae="";const Ve=Object.assign(Object.assign({},pd),{width:_.toString(),height:S.toString(),top:R,left:z}),et=(0,O.z$)().toLowerCase();p&&(ae=vt(et)?"_blank":p),X(et)&&(h=h||"http://localhost",Ve.scrollbars="yes");const Ct=Object.entries(Ve).reduce((rr,[Gi,Ad])=>`${rr}${Gi}=${Ad},`,"");if(function Zn(y=(0,O.z$)()){var h;return Gt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(et)&&"_self"!==ae)return function dg(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",ae),new li(null);const ht=window.open(h||"",ae,Ct);V(ht,y,"popup-blocked");try{ht.focus()}catch{}return new li(ht)}(h,ae,Ks())})()}_openRedirect(h,p,_,S){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function Cs(y){Sn().location.href=y}(ji(h,p,_,ce(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:R}=this.eventManagers[p];return S?Promise.resolve(S):(Le(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function cg(y){return fd.apply(this,arguments)}(h),S=new ci(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(pg,{type:pg},S=>{var R;const z=null===(R=S?.[0])||void 0===R?void 0:R[pg];void 0!==z&&p(!!z),Ee(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function df(y){return hf.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Kh()||st()||Gt()}};class gg{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return me("unexpected MultiFactorSessionType")}}}class qc extends gg{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new qc(h)}_finalizeEnroll(h,p,_){return function ng(y,h){return At(y,"POST","/v2/accounts/mfaEnrollment:finalize",Xe(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Eu(y,h){return At(y,"POST","/v2/accounts/mfaSignIn:finalize",Xe(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wr=(()=>{class y{constructor(){}static assertion(p){return qc._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var vd="@firebase/auth";class yf{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Lo(){return window}function vf(){return(vf=(0,g.Z)(function*(y,h,p){var _;const{BuildInfo:S}=Lo();Le(h.sessionId,"AuthEvent did not contain a session ID");const R=yield _f(h.sessionId),z={};return Gt()?z.ibi=S.packageName:_t()?z.apn=S.packageName:Ee(y,"operation-not-supported-in-this-environment"),S.displayName&&(z.appDisplayName=S.displayName),z.sessionId=R,ji(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,z)})).apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(y){const{BuildInfo:h}=Lo(),p={};Gt()?p.iosBundleId=h.packageName:_t()?p.androidPackageName=h.packageName:Ee(y,"operation-not-supported-in-this-environment"),yield us(y,p)})).apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(y,h,p){const{cordova:_}=Lo();let S=()=>{};try{yield new Promise((R,z)=>{let ae=null;function Ve(){var ht;R();const rr=null===(ht=_.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof rr&&rr(),"function"==typeof p?.close&&p.close()}function et(){ae||(ae=window.setTimeout(()=>{z(ve(y,"redirect-cancelled-by-user"))},2e3))}function Ct(){"visible"===document?.visibilityState&&et()}h.addPassiveListener(Ve),document.addEventListener("resume",et,!1),_t()&&document.addEventListener("visibilitychange",Ct,!1),S=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",Ct,!1),ae&&window.clearTimeout(ae)}})}finally{S()}})).apply(this,arguments)}function _f(y){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,g.Z)(function*(y){const h=Yc(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Yc(y){if(Le(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(0,O.Pz)("authIdTokenMaxAge"),function _d(y){(0,J._registerComponent)(new le.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:z}=_.options;return((ae,Ve)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:ae.name}),V(!z?.includes(":"),"argument-error",{appName:ae.name});const et={apiKey:R,authDomain:z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xa(y)},Ct=new Bl(ae,Ve,et);return function re(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(ct);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(Ct,p),Ct})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,J._registerComponent)(new le.wA("auth-internal",h=>{const p=bn(h.getProvider("auth").getImmediate());return new yf(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,J.registerVersion)(vd,"0.21.5",function ei(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,J.registerVersion)(vd,"0.21.5","esm2017")}("Browser");class Js extends ci{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Qc(y){return eo.apply(this,arguments)}function eo(){return(eo=(0,g.Z)(function*(y){const h=yield Id()._get(_g(y));return h&&(yield Id()._remove(_g(y))),h})).apply(this,arguments)}function tw(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function Id(){return ct(Oc)}function _g(y){return L("authEvent",y.config.apiKey,y.name)}function Vo(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}const Ru=class Jc{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ot,this._overrideRedirectResult=Da}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let S=p.eventManagers.get(_);return S||(S=new Js(h),p.eventManagers.set(_,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){Ee(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,S){var R=this;return(0,g.Z)(function*(){!function Kc(y){var h,p,_,S,R,z,ae,Ve,et,Ct;const ht=Lo();V("function"==typeof(null===(h=ht?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=ht?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(_=ht?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Ve=null===(ae=null===(z=ht?.cordova)||void 0===z?void 0:z.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Ct=null===(et=ht?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===Ct?void 0:Ct.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const z=yield R._initialize(h);yield z.initialized(),z.resetRedirect(),function og(){Jr.clear()}(),yield R._originValidation(h);const ae=function Ed(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:tw(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,S);yield function wf(y,h){return Id()._set(_g(y),h)}(h,ae);const Ve=yield function yg(y,h,p){return vf.apply(this,arguments)}(h,ae,p),et=yield function ba(y){const{cordova:h}=Lo();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function _i(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Ve);return function wd(y,h,p){return Hi.apply(this,arguments)}(h,z,et)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Uy(y){return Ca.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=Lo(),z=setTimeout((0,g.Z)(function*(){yield Qc(h),p.onEvent(wg())}),500),ae=function(){var Ct=(0,g.Z)(function*(ht){clearTimeout(z);const rr=yield Qc(h);let Gi=null;rr&&ht?.url&&(Gi=function ew(y,h){var p,_;const S=function Xc(y){const h=Vo(y),p=h.link?decodeURIComponent(h.link):void 0,_=Vo(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Vo(S).link||S||_||p||y}(h);if(S.includes("/__/auth/callback")){const R=Vo(S),z=R.firebaseError?function Ta(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ae=null===(_=null===(p=z?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Ve=ae?ve(ae):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(rr,ht.url)),p.onEvent(Gi||wg())});return function(rr){return Ct.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ae);const Ve=S,et=`${R.packageName.toLowerCase()}://`;Lo().handleOpenURL=function(){var Ct=(0,g.Z)(function*(ht){if(ht.toLowerCase().startsWith(et)&&ae({url:ht}),"function"==typeof Ve)try{Ve(ht)}catch(rr){console.error(rr)}});return function(ht){return Ct.apply(this,arguments)}}()}};function wg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Ma(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function If(y=(0,O.z$)()){return!("file:"!==Ma()&&"ionic:"!==Ma()&&"capacitor:"!==Ma()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dg(){try{const y=self.localStorage,h=Ks();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Dd(y=(0,O.z$)()){return function Df(){return(0,O.w1)()&&11===document?.documentMode}()||function By(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return Cf()&&(0,O.hl)()}return!1}function Cf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function xa(){return(function Ig(){return"http:"===Ma()||"https:"===Ma()}()||(0,O.ru)()||If())&&!function nw(){return(0,O.b$)()||(0,O.UG)()}()&&Dg()&&!Cf()}function bf(){return If()&&typeof document<"u"}function Uo(){return(Uo=(0,g.Z)(function*(){return!!bf()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const di={LOCAL:"local",NONE:"none",SESSION:"session"},Ra=V,Bo="persistence";function Cd(y){return nl.apply(this,arguments)}function nl(){return(nl=(0,g.Z)(function*(y){yield y._initializationPromise;const h=$y(),p=L(Bo,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function $y(){var y;try{return(null===(y=function Cg(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const jy=V;class As{constructor(){this.browserResolver=ct(yd),this.cordovaResolver=ct(Ru),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=ot,this._overrideRedirectResult=Da}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,S){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,S)})()}_openRedirect(h,p,_,S){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return bf()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function tl(){return Uo.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function bg(y){return y.unwrap()}function Tg(y){return Sg(y)}function Sg(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Gc.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=Yh;break;case"facebook.com":_=vc;break;case"github.com":_=Qh;break;case"twitter.com":_=Jp;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:z,pendingToken:ae,nonce:Ve}=h;return R||z||S||ae?ae?p.startsWith("saml.")?Io._create(p,ae):ai._fromParams({providerId:p,signInMethod:p,pendingToken:ae,idToken:S,accessToken:R}):new aa(p).credential({idToken:S,accessToken:R,rawNonce:Ve}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function ti(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Nu(y,h){var p;const _=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Td(y,function cr(y,h){var p;const _=(0,O.m9)(y),S=h;return V(h.customData.operationType,_,"argument-error"),V(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Nc._fromError(_,S)}(y,h));else if(_){const S=Sg(h),R=h;S&&(R.credential=S,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Tg(p),additionalUserInfo:tf(p),user:Ms.getOrCreate(S)}})}function Ag(y,h){return bd.apply(this,arguments)}function bd(){return(bd=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>ti(y,p.confirm(_))}})).apply(this,arguments)}class Td{constructor(h,p){this.resolver=p,this.auth=function Tf(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return ti(bg(this.auth),this.resolver.resolveSignIn(h))}}class Ms{constructor(h){this._delegate=h,this.multiFactor=function hu(y){const h=(0,O.m9)(y);return zs.has(h)||zs.set(h,ga._fromUser(h)),zs.get(h)}(h)}static getOrCreate(h){return Ms.USER_MAP.has(h)||Ms.USER_MAP.set(h,new Ms(h)),Ms.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return ti(p.auth,On(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return Ag(_.auth,function sg(y,h,p){return od.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return ti(p.auth,function Q0(y,h,p){return _r.apply(this,arguments)}(p._delegate,h,As))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Cd(bn(p.auth)),function W(y,h,p){return function Y(y,h,p){return _e.apply(this,arguments)}(y,h,p)}(p._delegate,h,As)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return ti(p.auth,js(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Ag(this.auth,function ad(y,h,p){return jc.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return ti(this.auth,function Y0(y,h,p){return uf.apply(this,arguments)}(this._delegate,h,As))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Cd(bn(p.auth)),function b(y,h,p){return function M(y,h,p){return F.apply(this,arguments)}(y,h,p)}(p._delegate,h,As)})()}sendEmailVerification(h){return function Kl(y,h){return Sc.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function eu(y,h){return Do.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function Zl(y,h){return Yl((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function pa(y,h){return Yl((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Hc(y,h){return cd.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Gs(y,h){return Pi.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function lu(y,h,p){return Qn.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ms.USER_MAP=new WeakMap;const Ou=V;let Pu=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Ou(S,"invalid-api-key",{appName:p.name}),Ou(S,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?As:void 0;this._delegate=_.initialize({options:{persistence:Hy(S,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function fc(y,h,p){const _=bn(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!p?.disableWarnings,R=ra(h),{host:z,port:ae}=function ia(y){const h=ra(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:Zt(_.substr(R.length+1))}}{const[R,z]=_.split(":");return{host:R,port:Zt(z)}}}(h);_.config.emulator={url:`${R}//${z}${null===ae?"":`:${ae}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:z,port:ae,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function Yn(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function iu(y,h){return ql.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return su(this._delegate,p)}confirmPasswordReset(p,_){return function ha(y,h,p){return Tt.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var S=this;return(0,g.Z)(function*(){return ti(S._delegate,function Jh(y,h,p){return bc.apply(this,arguments)}(S._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function uu(y,h){return cu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Wl(y,h){return"EMAIL_SIGNIN"===oa.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Ou(xa(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function nt(y,h){return at.apply(this,arguments)}(p._delegate,As);return _?ti(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Ef(y,h){bn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,S){const{next:R,error:z,complete:ae}=Sd(p,_,S);return this._delegate.onAuthStateChanged(R,z,ae)}onIdTokenChanged(p,_,S){const{next:R,error:z,complete:ae}=Sd(p,_,S);return this._delegate.onIdTokenChanged(R,z,ae)}sendSignInLinkToEmail(p,_){return function Yt(y,h,p){return Tc.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function ns(y,h,p){return da.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let S;switch(function Na(y,h){Ra(Object.values(di).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?Ra(h!==di.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Ra(h===di.NONE,y,"unsupported-persistence-type"):Cf()?Ra(h===di.NONE||h===di.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Ra(h===di.NONE||Dg(),y,"unsupported-persistence-type")}(_._delegate,p),p){case di.SESSION:S=Ws;break;case di.LOCAL:S=(yield ct(Qs)._isAvailable())?Qs:Oc;break;case di.NONE:S=U;break;default:return Ee("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return ti(this._delegate,function Gl(y){return Xh.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return ti(this._delegate,Mn(this._delegate,p))}signInWithCustomToken(p){return ti(this._delegate,function Hs(y,h){return nr.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return ti(this._delegate,function fe(y,h,p){return Mn((0,O.m9)(y),yc.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return ti(this._delegate,function ur(y,h,p){return fa.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Ag(this._delegate,function un(y,h,p){return Vi.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return Ou(xa(),_._delegate,"operation-not-supported-in-this-environment"),ti(_._delegate,function Fo(y,h,p){return Su.apply(this,arguments)}(_._delegate,p,As))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return Ou(xa(),_._delegate,"operation-not-supported-in-this-environment"),yield Cd(_._delegate),function wt(y,h,p){return function Mu(y,h,p){return D.apply(this,arguments)}(y,h,p)}(_._delegate,p,As)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Cc(y,h){return ou.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=di,y})();function Sd(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const S=_;return{next:z=>S(z&&Ms.getOrCreate(z)),error:h,complete:p}}function Hy(y,h){const p=function rl(y,h){const p=$y();if(!p)return[];const _=L(Bo,y,h);switch(p.getItem(_)){case di.NONE:return[U];case di.LOCAL:return[Qs,Ws];case di.SESSION:return[Ws];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Qs)&&p.push(Qs),typeof window<"u")for(const _ of[Oc,Ws])p.includes(_)||p.push(_);return p.includes(U)||p.push(U),p}class il{constructor(){this.providerId="phone",this._delegate=new Gc(bg(K.Z.auth()))}static credential(h,p){return Gc.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}il.PHONE_SIGN_IN_METHOD=Gc.PHONE_SIGN_IN_METHOD,il.PROVIDER_ID=Gc.PROVIDER_ID;const Mg=V;class Sf{constructor(h,p,_=K.Z.app()){var S;Mg(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Ea(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xg(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new Pu(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:yc,FacebookAuthProvider:vc,GithubAuthProvider:Qh,GoogleAuthProvider:Yh,OAuthProvider:aa,SAMLAuthProvider:Oi,PhoneAuthProvider:il,PhoneMultiFactorGenerator:wr,RecaptchaVerifier:Sf,TwitterAuthProvider:Jp,Auth:Pu,AuthCredential:Nn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.5")}(K.Z)},8766:(lt,be,P)=>{P.d(be,{Lj:()=>Ee,X3:()=>Pe});var g=P(5861);let O,J;const le=new WeakMap,ue=new WeakMap,se=new WeakMap,B=new WeakMap,$=new WeakMap;let Ie={get(V,me,Le){if(V instanceof IDBTransaction){if("done"===me)return ue.get(V);if("objectStoreNames"===me)return V.objectStoreNames||se.get(V);if("store"===me)return Le.objectStoreNames[1]?void 0:Le.objectStore(Le.objectStoreNames[0])}return De(V[me])},set:(V,me,Le)=>(V[me]=Le,!0),has:(V,me)=>V instanceof IDBTransaction&&("done"===me||"store"===me)||me in V};function he(V){return"function"==typeof V?function it(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return J||(J=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...me){return V.apply(Ce(this),me),De(le.get(this))}:function(...me){return De(V.apply(Ce(this),me))}:function(me,...Le){const qe=V.call(Ce(this),me,...Le);return se.set(qe,me.sort?me.sort():[me]),De(qe)}}(V):(V instanceof IDBTransaction&&function Be(V){if(ue.has(V))return;const me=new Promise((Le,qe)=>{const ct=()=>{V.removeEventListener("complete",Qe),V.removeEventListener("error",re),V.removeEventListener("abort",re)},Qe=()=>{Le(),ct()},re=()=>{qe(V.error||new DOMException("AbortError","AbortError")),ct()};V.addEventListener("complete",Qe),V.addEventListener("error",re),V.addEventListener("abort",re)});ue.set(V,me)}(V),((V,me)=>me.some(Le=>V instanceof Le))(V,function ee(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ie):V)}function De(V){if(V instanceof IDBRequest)return function q(V){const me=new Promise((Le,qe)=>{const ct=()=>{V.removeEventListener("success",Qe),V.removeEventListener("error",re)},Qe=()=>{Le(De(V.result)),ct()},re=()=>{qe(V.error),ct()};V.addEventListener("success",Qe),V.addEventListener("error",re)});return me.then(Le=>{Le instanceof IDBCursor&&le.set(Le,V)}).catch(()=>{}),$.set(me,V),me}(V);if(B.has(V))return B.get(V);const me=he(V);return me!==V&&(B.set(V,me),$.set(me,V)),me}const Ce=V=>$.get(V);function Pe(V,me,{blocked:Le,upgrade:qe,blocking:ct,terminated:Qe}={}){const re=indexedDB.open(V,me),ce=De(re);return qe&&re.addEventListener("upgradeneeded",ye=>{qe(De(re.result),ye.oldVersion,ye.newVersion,De(re.transaction))}),Le&&re.addEventListener("blocked",()=>Le()),ce.then(ye=>{Qe&&ye.addEventListener("close",()=>Qe()),ct&&ye.addEventListener("versionchange",()=>ct())}).catch(()=>{}),ce}function Ee(V,{blocked:me}={}){const Le=indexedDB.deleteDatabase(V);return me&&Le.addEventListener("blocked",()=>me()),De(Le).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Fe=new Map;function Re(V,me){if(!(V instanceof IDBDatabase)||me in V||"string"!=typeof me)return;if(Fe.get(me))return Fe.get(me);const Le=me.replace(/FromIndex$/,""),qe=me!==Le,ct=Te.includes(Le);if(!(Le in(qe?IDBIndex:IDBObjectStore).prototype)||!ct&&!ve.includes(Le))return;const Qe=function(){var re=(0,g.Z)(function*(ce,...ye){const Ae=this.transaction(ce,ct?"readwrite":"readonly");let Oe=Ae.store;return qe&&(Oe=Oe.index(ye.shift())),(yield Promise.all([Oe[Le](...ye),ct&&Ae.done]))[0]});return function(ye){return re.apply(this,arguments)}}();return Fe.set(me,Qe),Qe}!function He(V){Ie=V(Ie)}(V=>({...V,get:(me,Le,qe)=>Re(me,Le)||V.get(me,Le,qe),has:(me,Le)=>!!Re(me,Le)||V.has(me,Le)}))},5861:(lt,be,P)=>{function g(O,J,ee,te,le,ue,se){try{var B=O[ue](se),$=B.value}catch(q){return void ee(q)}B.done?J($):Promise.resolve($).then(te,le)}function K(O){return function(){var J=this,ee=arguments;return new Promise(function(te,le){var ue=O.apply(J,ee);function se($){g(ue,te,le,se,B,"next",$)}function B($){g(ue,te,le,se,B,"throw",$)}se(void 0)})}}P.d(be,{Z:()=>K})}},lt=>{lt(lt.s=6721)}]);